jQuery(document).ready(function(D){var I=TvrMT.TvrCom,y=TvrMT.MTF,p=TvrMT.MTdetached,s=TvrMT.detachedWin,O=TvrMT.mod.MTace,g=TvrMT.mod.MTint,w=TvrMT.mod.MTloop,E=TvrMT.mod.MTdd,P=TvrMT.mod.MTsave,e=TvrMT.mod.MTsass,_=TvrMT.mod.MTgrid,u=TvrMT.mod.MTfolder,F=(TvrMT.mod.MTtransform,TvrMT.mod.MTlayout),m=TvrMT.mod.MTwidget,t=TvrMT.data.dyn.pref,r=parseInt(t.allow_scss),a=TvrMT.data.dyn.client_scss,t=D("body").width();TvrMT.TvrUi={cssFilters:TvrMT.data.prog.CSSFilters,cssProps:TvrMT.data.prog.CSSProps,gatheredCSS:TvrMT.data.prog.gatheredCSS,templates:TvrMT.data.templates,blog_details:TvrMT.data.dyn.blog_details,TVR_DEV_MODE:TVR_DEV_MODE,scss_enabled:r,client_scss:a,pref:TvrMT.data.dyn.pref,uiData:TvrMT.data.dyn.ui,sass:!1,jsDataFunc:!1,jsuVersion:7,jsuEvents:{js_css_compilation:3,synced_code_gui:4,imp_only_sh_and_grad_fix:5,property_value_structure:6,separate_css_units:7},sRules:CSSUtilities,reinitRules:!0,tooMuchCSS:!1,tmp:{},uiUrl:D("#ui-url").attr("rel"),pluginUrl:D("#plugin-url").attr("rel"),innoFireall:parseInt(D("#inno-firewall-issue").attr("rel")),adminUrl:D("#admin-url").attr("rel"),microUrl:D("#micro-url").attr("rel"),totalSecs:parseInt(D("#total-sec-count").text()),TvrSugCSS:{},breadcrumbNodesCache:{},highlightEnabled:!1,colorPickerDragging:!1,progStatus:[],intelli:!1,awaitingIFrame:!0,placeholderFrame:!0,errorBeingProcessed:0,compProps:{},grid:{container:!1,items:[]},intelliCompProps:{},nodeCSS:{},intellinodeCSS:{},mixedElKey:0,update_gf_url:!1,g_url:"",comboScrollTopPos:0,pageOrPostID:I.checkObject(TvrMT.data.dyn,["ui_config","preview_item_id"]),numSug:100,numRecent:6,numSampled:15,numMiniTiles:12,numSavedTiles:56,numSiteTiles:56,maxSelsPerFolder:40,proGroups:{flexbox:1,grid:1,animation:1,transition:1,transform:1,mask:1},samplingProps:["font_family","font_size","line_height","color","padding_top","padding_right","padding_bottom","padding_left","margin_top","margin_right","margin_bottom","margin_left","row_gap","column_gap","border_width","border_radius"],gridTrackProps:["grid-template-rows","grid-template-columns","grid-auto-rows","grid-auto-columns"],propAliases:TvrMT.data.prog.propAliases,cssFuncAliases:TvrMT.data.prog.cssFuncAliases,domChanged:{updateHTMLPane:!1,updateFrontIndexes:!1},mutationObserver:!1,selectorLabelEditing:!1,retargetSelector:!1,draftSelector:{atts:{},ace:{}},draftFolders:[],draft_user_action:{new:{},retarget:{}},stat:{win:window,doc:document,head:document.head,$doc:D(document),body:D("body"),tvr:D("#tvr"),vis:D("#visual-view"),styleComponents:D("#style-components"),logicAnalysis:D("#logicAnalysis"),phpSyntax:D("#phpSyntax"),nav:D("#tvr-nav"),mainMenu:D("#mt-folders"),searchFoldersInput:D("#search-folders-input"),mainMenuInner:D("#tvr-menu"),top:D("#mt-top-controls"),code:D("#hand-css-area"),codeInner:D("#tvr-inner-code"),grid:D("#grid-control-wrap"),inlineEditor:D("#inline-editor"),adaptableEditor:D("#adaptable-editor"),view:D("#display-css-code-dialog"),res:D("#responsive-bar"),css_icons:D("#css-group-icons"),slider:D("#v-mq-slider"),opts:D("#tvr-options"),front:D("#v-frontend-wrap"),frontInner:D("#v-frontend"),wiz:D("#advanced-wizard"),inspectionPanes:D("#wizard-panes"),currentFolderItem:D("#current-folder-item"),refineTarget:D("#refine-target-controls"),cssModifiers:D("#cm-css-filters"),contextMenu:D("#mt-context-menu"),addSelectorForm:D("#cm-edit-folder-options").find(".add-selector-form"),editSelectorForm:D("#cm-selector-options").find(".edit-selector-form"),suggestionsMenu:D("#mt-suggestions-menu"),suggestionsAdvanced:D("#mt-suggestions-panel"),curSecTrailText:D("#sec-in-focus"),curSelTrailText:D("#cur-sel-trail-text"),curStateTrailText:D("#cur-state-trail-text"),curSecInput:D("#sec-hierarchy-input"),curSelInput:D("#sel-hierarchy-input"),curCodeInput:D("#code-hierarchy-input"),publishButton:D("#mt-publish-action"),breadcrumbs:D("#full-breadcrumbs"),sliderDragbar:D("#mtss-dragbar"),actStyles:D("#actual-styles"),settingsMenu:D("#program-settings-menu"),notifications:D("#mt-notifications"),iframe:D("#viframe"),iframeDoc:!1,dialogs:D("#dialogs"),cssUnitGrid:D("#css-units-grid"),scss_compile_notes:D("#scss-error-notes"),scss_error_file:D("#scss-error-file"),widthTest:D("#tvr-width-input"),changeUrlInputWrap:D("#previewPath").parent(),inputWidthCalc:D("#inputWidthCalc"),codeInputWidthCalc:D("#codeInputWidthCalc")},tOut:6e4,hi:{section:"folder-icon tvr-icon",selector:"selector-icon tvr-icon",tab:"edit-media-queries lg-icon"},baseFontSize:16,browser:D("#user-browser").attr("rel"),meta:{},inputWaitingObj:{},timer:{typing:0,quickTarget:0,deferredTarget:0,prog:[]},previous_selector:"",joined_selectors:[],jumpTo:!1,something_wrong:!1,debugCount:0,wasOpen:!1,dataLoading:!1,intelliAfterLoad:!1,ajaxUrl:D("#wpAjaxUrl").attr("rel"),toolbarHeight:0,frameHeight:0,frameWidth:0,previewWidth:0,rulerVal:0,prev:!1,fullWidth:t,resSliderWidth:0,tabsWidth:0,sortableMenuDims:{},mqs:[],totalSels:parseInt(D("#total-sel-count").text()),trial:"1"!=D("#plugin-trial").attr("rel"),trialNotice:TvrLang.trial_notice,gFontTarget:Object(),selsToLoad:0,totalToLoad:0,pgInFocusWiz:"font",aceTypingInterval:50,inputTypingInterval:50,beforeSaveInterval:1200,beforeAutoConvertInterval:2e3,saveInProgress:!1,pendingAutoSave:function(){return I.obj_length(L.pendingAutoSaveConfig)},pendingAutoSaveConfig:{},reSave:!1,siteUrl:D("#site-url").attr("rel"),homeUrl:D("#home-url").attr("rel"),itemAlreadyExpanded:!1,tooltipDelay:300,edge_mode:parseInt(D("#edge-mode").attr("rel")),init:function(){window!=window.top&&window.parent.TvrMT&&(window.location=L.homeUrl),TvrMT.init.add_listeners()},set_default_theme_mode:function(){window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&L.toggle_feature(D("#mymtonoffswitch-mt_dark_mode").closest(".mt-ui-toggle")),L.pref.theme_mode_set=1,P.save_multiple_preferences({mt_dark_mode:L.pref.mt_dark_mode,theme_mode_set:1},1)},ua_detected:function(){L.something_wrong=!1},JSerrors:[],prevJSerrors:[],reportedJSErrors:[],process_error:function(e,t,s,r,a,o){if(3<L.errorBeingProcessed)return L.errorBeingProcessed=0,!1;L.errorBeingProcessed++,!(o=o||{}).stack||(n=o.stack.match(/\((https?:[^:]+):(\d+):(\d+)/))&&(s=n[1],r=n[2],a=n[3]);var n=s.substring(s.lastIndexOf("/")+1).split("?")[0],o={error:t,file:n,URL:s,line:r,col:a,error_key:n+"|"+r+"|"+a+"|"+t,source:"ui"===e?TvrLang.interface:TvrLang.frontend,stack:L.strip_domain_names(o.stack)};L.JSerrors.push(o),L.instant_show_js_error(e,o)},catch_js_errors:function(){if(window.top.Cypress||!parseInt(L.pref.monitor_js_errors))return!1;window.onerror=function(e,t,s,r,a){L.process_error("ui",e,t,s,r,a)}},instantPreviewNotSass:function(){return!parseInt(L.pref.allow_scss)},isMTerror:function(e,t){return e&&(-1<e.indexOf("microthemer/js")||t&&-1<e.indexOf("micro-themes/draft-scripts.js"))},instant_show_js_error:function(e,t){let s=L.pref.reporting.file.unique_errors;var r;s!==Object(s)&&(L.pref.reporting.file.unique_errors={},s=L.pref.reporting.file.unique_errors),TVR_DEV_MODE||!s[t.error_key]?(s[t.error_key]=1,I.action_after_timeout("maybe_send_error_report",500,{item:L.maybe_send_error_report,args:[!1,!1,t]})):s[t.error_key]++,L.isMTerror(t.URL,!0)&&(r=t.error,r={short:r+=" (line "+t.line+")",long:"<p>"+TvrLang.js_error_site+":</p>"+L.js_error_deets(),type:"warning"},"ui"===e?P.update_full_logs(r):P.log(r))},js_error_deets:function(e){I.startT(arguments);var t="",s=e?L.prevJSerrors:L.JSerrors;if(0<s.length){for(var r in t+="<ol>",s)if(s.hasOwnProperty(r)){var a,o=s[r];for(a in t+="<li>",o)if(o.hasOwnProperty(a)){var n=o[a];if("URL"===a&&n)n='<a target="_blank" href="'+n+'">'+I.root_rel(n).split("?")[0]+"</a>";else{if("stack"===a||"file"===a||"error_key"===a)continue;"error"===a&&"object"==typeof n&&(n=n.detail&&"object"==typeof n.detail&&n.detail.message?n.detail.message:"Error details unknown")}t+="<b>"+I.ucwords(a)+":</b> "+n+"<br />"}t+="</li>"}t+="</ol>",L.prevJSerrors=D.extend(!0,[],L.JSerrors),L.reportedJSErrors=[].concat(L.prevJSerrors),L.JSerrors=[]}return I.endT(arguments),t},isProGroup:function(e){e=L.get_meta(e,"group");return L.proGroups[e.groupSlug]},isForbiddenProperty:function(e){return!(L.pref.buyer_validated||!I.isDomEl(e)||!e.hasClass("property-input")||!L.isProGroup(e))&&(e.val(""),alert(TvrLang.trial_notice),!0)},adjust_mqs_for_unit:function(e){I.startT(arguments);var t,s=["min","max"];for(t in e)if(e.hasOwnProperty(t))for(var r=0;r<s.length;++r){var a=s[r];e[t][a]=parseFloat(e[t][a]),e[t][a+"_unit"]&&"px"!=e[t][a+"_unit"]&&(e[t][a]=parseFloat(e[t][a])*L.baseFontSize)}return I.endT(arguments),e},maybe_pair_class:function(e,t){var s=I.get_pseudo_class(e);if(!s)return!1;var r=s[0];if(!L.get_pseudo_config(s)[r].strip)return!1;s="mt-"+I.convert_to_param(r,"");if("class"==t)return s;if("selector"==t||"full"==t){r=new RegExp(r+"(?!.*"+r+")"),s=e.replace(r,"."+s);return"selector"==t?s:e+", "+s}},get_pseudo_config:function(e){var t,s={};for(t in e)e.hasOwnProperty(t)&&(s[e[t]]={});var r,a=["page_specific","pseudo_elements","pseudo_classes"];for(r in a)if(a.hasOwnProperty(r)){var o,n,i=a[r];for(o in L.cssFilters[i].items)L.cssFilters[i].items.hasOwnProperty(o)&&(n=o.replace("::",":"),(s[o]||s[n])&&(s[n=s[n]?n:o]=D.extend(!0,{},L.cssFilters[i].items[o]),s[n].pCE=o))}return s},psuedo_is_set:function(){var e,t=L.stat.tvr.attr("class"),s=["pseudo_classes","page_specific","pseudo_elements"];for(e in s)if(s.hasOwnProperty(e)&&-1<t.indexOf(s[e]))return!0;return!1},support_sampling:function(e,t){return!0},get_property_tab_control:function(e){e=e.replace(/_/g,"-");return I.checkObject(TvrMT.data.prog.lh,[e,"tab_control"])},pseudo_class_format:function(e){return"filter-"+e.replace(/[:\(\)]+/g,"")},get_pseudo:function(e,t){if("val"==e){t=L.pseudo_class_format(t.pseudoCE);return L.stat.cssModifiers.find("ul.css-filter-list").find("li."+t).find("input").val()}},get_local_window_function:function(e,t){return s=TvrMT.detachedWin,p=window.TvrMT.MTdetached,(!t&&F.detached_window_available(!0)&&!!s.MTlocal&&s.MTLocalFunctionsReady?s:window).MTlocal[e]},keyboard_save_action:function(e,t){L.ua_detected(),L.draftSelector.ace.deferSave=!1;var s=parseInt(L.pref.show_code_editor)?"full":"inline",r="fullSCSSCompile"===t;O.get_focus_editor().session.getMode();if("inline"==s){if(L.selInFocusID){var a=D("#"+L.selInFocusID+"-code-code-css-"+L.get_mq_focus());if(I.isDomEl(a))return P.ajax_save_settings({$editor:L.stat.adaptableEditor,noSaveDelay:!r,$property:a.find("textarea.property-input"),settings:r?{fullSCSSCompile:1}:{}}),e.preventDefault(),!1;t={},a="All settings saved (Ctrl + S)";r&&(t.fullSCSSCompile=1,a="Full Sass compile (Ctrl + Alt + P)"),t=P.user_action(t,{items:[a],icon:"mtif-save"}),P.ajax_save_settings({noSaveDelay:!r,settings:t})}}else O.ace_instant_save(s,O.ace_sync_details.$textarea,L.stat.adaptableEditor,!r,r);e.preventDefault()},keyPressDone:{},shortcutOnce:function(e){L.keyPressDone[e.action]||(e.item.apply(this,e.args),L.keyPressDone[e.action]=1)},setup_keyboard_shortcuts:function(e){var t,a,o;I.startT(arguments),function(e,r,t){function s(e,t,s){e.addEventListener?e.addEventListener(t,s,!1):e.attachEvent("on"+t,s)}function v(e){if("keypress"!=e.type)return l[e.which]||o[e.which]||String.fromCharCode(e.which).toLowerCase();var t=String.fromCharCode(e.which);return t=!e.shiftKey?t.toLowerCase():t}function h(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function b(e,t){var s,r,a=[],o=e;for(o="+"===o?["+"]:(o=o.replace(/\+{2}/g,"+plus")).split("+"),r=0;r<o.length;++r)s=o[r],d[s]&&(s=d[s]),t&&"keypress"!=t&&c[s]&&(s=c[s],a.push("shift")),h(s)&&a.push(s);if(o=s,!(r=t)){if(!i)for(var n in i={},l)95<n&&n<112||l.hasOwnProperty(n)&&(i[l[n]]=n);r=i[o]?"keydown":"keypress"}return{key:s,modifiers:a,action:r="keypress"==r&&a.length?"keydown":r}}function a(e){function i(e){e=e||{};var t,s=!1;for(t in p)e[t]?s=!0:p[t]=0;s||(m=!1)}function l(e,t,s,r,a,o){var n,i=[],l=s.type;if(!_._callbacks[e])return[];for("keyup"==l&&h(e)&&(t=[e]),n=0;n<_._callbacks[e].length;++n){var c,d=_._callbacks[e][n];!r&&d.seq&&p[d.seq]!=d.level||l!=d.action||((c="keypress"==l&&!s.metaKey&&!s.ctrlKey)||(c=d.modifiers,c=t.sort().join(",")===c.sort().join(",")),c&&(c=r&&d.seq==r&&d.level==o,(!r&&d.combo==a||c)&&_._callbacks[e].splice(n,1),i.push(d)))}return i}function c(e,t,s,r){_.stopCallback(t,t.target||t.srcElement,s,r)||!1!==e(t,s)||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)}function t(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t,s=v(e);s&&("keyup"==e.type&&g===s?g=!1:_.handleKey(s,(t=[],(s=e).shiftKey&&t.push("shift"),s.altKey&&t.push("alt"),s.ctrlKey&&t.push("ctrl"),s.metaKey&&t.push("meta"),t),e))}function n(t,e,s,r){function a(e){c(s,e,t),"keyup"!==r&&(g=v(e)),setTimeout(i,10)}for(var o=p[t]=0;o<e.length;++o){var n=o+1===e.length?a:function(e){return function(){m=e,++p[t],clearTimeout(u),u=setTimeout(i,1e3)}}(r||b(e[o+1]).action);d(e[o],n,r,t,o)}}function d(e,t,s,r,a){_._directMap[e+":"+s]=t;var o=(e=e.replace(/\s+/g," ")).split(" ");1<o.length?n(e,o,t,s):(s=b(e,s),_._callbacks[s.key]=_._callbacks[s.key]||[],l(s.key,s.modifiers,{type:s.action},r,e,a),_._callbacks[s.key][r?"unshift":"push"]({callback:t,modifiers:s.modifiers,action:s.action,seq:r,level:a,combo:e}))}var _=this;if(e=e||r,!(_ instanceof a))return new a(e);_.target=e,_._callbacks={},_._directMap={};var u,p={},g=!1,f=!1,m=!1;_._handleKey=function(e,t,s){for(var r=l(e,t,s),a=0,o=!(t={}),n=0;n<r.length;++n)r[n].seq&&(a=Math.max(a,r[n].level));for(n=0;n<r.length;++n)r[n].seq?r[n].level==a&&(o=!0,t[r[n].seq]=1,c(r[n].callback,s,r[n].combo,r[n].seq)):o||c(r[n].callback,s,r[n].combo);r="keypress"==s.type&&f,s.type!=m||h(e)||r||i(t),f=o&&"keydown"==s.type},_._bindMultiple=function(e,t,s){for(var r=0;r<e.length;++r)d(e[r],t,s)},s(e,"keypress",t),s(e,"keydown",t),s(e,"keyup",t)}if(e){var i,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},o={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},d={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"};for(t=1;t<20;++t)l[111+t]="f"+t;for(t=0;t<=9;++t)l[t+96]=t;a.prototype.bind=function(e,t,s){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,s),this},a.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},a.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},a.prototype.reset=function(){return this._callbacks={},this._directMap={},this},a.prototype.stopCallback=function(e,t){return!(-1<(" "+t.className+" ").indexOf(" tvr-mousetrap ")||function e(t,s){return null!==t&&t!==r&&(t===s||e(t.parentNode,s))}(t,this.target))&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable)},a.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},a.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(l[t]=e[t]);i=null},(a.init=function(){var e,t=a(r);for(e in t)"_"!==e.charAt(0)&&(a[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))})(),e.TvrMousetrap=a,"undefined"!=typeof module&&module.exports&&(module.exports=a),"function"==typeof define&&define.amd&&define(function(){return a})}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?e:null),t=TvrMousetrap,a={},o=t.prototype.stopCallback,t.prototype.stopCallback=function(e,t,s,r){return!!this.paused||!a[s]&&!a[r]&&o.call(this,e,t,s)},t.prototype.bindGlobal=function(e,t,s){if(this.bind(e,t,s),e instanceof Array)for(t=0;t<e.length;t++)a[e[t]]=!0;else a[e]=!0},t.init(),TvrMousetrap.bindGlobal(["alt"],function(e){return!L.mouseWheelAltAction&&L.iframeEditing()&&y.hoveredElement&&L.shortcutOnce({action:"select_hovered_element",item:y.select_element,args:[y.hoveredElement,{e:e,scroll:!1}]}),!1},"keypress"),TvrMousetrap.bindGlobal(["alt"],function(e){return L.mouseWheelAltAction&&(L.mouseWheelAltAction=!1),!1},"keyup"),TvrMousetrap.bindGlobal(["command+alt+b","ctrl+alt+b"],function(e){return L.shortcutOnce({action:"toggle_builder",item:g.keyboard_toggle_builder}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+c","ctrl+alt+c"],function(e){return L.shortcutOnce({action:"show_code_editor",item:L.toggle_feature,args:[!1,"show_code_editor"]}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+d","ctrl+alt+d"],function(e){return L.shortcutOnce({action:"detach_preview",item:L.toggle_feature,args:[!1,"detach_preview"]}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+g","ctrl+alt+g"],function(e){return L.shortcutOnce({action:"view_generated_code",item:L.show_dialog,args:[L.stat.settingsMenu.find("li.item-display-css-code")]}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+h","ctrl+alt+h"],function(e){return L.shortcutOnce({action:"toggle_highlighting",item:function(){parseInt(L.pref.mt_highlight)?L.feature_off(0,"mt_highlight",{fHTML:1,noSave:1}):L.feature_on(0,"mt_highlight",{offFirst:{fHTML:1,noSave:1},fHTML:1,noSave:1,con:"reg"})}}),!1},"keydown"),TvrMousetrap.bindGlobal(["command+alt+j","ctrl+alt+j"],function(e){return L.shortcutOnce({action:"toggle_inline_gui",item:L.toggle_inline_gui}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+n","ctrl+alt+n"],function(e){return L.shortcutOnce({action:"toggle_preview_page_menu",item:L.toggle_preview_page_menu,args:[L.stat.settingsMenu.find(".program-settings-tab-preview_page")]}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+o","ctrl+alt+o"],function(e){return L.shortcutOnce({action:"beautifyCode",item:function(){var e=O.eds["adaptable-editor"];e&&O.beautify_editor_content(e)}}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+p","ctrl+alt+p"],function(e){return L.shortcutOnce({action:"fullSCSSCompile",item:function(){L.close_dialog(),L.keyboard_save_action(e,"fullSCSSCompile")}}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+r","ctrl+alt+r"],function(e){return L.shortcutOnce({action:"editor_focus",item:function(){var e=O.eds["adaptable-editor"];e&&e.focus()},args:[]}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+s","ctrl+s"],function(e){return L.shortcutOnce({action:"keyboard_save_action",item:L.keyboard_save_action,args:[e,"save"]}),!1}),TvrMousetrap.bindGlobal(["command+alt+t","ctrl+alt+t"],function(e){return L.shortcutOnce({action:"hover_inspect",item:L.toggle_feature,args:[!1,"hover_inspect",{noSave:1}]}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+,","ctrl+alt+,"],function(e){return L.shortcutOnce({action:"nav_prev_item",item:L.quick_nav,args:[D("#vb-focus-prev")]}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+.","ctrl+alt+."],function(e){return L.shortcutOnce({action:"nav_next_item",item:L.quick_nav,args:[D("#vb-focus-next")]}),!1},"keypress"),D(e).on("keydown",function(e){var t;38!==e.which&&40!==e.which||(t=D(e.target),I.isDomEl(t)&&t.hasClass("mt-slider")&&!t.next(".combo-arrow").hasClass("on")&&m.increment_change(e,40===e.which))}),D(e).on("keyup",function(e){return L.keyPressDone={},18===e.which?(e.preventDefault(),!1):void(13!==e.which&&27!==e.which||(t=!(!e.target||!e.target.className)&&e.target.className)&&(s=e.target.id,r=D(e.target),e=13===e.which,r.closest("body").hasClass("tvr-visual")&&(0<=t.indexOf("selector-css-textarea")||0<=t.indexOf("selector-name-input")?(a=e?".tvr-button":".cancel",r.closest(".mt-folder-form").find(a).trigger("click")):0<=t.indexOf("add-section-label-input")||0<=t.indexOf("edit-section-label-input")?e?r.closest(".mt-folder-form").find(".tvr-button").trigger("click"):L.close_context_menu():"previewPath"===s&&e?r.closest(".tvr-input-wrap").find(".change-preview-url").trigger("click"):0<=t.indexOf("new-item-input")&&e?r.closest(".tvr-new-item").find(".new-item-add").trigger("click"):"sel-hierarchy-input"===s||"sec-hierarchy-input"===s?L.selectorLabelEditing?e?L.save_selector_label_edit():L.cancel_selector_label_edit():e?L.save_draft_selector(L.retargetSelector,!0):L.cancel_selector_label_edit(L.retargetSelector):"import_from_pack_name"!==s&&"export_pack_name"!==s||(a=e?".dialog-button":".close-dialog",r.closest(".tvr-dialog").find(a).trigger("click")))));var t,s,r,a}),I.endT(arguments)},toggle_main_menu:function(e){var t=!L.stat.mainMenu.hasClass("expanded"),s=e.data("trigger"),e=s===L.stat.mainMenu.data("trigger"),e=!t&&e;if(e)return L.hide_folders_or_settings("folders","left"),L.selInFocusID&&!L.search_filter&&(e=L.get_selector_in_focus(),L.scrollIntoView(L.folders_scrollable_area(),e.selectorM)),!1;t&&L.show_folders_or_settings("folders","left"),L.search_filter||("all"===s?I.scroll_to({scrollDiv:L.folders_scrollable_area(),top:!0}):L.maybe_show_current_folder_item_view()),L.stat.mainMenu.data("trigger",s)},expand_interface_if_collapsed:function(){parseInt(L.pref.hide_interface)&&L.feature_off(!1,"hide_interface")},show_folders_or_settings:function(e,t){L.expand_interface_if_collapsed();var s=F.get_sidebar_container(e,!1,t);s.$el.addClass("expanded on"),s.$toggle.addClass("on"),L.stat.tvr.addClass("mt-"+e+"-showing"),"folders"===e&&!parseInt(L.pref.dock_folders_left)||F.update_sidebar_z_indexes(e,t)},hide_folders_or_settings:function(e,t,s){MTlocal.clean_tooltips();var r=F.get_sidebar_container(e,!1,t),a=r.$toggle;r.$otherToggle&&(a=a.add(r.$otherToggle)),r.$el.removeClass("expanded on"),a.removeClass("on"),L.stat.tvr.removeClass("mt-"+e+"-showing"),s||((s=F.return_another_panel_to_top(e,t))&&s!==e?F.update_sidebar_z_indexes(s,t):r.$el.removeClass("mt-top-panel"))},close_all_expanded:function(e){I.startT(arguments);for(var t=e.data("forpopup"),s=F.detached_window_available(!0),r={contextMenu:{name:"contextMenu",$el:L.stat.contextMenu,run:L.close_context_menu},contextMenuDetached:{name:"contextMenu",$el:!!s&&p.getLocalContextMenuEl(),run:!!s&&p.close_context_menu},folders:{name:"folders",$el:L.stat.mainMenu,run:L.hide_folders_or_settings,args:["folders","left"],closeException:function(e){return"mymtonoffswitch-dock_folders_left"===e.attr("id")||"folders"===L.stat.contextMenu.data("relatedto")}},settingsMenu:{name:"settingsMenu",$el:L.stat.settingsMenu,run:L.hide_folders_or_settings,args:["settings","right"],closeException:function(e){return!!L.doNotCloseSettingsMenu&&!(L.doNotCloseSettingsMenu=!1)}},picker:{name:"picker",$el:L.stat.styleComponents.find(".sp-container"),run:L.picker_method,args:["hide"]},units:{name:"units",$el:m.stat.cssUnitMenu,run:m.hide_unit_menu,args:[]},phpSyntax:{name:"phpSyntax",$el:L.stat.phpSyntax,run:u.hide_popdown_content,args:[L.stat.phpSyntax]},logicAnalysis:{name:"logicAnalysis",$el:L.stat.logicAnalysis,run:u.hide_popdown_content,args:[L.stat.logicAnalysis]}},a=Object.keys(r),o=0;o<a.length;o++){var n=r[a[o]],i=n.name,l=n.$el;!(I.isDomEl(l)&&l.hasClass("expanded"))||n.closeException&&n.closeException(e)||t===i||D.contains(l[0],e[0])||l[0].isSameNode(e[0])||I.isDomEl(e.closest(".ui-autocomplete"))||n.run.apply(this,n.args||[])}(e.hasClass("grid-control")||e.hasClass("pg-icon-grid"))&&m.hide_slider_set(),I.endT(arguments)},close_tooltip:function(e,t){e.attr("title",t.text()).removeAttr("aria-describedby"),t.remove()},reset_global_vars:function(){I.startT(arguments),L.selInFocusID="",L.menuSelInFocusID="",L.curSelCSS="#mt-no-element",L.intelli_css="#mt-no-element",I.endT(arguments)},update_global_vars:function(e,t){I.startT(arguments),L.selInFocusID=e.selectorID,L.menuSelInFocusID=L.selInFocusID.replace("opts","strk"),L.curSelCSS=I.custom_escape_quotes(e.selectorCode),L.curSec=e.sectionSlug,u.updatePrevFolder(e.sectionSlug),L.previous_selector=e.selectorCode,L.curSelEls=L.iframeEditing()?y.jquery_compat_sel_elements(L.curSelCSS):{},L.retargetSelector||L.draftSelector.atts.id||L.save_last_viewed_selector(L.selInFocusID),L.update_current_selector_controls(e,!1,t),L.update_cur_item_apply_state(e,"both"),I.endT(arguments)},prepareDisabledOrNotLoadingWarning:function(e){var t=L.is_cur("section",e.sectionSlug);if(!L.folderLoadingWarningDone&&t&&u.folderNotLoading(e.sectionSlug))P.log({short:TvrLang.folder_not_loading,long:"<p>"+TvrLang.folder_not_loading_long+'. <span class="link view-current-folder-options">View folder options</span></p><p><b>Help videos:</b></p><ul><li><a target="_blank" href="https://themeover.com/automatic-page-speed-optimisation/">Automatic page speed</a></li><li><a target="_blank" href="https://themeover.com/load-wordpress-css-on-specific-pages/">Customing folder conditions</a></li></ul>',type:"warning"}),L.folderLoadingWarningDone=!0;else{var s,r=[],a=-1;for(a in t&&L.is_dis(e.sectionM)&&(r[++a]=TvrLang.folder_disabled),L.is_cur("selector",e.selectorID)&&L.is_dis(e.selectorM)&&(r[++a]=TvrLang.selector_disabled),r)r.hasOwnProperty(a)&&(s={short:r[a],long:"<p>"+TvrLang.enable_with_icon+"</p>",type:"warning"},P.log(s),L.folderDisabledWarningDone=!0)}},update_cur_item_apply_state:function(e,t){if(!e)return!1;var s,r,a,o,n;"section"!==t&&"both"!==t||!L.is_cur("section",e.sectionSlug)||(s=L.is_dis(e.sectionM),r=u.folderNotLoading(e.sectionSlug),a=!u.folderIsEffectivelyGlobal(e.sectionSlug),L.stat.curSecTrailText.hasClass("item-disabled"),n=o="",s?o+=" item-disabled":n+=" item-disabled",a?o+=" item-conditional":n+=" item-conditional",r?o+=" item-not-loading":n+=" item-not-loading",o&&L.stat.curSecTrailText.addClass(o),n&&L.stat.curSecTrailText.removeClass(n)),e.selectorM&&("selector"===t||"both"===t)&&L.is_cur("selector",e.selectorID)&&e.selectorM&&(t=L.is_dis(e.selectorM),e=L.stat.curSelInput.hasClass("item-disabled"),t&&!e?L.stat.curSelInput.addClass("item-disabled"):!t&&e&&L.stat.curSelInput.removeClass("item-disabled"))},save_last_viewed_selector:function(e){I.updateObject(L.uiData,["non_section","meta","last_viewed_selector"],e),L.dontLogSelectorChange||P.silent_save("",[{trail:["non_section","meta","last_viewed_selector"],action:"replace",data:e}])},menu_object:function(e){return D("#"+e.replace("opts","strk"))},section_slug:function(e){if(!e)return!1;e=e.match(/(?:strk|opts)-([^-]+)-/);return!!e&&e[1]},is_cur:function(e,t){if(I.hasValue(L.selInFocusID)){if("section"==e){if(t==L.section_slug(L.selInFocusID))return!0}else if("selector"==e&&t==L.selInFocusID)return!0;return!1}},viewCurrentFolderLoading:function(){var e=L.stat.mainMenuInner.find("li.section-tag.in-focus");e.length&&L.toggle_folder_more_options(e.find(".toggle-folder-more-options"))},is_dis:function(e){return e.hasClass("item-disabled")},allowed_action:function(e,t){var s=!1;return!L.trial||("Edit Sel"===t&&I.isDomEl(e.selectorM.hasClass(".trial-disabled"))&&(s=!0),!(s="Add Sel"===t&&15<=L.totalSels?!0:s)||(alert(L.trialNotice),!1))},sel_trail:function(e){var t=/\s?>\s?|\s?\+(?![^(]*\))\s?|\s?~\s?|\s/g,s=I.get_all_matches(e,t,0);return{pieces:e.split(t),splitMatches:s}},load_css_ref:function(e){I.startT(arguments),L.show_dialog(e),I.endT(arguments)},show_google_fonts_field:function(e){e.is(":visible")?L.show_dialog(e.find(".g-font")):(e.removeClass("hidden"),L.adjust_scroll_buttons(L.get_pg_meta(),"style"))},hide_google_fonts_field:function(e,t){L.gFontTarget.val("").prop("val",""),t.addClass("hidden"),L.adjust_scroll_buttons(L.get_pg_meta(),"style")},insert_google_font:function(e){L.close_dialog(),L.gFontTarget.val(e).focus(),L.post_edit(L.gFontTarget),P.ajax_save_settings({$property:L.gFontTarget})},launch_img_uploader:function(s){wp.media.editor.send.attachment=function(e,t){t=(e.size?t.sizes[e.size]:t).url;L.update_bg_image(s,t)},wp.media.editor.open("wpMediaFakePostID")},update_bg_image:function(e,t){e=L.get_meta(e,"property").property.find(".property-input");t=I.root_rel_if_local(t,!0),e.val(t='url("'+t+'")'),L.adjust_comp_span(e,"after"),I.scroll_input_end(e),P.ajax_save_settings({$property:e})},clear_bg_image:function(e){I.startT(arguments),L.update_bg_image(e,""),I.endT(arguments)},get_animation_name:function(e){return e.groupTab.find("input.property-input").val()},refresh_event_binding:function(){L.iframeEditing()&&y.stat.win.MT_Events_Manager&&y.stat.win.MT_Events_Manager.refresh_event_binding()},user_play:function(e,t,s,r){e=e.animationConfig;L.iframeEditing()&&e.flashCSSRules&&e.animationName&&y.trigger_animation(e,r)},mt_scroll:{style:{offsets:[],rightPositions:[],rightPosIndex:-1},responsive:{offsets:[],rightPositions:[],rightPosIndex:-1},gridcolumns:{offsets:[],rightPositions:[],rightPosIndex:-1},gridrows:{offsets:[],rightPositions:[],rightPosIndex:-1}},scroll_row:function(e){var t,s=e.data("type");if("style"===s||"gridcolumns"===s||"gridrows"===s){var r=L.get_pg_meta();if(!r)return!1;t="style"===s?(o=r.groupTab,r.groupTab.find(".pg-inner")):(o=r.group.find(".tab-control-"+L.pref.grid_focus+"."+s).find(".mt-variable-line")).find(".mt-vl-inner")}else"responsive"===s&&(o=L.stat.res.find(".query-tabs-wrap"),t=L.stat.res.find(".query-tabs"));if(t){r=L.get_row_excess(o,t,s);if(!r)return!1;var a,o=o.width(),n=Math.abs(parseInt(t.css("marginLeft")));if(e.hasClass("mt-scroll-left"))a=L.mt_scroll[s].rightPositions[L.mt_scroll[s].rightPosIndex-1],I.isDefined(a)?(L.mt_scroll[s].rightPositions.splice(L.mt_scroll[s].rightPosIndex,1),L.mt_scroll[s].rightPosIndex--):(a=0,L.mt_scroll[s].rightPositions=[],L.mt_scroll[s].rightPosIndex=-1);else{for(var i=n+o,l=r<i?r:i,c=L.mt_scroll[s].offsets,d=0;d<c.length;d++)if(l<c[d]){var _=c[d-1],u=c[d],l=n<_&&i<u?_:u;break}if(n===l)return!1;L.mt_scroll[s].rightPositions.push(l),L.mt_scroll[s].rightPosIndex++,a=l}t.css("marginLeft",(a*=-1)+"px")}},adjust_scroll_buttons:function(e,t){if(I.startT(arguments),!e&&"responsive"!==t)return!1;var s,r,a,o,n=!1,i=!1;switch(t){case"style":r=(s=L.get_group(e)).find(".pg-inner"),a=e.selector.find("li.scroll-lr-buttons-"+t),n="code"===e.groupSlug||"grid"===e.groupSlug,i="grid"===e.groupSlug;break;case"responsive":s=L.stat.res.find(".query-tabs-wrap"),r=L.stat.res.find(".query-tabs"),a=L.stat.res.find("div.scroll-lr-buttons");break;case"gridcolumns":case"gridrows":r=(s=e.group.find(".tab-control-"+L.pref.grid_focus+"."+t).find(".mt-variable-line")).find(".mt-vl-inner"),a=e.selector.find("li.scroll-lr-buttons-"+t)}if(!r)return!1;o=L.get_row_excess(s,r,t,"checkShow"),s.removeClass("pending-overflow-check"),o&&!n?(a.addClass("buttons-showing"),s.addClass("hor-scroll-needed"),L.mt_scroll[t].rightPositions=[]):(L.mt_scroll[t].rightPositions=[],L.mt_scroll[t].rightPosIndex=-1,r.css("marginLeft","0px"),a.removeClass("buttons-showing"),s.removeClass("hor-scroll-needed")),i&&L.adjust_grid_line_scroll_buttons(e),I.endT(arguments)},adjust_grid_line_scroll_buttons:function(e){L.adjust_scroll_buttons(e,"gridcolumns"),L.adjust_scroll_buttons(e,"gridrows")},get_row_excess:function(e,t,s,r){I.startT(arguments);var a=e.width(),o=0,n=[],i=e.hasClass("property-grid");return(i?t.children().filter(".tab-control-"+L.pref.grid_focus):t.children()).each(function(e){var t=D(this);t.is(":visible")&&parseInt(t.css("opacity"))&&(o+=t.outerWidth(!0),n.push(o))}),(e.hasClass("property-border")||i)&&(o/=2),0<o-a&&(o+=50),a=o-a,L.mt_scroll[s].offsets=n,I.endT(arguments),0<a&&a},input_icon_toggle:function(e,t,s){I.startT(arguments);var r,a,o,n,i,l,c=e,d=e.attr("data-input-type"),_=e.attr("data-input-level"),u="pgtab"===_?"group":_,p=L.title(e),g=e.hasClass("active")?"":1,f=!1,m=d+"-tracker",v=!1,h={domDepth:_,maxDepth:"selector",clean:{},cleanMaxDepth:"selector"},b=!1,y="disabled"===d&&"tab"===_?L.context_menu_data.mq_key:L.get_mq_focus(),S=L.get_input_stems(y),w=S.mq,S=S.imp;if("important"===d){var x,T="tvr_mcth[non_section][important]"+S+"["+(x=L.get_meta(e,"property")).sectionSlug+"]["+x.selectorSlug+"]["+x.groupSlug+"]["+x.propertySlug+"]",k=I.get_name_attr_index(x.property.find("input.property-input").attr("name"));!1!==k&&(T+="["+k+"]"),h.mq_key=y,h.recurse_key=["important"],h.clean.selector=[],v=!0}else if("disabled"===d){var C,v=!0;if(h.itemWasDisabled=_,!(x=L.get_meta_for_context(e,u)))return;"section"===_?T=(j=L.disabled_quick_edit(x.sectionM,_,x)).find("input.section-data-label").attr("name").replace("[label]","["+d+"]"):"selector"===_?(T=(j=L.disabled_quick_edit(x.selectorM,_,x)).find("input.selector-label").attr("name").replace(/\[label\]$/,"["+d+"]"),h.clean.selector=[[d]],L.maybe_save_draft_selector_before_action(x,"selector","disable")):"tab"===_?(j=L.stat.res.find(".mq-tab-"+y),m+="-"+y,T=w+"["+x.sectionSlug+"]["+x.selectorSlug+"][tab]["+d+"]",c=x.selectorM.find("span.disabled-responsive-tabs"),h.domDepth="selector",h.mq_key=y,h.onlyRecurse="all-devices"!==y,h.incRecurse=h.onlyRecurse,h.recurse_key=["m_query"],h.clean.selector=[["tab"],[d]]):"subgroup"===_||"pgtab"===_?(j=e.closest("span.quick-opts-wrap"),S=(C="pgtab"===_)&&e.data("tab-group"),k=C?"pgtab_"+d:"pg_"+d,u=C?e.data("tab-group"):x.subgroupSlug,T=w+"["+x.sectionSlug+"]["+x.selectorSlug+"]["+k+"]["+u+"]",h.domDepth="group",h.mq_key=y,h.onlyRecurse="all-devices"!==y,h.incRecurse=h.onlyRecurse,h.recurse_key=["m_query"],h.clean.selector=[[k],[u]],(f=L.maybe_add_nth_index_filter(C,S,x,e,h.clean.selector))&&(T+="["+f+"]"),C&&(_="group")):"script"===_&&(j=e.closest("div.item-row"),T="tvr_preferences[enq_js]["+I.convert_to_param(j.find(".script-name").text(),"")+"][disabled]")}else if("chained"===d)v=!0,x=L.get_meta(e,"subgroup"),g&&(f=L.get_subgroup_or_tabgroup(x,"inputs"),C=(a=!!I.isDomEl(L.inputWaitingObj)&&L.inputWaitingObj)?a.val():"",o=I.isDefined(C),D.fn.MTreverse=[].reverse,f.MTreverse().each(function(e){var t=D(this),s=t.val();o&&t.attr("name")===a.attr("name")&&(n=a),I.isDefined(s)&&(r=t)}),r&&(C=void 0,f=(n=n||r).closest(".property-tag").find(".css_unit-tracker"),I.isDomEl(f)&&(C=n.closest(".property-tag").find(".css_unit-tracker").val()),L.sync_fields(n,x,C))),T=w+"["+x.sectionSlug+"]["+x.selectorSlug+"][pg_"+d+"]["+x.subgroupSlug+"]",h.domDepth="group",h.mq_key=y,h.recurse_key=["m_query"],h.clean.selector=[["pg_"+d],[x.subgroupSlug]];else if("flexitem"===d||"griditem"===d){var j=e.closest("div.property-fields"),b=!0,w="tvr_mcth["+(x=L.get_meta(j.find("div.sub-label"),"group")).sectionSlug+"]["+x.selectorSlug+"]";if(T=w+"[pg_"+d+"]",h.domDepth="group",h.mq_key=y,h.recurse_key=["m_query"],h.clean.selector=[["pg_"+d]],"griditem"===d){y={};return E.fill_object_from_name(y,T,g),E.fill_object_from_name(y,w+"[nth_item]",g?0:1),P.quick_save_data(!1,y),"griditems"!==L.get_grid_focus()&&(L.pref.grid_focus="griditems"),L.trigger_pg_icon_click("grid"),!1}}g?(M='<input class="input-toggle-tracker '+m+'" type="hidden" name="'+T+'" value="1" />',e.addClass("active"),i="add",e.attr("data-neg"),"disabled"===d&&"tab"===_?c.append(M):c.before(M),"disabled"===d&&(j.addClass("item-disabled"),L.update_cur_item_apply_state(x,_)),"flexitem"!==d&&"griditem"!==d||j.add(L.stat.grid).addClass("show-single-"+d)):(e.removeClass("active"),i="remove",e.attr("data-pos"),(l=c.siblings("."+m)).val(""),"disabled"===d&&(j.removeClass("item-disabled"),L.update_cur_item_apply_state(x,_)),"flexitem"!==d&&"griditem"!==d||j.add(L.stat.grid).removeClass("show-single-"+d));var M=P.h_i_class(_,x),c=e.attr("class"),m=!1,j=!1;"important"===d&&(c+=" lg-icon",j="",m=!!L.chain_is_on(x)&&x.subgroupH+" "+TvrLang.fields_sync,m&&!t&&L.sync_important(x,i)),s||(h.M=x,"chained"!==d&&(h.mtData={},E.fill_object_from_name(h.mtData,T,g)),"script"===_?D.extend(!0,L.pref,h.mtData):(t&&(h.return="mtData"),h=E.dom_to_data(h))),g||l.remove(),s||t||(b||(h=P.user_action(h,{items:[_],val:p,valTT:m,M:x,pathTT:!0,icon:[{icon:M},{icon:c,iconC:j}]})),v&&F.editor_and_gui()&&x&&x.selector&&O.gui_to_editor(!1,x),P.ajax_save_settings({settings:h})),I.endT(arguments)},get_input_stems:function(e){var t="tvr_mcth",s="";return"all-devices"!==e&&(t+="[non_section][m_query]["+e+"]",s="[m_query]["+e+"]"),{mq:t,imp:s}},maybe_add_nth_index_filter:function(e,t,s,r,a){r=e?s.group.find(".property-tag.tab-control-"+t).first():r.closest(".subgroup-tag").next(".property-tag");if(r.hasClass("has-variable-line"))return!1;r=r.find("input.property-input"),r=!!I.isDomEl(r)&&I.get_name_attr_index(r.attr("name"));return!1!==r&&a.push(["value"],[r]),r},disabled_quick_edit:function(e,t,s){return"section"===t&&L.is_cur("section",s.sectionSlug)&&(e=e.add(L.stat.curSecTrailText)),e="selector"===t&&L.is_cur("selector",s.selectorID)?e.add("#sel-in-focus"):e},tt_config:function(i){return{position:{my:"center top",at:"center bottom+10",collision:"flipfit"},hide:!1,show:{effect:"none",duration:0,delay:L.tooltipDelay},create:function(e,t){},open:function(e,t){I.startT(arguments),L.itemIsBeingDragged&&MTlocal.clean_tooltips();var s=L.get_tt(t),r=i.get_tt_trigger(e,this),a=r.data("dyn-tt-root"),o=!!a&&D("#"+a);s.data("mt-tt-trigger",a?o:r),a&&(n=(n=o.hasClass("on")?o.data("neg"):o.data("pos"))||o.attr("title"),s.html(n));var n=s.find(".ui-tooltip-content").html();n&&(n=I.regular_escaped_to_non_escaped(n.replace(/&amp;/g,"&").replace(/\n/g,"<br />")),s.html(n));n=s.parent();I.isDomEl(n)&&"body"!==n[0].tagName.toLowerCase()&&(r=r.offset(),s.appendTo("body"),s.css({top:r.top+40+"px",left:r.left-40+"px"})),I.endT(arguments)},close:function(e,t){L.tt=!1,L.tt_trigger={}}}},title:function(e){var t=e.data("ui-tooltip-title");return t||e.attr("title")},get_tt:function(e){return L.tt=e.tooltip},refresh_tt:function(e,s,r){I.startT(arguments),e.each(function(e){var t=D(this);"native"==L.tooltipDelay||!L.tt||r&&!t.is(r)?(t.attr("title",s),r&&r.data("dyn-tt-root")&&L.update_tt(L.tt,s,t)):L.update_tt(L.tt,s,t)}),I.endT(arguments)},update_tt:function(e,t,s){if(!I.isDomEl(e)||!I.isDomEl(s)||!e.data("mt-tt-trigger").is(s))return!1;s=e.find(".ui-tooltip-content");(s=I.isDomEl(s)?s:e).html(t.replace("\n","<br />")),L.tt_trigger.data("ui-tooltip-title",t)},parse_editor_selectors:function(e){var i={},l=0,t=parseInt(L.pref.allow_scss)?"scss":"css";if(e){t=L.parse_scss_or_css(e,t);if(!t)return!1;t.forEach("ruleset",function(e){var t=e.content;++l;for(var s=0;s<t.length;s++){var r=t[s];"block"===r.type?t.splice(s,1):"selector"===r.type&&0}var a=e.end.line-1,e=e.toString().trim();if(e.match(/\*/)){for(var o=e.split(","),n=o.length-1;0<=n;n--)"*"===o[n].trim()&&o.splice(n,1);e=o.join(",")}e&&(i["hand_coded_css-"+l]={type:"hand_coded_css",sName:e,code:e,line:a})})}return i},get_all_selector_code:function(e,t){I.startT(arguments);var s,r,a=I.checkObject(L.uiData.non_section,["meta","fullCodeSelectors"]),o=a?D.extend(!0,{},a):{};for(s in L.uiData)if(L.uiData.hasOwnProperty(s)&&!("non_section"==s||t&&u.folderNotLoading(s))&&L.uiData.hasOwnProperty(s))for(var n in L.uiData[s])L.uiData[s].hasOwnProperty(n)&&"this"!=n&&s+"_"+n!==L.ignoreSelector&&(!L.uiData[s][n]||!L.uiData[s][n].label||e&&(L.uiData[s][n].isDraft||L.uiData[s][n].isDraftRetarget)||(r=L.uiData[s][n].label.split("|"),o["strk-"+s+"-"+n]={fName:L.uiData[s].this.label,sName:r[0],code:r[1]}));return I.endT(arguments),o},get_dom_item:function(e,t,s,r,a,o){var n,i=a?D.extend(!0,{},e,a):e,s="menu"===s?"strk":"opts";switch(t){case"section":case"selector":case"group":n=i.trail.item;break;case"subgroup":case"property":var l=I.prop_to_cssf(e.property_key),c=I.checkObject(TvrMT.data.prog.lh,[l,"sub_slug"]),l="subgroup"===t?"subgroup":e.property_key;if(!(c="animation"===e.group_key?"animation":c))return!1;n=i.trail.root_to_group.concat([c,l,e.recurse.mq_key])}return s="#"+s+"-"+n.join("-"),o=o?o.find(s):D(s),!!I.isDomEl(o)&&(r?{$item:o,id:s,M:L.get_meta(o,t)}:o)},get_selector_in_focus:function(){if(L.selInFocusID){var e=D("#"+L.selInFocusID);if(I.isDomEl(e,!0))return L.get_meta(e,"selector")}return!1},get_context_from_container:function(e){return e.parent().data("context")},get_meta_for_context:function(e,t,s){switch(s=s||L.get_context_from_container(e)){case void 0:case"folders-menu":return L.get_meta(e,t);case"popup-form":case"folder-popup":return L.context_menu_data.M;case"current-item":return L.get_selector_in_focus()}return!1},get_meta:function(e,t){I.startT(arguments),L.meta={};var s,r,a=["stub","section","selector","group","subgroup","property"];for(s in a)a.hasOwnProperty(s)&&a[s]==t&&(r=(e.attr("class")&&0<=e.attr("class").indexOf(t+"-tag")?e:e.closest("."+t+"-tag")).attr("id").split("-"));var o,n,i,l="";for(o in r)r.hasOwnProperty(o)&&0!=o&&6!=o&&7!=o&&(t=a[o],l+="-"+r[o],"property"==t||"subgroup"==t?(n="property"==t?l+"-"+r[6]:l+"-subgroup-"+r[6],"all"==r[6]&&(r[6]+="-devices",n+="-devices"),L.meta.tabSlug=r[6],L.meta[t]=D("#opts"+n),L.meta.pgTabControlSlug=L.meta[t].data("pgtabcontol")):L.meta[t]=D("#opts"+l),n=r[o],L.meta[t+"Slug"]=n,"section"==t?(L.meta[t+"M"]=D("#strk"+l),L.meta[t+"H"]=L.meta.sectionM.find(".section-data-label").val(),L.meta[t+"ID"]="opts-"+L.meta.sectionSlug,L.meta[t+"MID"]="strk-"+L.meta.sectionSlug):"selector"==t?(L.meta[t+"M"]=D("#strk"+l),i=L.meta.selectorM.find(".selector-label").val().split("|"),L.meta[t+"H"]=i[0],L.meta[t+"Code"]=i[1],L.meta[t+"ID"]="opts-"+L.meta.sectionSlug+"-"+L.meta.selectorSlug,L.meta[t+"MID"]="strk-"+L.meta.sectionSlug+"-"+L.meta.selectorSlug):"group"==t?(L.meta[t+"ID"]="opts-"+L.meta.sectionSlug+"-"+L.meta.selectorSlug+"-"+L.meta.groupSlug,i=L.get_mq_focus(),L.meta[t+"Tab"]=L.meta[t].find("div.property-fields-"+i),L.meta[t+"H"]=L.stat.css_icons.find("ul.styling-option-icons").find(".pg-icon-"+L.meta.groupSlug).attr("title"),"animation"==n||"transition"==n?(L.meta.event=L.meta[t+"Tab"].find("input.mt-event-input").first().val(),L.meta.eventKey=L.meta.event?I.convert_to_param(L.meta.event,""):"",L.meta.eventValue=L.meta[t+"Tab"].find("input.mt-event-value-input").first().val()):L.meta.event=L.meta.eventKey=L.meta.eventValue=""):"subgroup"==t||"property"==t&&(L.meta.subgroupH=L.meta.subgroup.find("span.subgroup-label").text(),L.meta[t+"H"]=L.meta[t].find("span.option-label").text()));return L.meta.tabSlug||(L.meta.tabSlug=L.get_mq_focus()),L.meta.tabH=L.get_tab_name(L.meta.tabSlug),I.endT(arguments),L.meta},get_pg_meta:function(e){if(!L.selInFocusID||!L.pref.pg_focus)return!1;var t=D("#"+L.selInFocusID);if(!I.isDomEl(t,!0))return!1;t=e?t.find("li.group-tag-"+L.pref.pg_focus).find("group-row-"+e):t.find("li.group-tag-"+L.pref.pg_focus);return!!I.isDomEl(t,!0)&&L.get_meta(t,"group")},colorpicker_bind:function(e,t){I.startT(arguments);D("<div></div>");var s=!1,r=t?e:e.find("input.color:not(.bound)");r.each(function(){s=!0;var e=D(this),t=e.closest(".property-tag").attr("id");e.mtspectrum({appendTo:L.stat.styleComponents,belongsTo:t,containerClassName:"picker-belongs-to-"+t,showAlpha:!0,showInput:!1,allowEmpty:!0,showInitial:!0,preferredFormat:"rgb",showButtons:!1,showSelectionPalette:!0,localStorageKey:"shared_palette",maxSelectionSize:9,hide:function(e){L.$pickerContainer.draggable("destroy"),L.$pickerContainer.removeClass("expanded")},show:function(e){I.startT(arguments);var t=L.inputWaitingObj=D(this),s=L.get_meta(t,"property"),r=".picker-belongs-to-"+s.property.attr("id"),a=L.$pickerContainer=L.stat.styleComponents.find(r);a.hasClass("ui-draggable")||a.draggable({cancel:".combo-arrow, input, .palette-tile, .sp-palette-row-initial, .ui-menu, .palette-button, .refresh-icon, .sp-alpha, .sp-alpha-inner, .sp-alpha-handle"}),a.hasClass("extra-fields-added")||(a.addClass("extra-fields-added").find(".sp-mt-inputs").prepend('<input type="number" min="0" max="1" step="0.1" class="sp-input-opacity sp-input">'),a.find(".sp-clear").on("click.mt",function(e){L.clear_spectrum_inputs(s,!0)})),a.addClass("expanded").data("popupName","picker"),L.draw_palette(a);var o=a.css(["top","left"]),r=parseInt(o.top),o=parseInt(o.left),o=L.pref.dock_styles_left?{top:r+10+"px",left:"0px"}:{top:"-1px",left:o+40+"px"};a.css(o),t.val()?L.maybe_set_variable_color(t.val(),t,a.find(".sp-input-var"))||L.update_spectrum_inputs(e,t,{},!0):(a=s.property.find("span.comp-style").find("span").attr("style"))&&("transparent"!=(a=a.split("background-color:"))[1]&&"rgba(0, 0, 0, 0)"!=a[1]||(a[1]="rgba(0, 0, 0, 1)"),L.update_spectrum(a[1],t,{},!0,!0),t.val(""),s.property.find(".sp-preview-inner").css("background-color","transparent").addClass("sp-clear-display")),I.endT(arguments)},move:function(e){L.color_tile_selected&&I.isDomEl(L.color_tile_selected,!0)&&(L.color_tile_selected.removeClass("tile-selected"),L.color_tile_selected=!1,L.$palette.find(".mt-save-color").addClass("show"),L.$palette.find(".mt-remove-color").removeClass("show")),L.update_spectrum_inputs(e,D(this),{},!0),L.set_input_timer(10)}}).on("dragstart.spectrum",function(e,t){L.colorPickerDragging=!0,L.get_local_window_function("maybe_hide_mt_highlight")()}).on("dragstop.spectrum",function(e,t){L.colorPickerDragging=!1,L.get_local_window_function("maybe_reinstate_mt_highlight")()}).addClass("bound")}),s&&t&&r.mtspectrum("show"),I.endT(arguments)},format_autocomplete_id:function(e,t){var s=e.closest(".property-tag"),r=s.attr("id"),a=t+"-belongs-to-"+r,t=s.hasClass("tab-control-gridtemplate"),s=s.hasClass("tab-control-gridauto");return(t||s)&&(a+="-input-nth-index-"+(e.closest(".tvr-input-wrap").index()+1),t&&(a+="-input-filter-"+e.closest(".vl-item").data("input-filter"))),{containerID:a,fieldID:r}},get_related_meta:function(e,t,s){var r,a,o,n,i,l=e+"-belongs-to";return!s&&t.hasClass("picker"===e?"sp-container":"ui-autocomplete")?(o=t.data(l),n=t.attr("id"),i=t,s=L.get_meta(D("#"+o),"property"),a=".tvr-input-wrap",(l=n.split(/(?:-input-nth-index-|-input-filter-)/g))[1]&&(a+=":nth-child("+l[1]+")"),l[2]&&(a+=" ."+l[2]),a=s.property.find(a).find("input.property-input"),"combo"===e&&i.siblings(".sp-input-var").length&&(r=i.siblings(".sp-input-var"))):(s=s||L.get_meta(t,"property"),a=("picker"===e?s.property:t.parent()).find("input.property-input"),o=(e=L.format_autocomplete_id(a,e)).fieldID,n=e.containerID,i=D("#"+n)),{$input:a,$colorVarInput:r,$container:i,containerID:n,fieldID:o,M:s}},draw_palette:function(n){var e=L.get_meta(L.inputWaitingObj,"property"),i=this.get_related_meta("picker",!1,e),e=(n=n||i.$container).find("ul.mt-picker-palette");I.isDomEl(e)?e.replaceWith(L.color_palette()):n.prepend(L.color_palette()),L.$palette=n.find("ul.mt-picker-palette"),n.find("ul.mt-picker-palette").on("click.mt-spectrum","span.full-palette-toggle, span.palette-button, span.refresh-icon, span.tile-color",function(e){var t,s,r,a=D(e.target),o=i.$input;a.hasClass("full-palette-toggle")?L.toggle_feature(a):a.hasClass("tile-color")?(L.$palette.find("span.tile-selected").removeClass("tile-selected"),s=a.data("color"),L.maybe_set_variable_color(s,o,n.find(".sp-input-var"))||L.update_spectrum(s,o,{},!0),t=a.data("id"),P.ajax_save_settings({context:"redrawPalette",$property:o}),e=(a=L.$palette.find("span."+t)).parent(),a.addClass("tile-selected"),L.color_tile_selected=a,t=(r=L.$palette.find("div.saved-colors-wrap")).find("span.mt-save-color"),r=r.find("span.mt-remove-color"),e.hasClass("saved-tile")?(t.removeClass("show"),r.addClass("show")):(t.addClass("show"),r.removeClass("show"))):a.hasClass("palette-button")?(r=s=n.find(".sp-input-var").val()||o.mtspectrum("get").toRgbString(),o=!1,a.hasClass("mt-remove-color")&&(r=!1,o=s=L.$palette.find("span.tile-selected").data("color")),E.splice_sug_val(r,o,"color","saved",{redrawPalette:1,save:!0})):a.hasClass("refresh-icon")&&E.refresh_sug_values({specific:"color",$resample:a})})},color_palette:function(){var e=D("#mt-picker-palette").clone().removeAttr("id"),t=e.find("li.view-full-palette"),s=L.pref.my_props.sug_values.color,r=s.recent,a=s.saved,o=s.sampled;return L.pref.full_color_palette&&(s=t.find("span.full-palette-toggle")).addClass("on").attr("title",s.data("neg")),e.find("ul.mt-picker-palette").html(D(L.color_palette_tiles("mini","recent",L.numMiniTiles-1,r)).add(t)),e.find("ul.recent-full-palette").html(L.color_palette_tiles("full","recent",L.numMiniTiles,r)),e.find("ul.saved-full-palette").html(L.color_palette_tiles("full","saved",L.numSavedTiles,a)),e.find("ul.site-full-palette").html(L.color_palette_tiles("full","site",L.numSiteTiles,o)),e},isVariableTile:function(e){var t="";return e&&(-1<e.indexOf("var(")?t="var":-1<e.indexOf("$")&&(t="$")),t},color_palette_tiles:function(e,t,s,r){for(var a="",o=0;o<s;++o){var n=r[o],i=n&&-1<n.indexOf("$")?E.get_variable_value(n,"scss"):n,l=L.pref.color_as_hex?I.maybe_to_hex(n):n,c=n?'title="'+l+'"':"",d=n?'style="background-color:'+i+'"':"",_=n?"has-color":"no-color",l=e+"-"+t+"-"+o,i=L.isVariableTile(n);a+='<li class="'+e+"-tile "+t+"-tile  palette-tile "+_+'">'+(n?'<span class="tile-color '+l+'" data-color="'+n+'" data-id="'+l+'" '+d+" "+c+">"+i+"</span>":"")+"</li>"}return a},picker_method:function(e){I.startT(arguments),I.isDomEl(L.inputWaitingObj)&&("hide"===e?L.inputWaitingObj.mtspectrum("hide"):"clickpick"===e&&L.get_meta(L.inputWaitingObj,"property").property.find(".sp-container").trigger("mouseup")),I.endT(arguments)},update_spectrum:function(e,t,s,r,a){I.startT(arguments);var o=tinycolor(e),n=o.toRgb();tinycolor(n).isValid()&&(t.mtspectrum("set",n),L.update_spectrum_inputs(o,t,s,r,a),a||L.adjust_comp_span(t,"after"),I.endT(arguments))},update_spectrum_inputs:function(e,t,s,r,a){var o;I.startT(arguments),e?(o=e.toRgbString(),a||t.val(o).css("background-color",o).attr("value",o),(o=this.get_related_meta("picker",t).$container).find(".sp-input-hex").not(s).val(e.toHexString()),o.find(".sp-input-rgb").not(s).val(e.toRgbString()),o.find(".sp-input-hsl").not(s).val(e.toHslString()),o.find(".sp-input-opacity").not(s).val(e.toRgb().a),o.find(".sp-input-var").not(s).val(""),r&&!a&&L.maybe_sync_fields(t),I.isDomEl(s)&&s.focus(),I.endT(arguments)):t.val("")},clear_spectrum_inputs:function(e,t){I.startT(arguments);var s=e.property.find("input.color");e.property.find("input.sp-input, input.color").val("").end().find("div.sp-alpha-inner, div.sp-preview-inner").css("background-color","transparent").end().find("div.sp-preview-inner").addClass("sp-clear-display"),L.adjust_comp_span(s,"after"),t&&(L.picker_method("hide"),L.maybe_sync_fields(s)),I.endT(arguments)},update_count:function(e,t,s,r,a){I.startT(arguments),I.hasValue(a)||(a=0);var o,n,i,l=parseInt(e.attr("rel"));"add"==t?o=l+parseInt(s):"subtract"==t&&(o=l-parseInt(s)),e.attr("rel",o),"section"!=r&&(0==l&&e.after(' <span class="folder-count-wrap count-wrap">(<span class="folder-state-count state-count"></span>)</span>'),0==o?e.next("span").remove():e.next("span").find(".state-count").text(parseInt(o))),"section"==r?(i=D("#total-sec-count"),n=parseInt(i.text()),l<o?(L.totalSecs=parseInt(n+s),i.text(L.totalSecs),L.totalSels=L.totalSels+parseInt(a)):(L.totalSecs=parseInt(n-s),i.text(L.totalSecs),L.totalSels=L.totalSels-parseInt(a)),D("#total-sel-count").text(parseInt(L.totalSels))):"selector"==r&&(n=D("#total-sel-count"),i=parseInt(n.text()),L.totalSels=l<o?parseInt(i+s):parseInt(i-s),n.text(L.totalSels)),L.toggle_enabled_buttons(),I.endT(arguments)},com_data_finished_loading:function(e,t){I.startT(arguments),e.find("img.ajax-loader").remove(),P.update_prog_indicator("minus",t,TvrLang.load_style_opt),I.endT(arguments)},ajax_load_revisions_table:function(){I.startT(arguments),P.update_prog_indicator("plus",TvrLang.load_revisions_table,!1,!0),D.ajax({type:"GET",url:L.ajaxUrl,data:"mt_action=get_revisions",async:!0,timeout:L.tOut,error:function(e,t){I.startT(arguments),P.update_prog_indicator("minus",{short:TvrLang.load_revisions_table_failed,long:"<p>"+L.handle_ajax_error(e,t)+"</p>"},TvrLang.load_revisions_table),I.endT(arguments)},success:function(e){I.startT(arguments);var t=D(e).html();D("#revision-area").html(t),P.update_prog_indicator("minus",!1,TvrLang.load_revisions_table),I.endT(arguments)},complete:function(){I.startT(arguments)}}),I.endT(arguments)},update_wizard_html:function(e){D("#refresh-html-pane").addClass("active"),I.action_after_timeout("wizard_html_expensive",3,{item:function(e){var t;I.startT("update_wizard_html_inner"),e.bindOnly?L.insert_formatted_html_content({data:""},e):(y.dom,t=y.stat.html[0].outerHTML,y.maybe_refresh_front_N_index(!0),I.ww.assignTask({taskName:"formatHTML",terminateCurrent:!0,terminateOnCompletion:!0,html:t,hasPseudo:y.hasPseudo,mainThreadData:e,custom:L.custom_wizard_html_replace(),cb:{ref:"TvrUi",funcName:"insert_formatted_html_content"}})),I.endT("update_wizard_html_inner")},args:[e]})},insert_formatted_html_content:function(e,t){O.update_arbitrary_editor({context:"wizardHTML",editorID:"wizard_inspector_html",data:e.html,mode:"customhtml",filterClass:"wizard_inspector_html",containerClass:".css-code-wrap",dontSetHeight:!0,readOnly:!0,fontSize:"13px",noValidation:!0,directContent:e.html,dontScrollHTML:t.dontScrollHTML,clicked:t.clicked,active_selector:t.css,select_config:t,existingSelCSS:t.existingSelCSS,intelli_css:t.intelli_css,active_css:t.active_css,doNotFocusEditor:t.doNotFocusEditor,maintainCurrentLine:t.maintainCurrentLine,bindOnly:t.bindOnly}),D("#refresh-html-pane").removeClass("active")},builder_html_atts_regex:function(e,t,s){t="(?:(?:"+e.join("|")+")|(?:(?:"+t.join("|")+')-(?:[a-zA-Z0-9-]+?)))="(?:[\\s\\S]*?)"';return s&&(t+='|(?:\\s?class="(?:'+(s=s.join("|"))+')?"|'+s+")"),new RegExp(t,"g")},custom_wizard_html_replace:function(){var e={pattern:!1,repl:""},t=g.get_active_builder();return t&&g.get(t).runIfExists("wizardHtmlReplace",[e]),e},update_wizard_html_scroll:function(e,t){var s="wizard_inspector_html",t=O.getAceRowForTriggerElement(e,t);return O.go_to_line_in_editor(t,O.eds[s],s,e,!0)},refresh_html_pane:function(){var e=L.pref.show_code_editor?O.get_code_editor_selector():L.curSelCSS,t=O.eds.wizard_inspector_html;t&&(t.getCursorPosition().row,L.maybeUpdateInspectorPanels({updateHTML:1,active_css:e,dontScrollHTML:!0,updateVisEditor:1}))},get_breadcrumb_node:function(e,t){var s=L.breadcrumbNodesCache,r=e<0;return(r?s.descendentNodes:s.nodes)[r?-1*e-1:e].siblingsIncSelf[t]},breadcrumb_clicked:function(e,t){if((e=e.closest(".mt-breadcrumb")).hasClass("active-crumb"))return!1;var s=L.stat.breadcrumbs.find(".active-crumb"),r=e.hasClass("full-crumb-item"),a=!r,o=e.data(),n=parseInt(o.level),i=parseInt(o.eq),l=L.get_breadcrumb_node(n,i),c=l.$el;s.removeClass("active-crumb"),L.stat.breadcrumbs.find('.mt-breadcrumb[data-level="'+n+'"]').addClass("active-crumb");i=parseInt(s.data("level"));void 0===L.breadcrumbNodesCache.nestedElLevelAdjust&&(L.breadcrumbNodesCache.nestedElLevelAdjust=0),L.breadcrumbNodesCache.nestedElLevelAdjust+=n-i,L.dom_nav_option_used(c,{e:t,node:l,isNested:a,dontReloadBreadcrumbs:r,level:n,$clicked:e,$prevActiveCrumb:s,pseudoSelected:o.pseudotype})},update_breadcrumbs_nested_html:function(e,t,s,r,a){var o=s.level,n=0===o,i=s.family,l=y.dom.triggerElOffset,c=y.dom.triggerElDimensions,d=I.offsets_match(s.offset,l),_=I.dimensions_match(s.dim,c),u="mt-breadcrumb mt-bc-item mt-ui-element",p=s.pseudo[":nth-child(n)"],g=p-1,f='data-nth="'+p+'" data-total="'+s.totalSiblings+'"',m="",v="mt-bc-item",h=s.bcLabel,b=s.formattedBCLabel,l='<span class="bc-sep mt-ui-element"></span>',c="";n&&(u+=" active-crumb",e.activeBreadcrumbLabel=h),r&&(e.activeBreadcrumbLabel+=p="::"+r,b=b.replace(/<\/span>$/,p+"</span>"),c='data-pseudotype="'+r+'"'),(0<i.next.count||0<i.prev.count)&&(u+=" node-has-siblings"),d&&!n&&(m='<span class="mt-crumb-icon mt-ui-element '+(v+=_?" fully-nested-crumb "+I.iconClasses("square-regular"):" nested-crumb "+I.iconClasses("border-style"))+'"></span>'),e.breadcrumbs+='<span class="'+u+' full-crumb-item" data-level="'+o+'" data-eq="'+g+'" '+f+" "+c+" >"+b+l+"</span>",(d||n)&&(b=n?b:"",!n&&y.get_matching_selectors(s.$el,L.get_all_selector_code(!0,!0),L.pseudoSelected).length&&(u+=" mt-hasValues mtif"),void 0!==L.breadcrumbNodesCache.nestedElLevelAdjust&&(o+=L.breadcrumbNodesCache.nestedElLevelAdjust),e.nestedTabs+='<span class="'+u+' nested-el-item" data-level="'+o+'" data-eq="'+g+'" '+c+'title="'+I.escapeHTML(h)+'" '+f+" >"+m+b+l+"</span>")},update_breadcrumbs_and_nested_tabs:function(e){if(I.startT(arguments),y&&y.stat.nestedEls&&!I.isDomEl(y.triggerEl))return y.stat.nestedEls.add(D("#dom-bread").find(".drag-content")).html(""),!1;if(e.dontReloadBreadcrumbs||(L.breadcrumbNodesCache={}),L.iframeEditing()&&y.dom.search.nodes){for(var t,s,r,a,o,n,i={breadcrumbs:"",nestedTabs:"",activeBreadcrumbLabel:""},l=y.dom.search.nodes.length-1;0<=l;l--)L.update_breadcrumbs_nested_html(i,l,y.dom.search.nodes[l],0===l&&L.pseudoSelected),y.dom.search.nodes[l];for(l=0;l<y.dom.search.descendentNodes.length;l++)L.update_breadcrumbs_nested_html(i,l,y.dom.search.descendentNodes[l]),y.dom.search.descendentNodes[l];y.stat.nestedEls.html(i.nestedTabs),e.dontReloadBreadcrumbs||(t=(n=D("#dom-bread")).find(".drag-containment"),a=n.find(".drag-content"),e.domArrowAdjustment,a.css("width","auto").html(i.breadcrumbs),s=n.width(),r=a.width(),n=o=0,a.width(a=r).css("left","0px"),s<r?(n="-"+(o=r-s)+"px",a=s+2*o,L.stat.breadcrumbs.draggable("enable"),t.addClass("mt-is-draggable")):(L.stat.breadcrumbs.draggable("disable"),t.removeClass("mt-is-draggable")),t.width(a),t.css({left:n}),L.breadcrumbNodesCache={nodes:y.dom.search.nodes,descendentNodes:y.dom.search.descendentNodes})}I.endT(arguments)},update_dom_arrows:function(e){I.startT(arguments);var t,s=L.stat.refineTarget;s.find("span").addClass("disabled"),y.dom.search.nodes&&y.dom.search.nodes.length&&((t=y.dom.search.nodes[0].family).par.count&&s.find("span.tvr-parent").removeClass("disabled"),t.prev.count&&s.find("span.tvr-prev-sibling").removeClass("disabled"),t.next.count&&s.find("span.tvr-next-sibling").removeClass("disabled"),t.child.count&&s.find("span.tvr-child").removeClass("disabled")),I.endT(arguments)},dom_arrow_clicked:function(e,t){var s,r=e.attr("class"),a=0<=r.indexOf("tvr-parent"),o=0<=r.indexOf("tvr-child"),e=L.stat.breadcrumbs.find(".active-crumb");a||o?(s=a?e.prev():e.next(),L.breadcrumb_clicked(s,t)):(a=e.data(),s=parseInt(a.eq),a=parseInt(a.level),0<=r.indexOf("tvr-prev-sibling")?--s:s+=1,(r=L.get_breadcrumb_node(a,s))&&L.dom_nav_option_used(r.$el,{e:t,node:r,level:a,eq:s,domArrowAdjustment:"sibling",$prevActiveCrumb:e}))},dom_nav_option_used:function(e,t){t=D.extend({scroll:!t.isNested,forceHighlight:1},t),y.select_element(D(e),t)},update_view_code_tabs:function(e){var t=L.microUrl,s=L.pref.asset_loading,r=s.logic,a=-1,o=[],n={};parseInt(L.pref.allow_scss)&&(o.push({name:"All Sass",tab_slug:"all-sass",url:t+"draft-styles.scss",publish_url:t+"active-styles.scss",mode:"scss"},{name:"Previous Sass compile",tab_slug:"previous-sass-compile",file:"stdin",mode:"scss",note:"scss-error-notes"}),n["all-sass"]=++a,n["previous-sass-compile"]=++a),s.global_css&&(o.push({name:"Global CSS",tab_slug:"global-css",url:t+"draft-styles.css",publish_url:t+"active-styles.css",mode:"css"}),n["global-css"]=++a),s.global_js&&(o.push({name:"Global JS",tab_slug:"global-js",url:t+"draft-scripts.js",publish_url:t+"active-scripts.js",mode:"js"}),n["global-js"]=++a);for(let e=0;e<r.length;++e){var i=r[e],l=i.slug;"empty"!==s.conditional[l]&&(o.push(D.extend(!0,{name:I.checkObject(L.uiData,[l,"this","label"]),type:"conditional",tab_slug:"conditional-"+l,url:t+"mt/conditional/draft/"+l+".css",publish_url:t+"mt/conditional/active/"+l+".css",mode:"css"},i)),n["conditional-"+l]=++a)}L.generatedCodeTabs={items:o,indexMap:n};let c=L.get_initial_code_view_tab(),d='<input class="dialog-focus" type="hidden" name="tvr_mcth[non_section][display_css_code]" value="'+c+'">';if(o.length){for(let r=0;r<o.length;++r){let e=o[r],t=c===r?"active ":"",s="";"conditional"===e.type&&(s+="conditional-tab "),d+='<span class="'+s+t+" mt-tab dialog-tab dialog-tab-"+r+" dialog-"+e.tab_slug+'" rel="'+r+'">'+e.name+"</span>"}e&&L.update_generated_code_editor("",c,o[c])}L.stat.view.find("div.dialog-tabs").html(d)},get_initial_code_view_tab:function(){let e=L.generatedCodeTabs,t=L.scss_error?e.indexMap["previous-sass-compile"]:0,s=L.get_selector_in_focus();return s&&!L.scss_error&&u.folderIsConditional(s.sectionSlug)&&(t=e.indexMap["conditional-"+s.sectionSlug]),t},url_short_display_name:function(e,t){return e.replace(RegExp(t+"(?:mt/conditional/)?"),"")},update_generated_code_editor:function(e,t,o){var s=o.mode,r=o.tab_slug,n=L.microUrl,i="";if((e&&"css"===s||"scss"===s&&(1!==parseInt(t)||!L.scss_error))&&(e=O.beautify_css_or_scss(e),i=" ("+TvrLang.beautified+")"),O.update_arbitrary_editor({context:"viewCSS",mode:s,editorID:"generated-code",filterClass:"generated-code",readOnly:!0,directContent:e,tabKey:parseInt(t)}),D("#generated-code").attr("data-tab",o.tab_slug),"previous-sass-compile"===r)L.toggle_scss_import_compile_note("show"),L.toggle_view_draft_published_files("hide");else{let e=D("#view-file"),t=e.find(".draft-file"),s=e.find(".published-file"),r=parseInt(L.pref.minify_css)?" (minified)":"",a=!I.fileExists(o.publish_url);t.attr("href",o.url).text(L.url_short_display_name(o.url,n)+i),a?s.removeAttr("href").attr("data-unpublished",1).text(L.url_short_display_name(o.publish_url,n)):s.attr("href",o.publish_url).removeAttr("data-unpublished").text(L.url_short_display_name(o.publish_url,n)+r),L.toggle_scss_import_compile_note("hide"),L.toggle_view_draft_published_files("show")}},update_inspector_stylesheet:function(e,t,s){I.startT(arguments),"loadNew"==s?P.simple_ajax_request({url:t.url,plus:TvrLang.retrieve_css,minus:TvrLang.retrieve_css_failed,cbFunction:L.update_inspector_stylesheet,cbfArgs:[t]}):O.update_arbitrary_editor({context:"inspectorStylesheet",editorID:"inspect_stylesheet_preview",data:e,filterClass:"inspect_stylesheet_preview",readOnly:!0,directContent:e,containerClass:".content-main",find:t}),I.endT(arguments)},ui_reset:function(e){if(I.startT(arguments),!confirm(TvrLang.reset_settings_confirm))return!1;P.pending_auto_saves("clear");var t=L.ajaxUrl,s=TvrLang.reset_empty_folders;P.general_ajax_submission("reset",t,s,"GET","mt_action=tvr_ui_reset"),I.endT(arguments)},get_css_filter_alias_orig:function(e,t){I.startT(arguments);var s=D("#css-filters"),r=L.pseudo_class_format(e.closest("li").data("pref_sub_key")),r=(I.isDomEl(e.closest("#fav-filters"))?s.find("span.quick-opts-wrap"):D("#fav-filters")).find("li."+r);return I.endT(arguments),"favourite_filter"!=t?r:r.find(".star-icon")},get_css_filter_alias:function(e,t){var s=e.closest("li"),e="li."+L.pseudo_class_format(e.closest("li").data("pref_sub_key"));return L.otherFilters(e,s)},clear_css_filters:function(n){I.startT(arguments),L.stat.cssModifiers.find("li.css-filter-item").each(function(e){var t,s,r=D(this),a=r.data(),o=a.type;n&&"page_specific"===o||(r.hasClass("on")&&((s=(t=L.get_css_filter_alias(s=r)).length?s.add(t):s).removeClass("on"),delete L.pref[o][a.pref_sub_key]),r.hasClass("filter-editable")&&(a=(a=r.find(".cssfilter-combo").attr("name").match(/\((.+?)\)/))?a[1]:"",r.find(".cssfilter-combo").val(a)))}),L.stat.tvr.removeClass("pseudo_classes pseudo_elements"),I.endT(arguments)},force_styles_analysis:function(){L.tooMuchCSS=!1,L.forceStylesAnalysis=!0,E.update_stylesheet_rules()},get_custom_prefix_combo_data:function(e,t){var s=L.format_combo_suggestions(!1,"body_classes",I.checkObject(y,["dom","search","sigAtts","pageOtherClass"])||[]);t(L.format_combo_suggestions(!1,"recent",L.pref.recent_custom_prefixes).concat(s))},url_pages_cache:{},url_pages_cache_previous_result:[],logic_pages_cache:{},logic_pages_cache_previous_result:[],search_pages_latest_term:null,get_item_from_previous_results:function(e,t){t=t||this.url_pages_cache_previous_result;for(var s=0;s<t.length;s++){var r=t[s];if(e===r.value)return r}return!1},filter_code_suggestions:function(e,t){e=e?e.term.toLowerCase():null;t(L.filter_matching_results(e,TvrMT.data.prog.combo.all_sel_suggestions))},filter_matching_results:function(e,t){for(var s=[],r=0;r<t.length;r++){var a=t[r],o=a?a.value+a.label+a.category:"";a.logic_only&&!L.conditionLogicSiteSearch||e&&!o.match(new RegExp(I.escapeRegExp(e),"i"))||s.push(a)}return s},prepend_recent_paths:function(e,t){if(!y)return t;for(var s,r,a,o=[],n=L.conditionLogicSiteSearch?TvrMT.data.prog.combo.recent_logic:TvrMT.data.prog.combo.custom_paths,i=y.get_current_page_title(),l=0,l=t.length-1;0<=l;l--)(c=t[l]).category===TvrLang.recent&&t.splice(l,1);for(l=0;l<n.length;l++){var c,d=(c=n[l])===Object(c),_=d?c.label:c,u=d?c.value:c,p=d?c.item_id:null,g=d?c.logic:null,f=d?c.exclude_logic:null,d=d?c.logic_only:null;!L.conditionLogicSiteSearch&&(i&&_===i&&(_+=" ("+TvrLang.current_page+")"),-1<u.indexOf("ct_template"))||o.push({label:_||u,value:u,category:TvrLang.recent,item_id:p,logic:g,exclude_logic:f,logic_only:d})}return L.conditionLogicSiteSearch&&y&&(r=(s=y.getMTDynFrontData()).title,a=s.logic,o.unshift({label:r,value:a,category:TvrLang.current_page,item_id:s.post_id,logic:a,logic_only:1})),o.concat(t)},clear_recent_page_path:function(e,t){t.preventDefault();for(var t=D("#previewPath"),s=e.closest("li").attr("data-path"),r=TvrMT.data.prog.combo.custom_paths,a=r.length-1;0<=a;a--){var o=r[a];s===(o===Object(o)?o.value:o)&&r.splice(a,1)}t.MTautocomplete("search",t.val()),P.simple_ajax_request({type:"POST",url:L.ajaxUrl+"&update_custom_paths=1",sendData:P.serialized_data_with_single_key(JSON.stringify(r)),plus:"",minus:""})},return_page_results:function(e,t,s,r){L[r+"_previous_result"]=s,s=L.prepend_recent_paths(e,s),s=L.filter_matching_results(e,s),r&&(L[r][e]=s,9<(e=Object.keys(L[r])).length&&delete L[r][e[0]]),t(s)},get_site_pages:function(e,s){var r=L.stat.changeUrlInputWrap,t=D("#previewPath").val(),a=e&&e.term?e.term.toLowerCase():I.isDefined(t)?t:null,o=L.conditionLogicSiteSearch?"logic_pages_cache":"url_pages_cache";(L.search_pages_latest_term=a)?(L[o][a]?L.return_page_results(a,s,L[o][a]):L.return_page_results(a,s,L[o+"_previous_result"]),r.addClass("active"),I.action_after_timeout("site_page_search",200,{item:function(e){var t=L.conditionLogicSiteSearch?"&logic_format=1":"";P.simple_ajax_request({type:"GET",url:L.ajaxUrl+"&get_site_pages=1&search_term="+a+t,cbFunction:function(e,t){e=JSON.parse(e);L.return_page_results(L.search_pages_latest_term,s,e,o),r.removeClass("active")},cbfArgs:[a]})},args:[{}]})):L.return_page_results(a,s,TvrMT.data.dyn.site_pages)},restore_rev:function(e){if(I.startT(arguments),!confirm(TvrLang.restore_settings_confirm))return!1;var t=L.ajaxUrl,s=TvrLang.restore_settings,r=e.attr("rel");P.general_ajax_submission("restore",t,s,"GET",r),I.endT(arguments)},toggle_revision_save_status:function(e){var t,s=e.add(e.closest("tr"));t=e.hasClass("revision-is-saved")?(s.removeClass("revision-is-saved"),0):(s.addClass("revision-is-saved"),1);P.simple_ajax_request({type:"GET",url:L.ajaxUrl+"&rev_save_status="+t+"&rev_id="+e.attr("rel")})},set_input_timer:function(e){e=e||L.inputTypingInterval,L.timer.typing&&clearTimeout(L.timer.typing),L.timer.typing=setTimeout(L.done_typing,e)},set_defer_save_timer:function(e,t){t="save"+t;L.timer[t]&&clearTimeout(L.timer[t]),L.timer[t]=setTimeout(P.action_save,L.beforeSaveInterval,e)},extract_inner_styles:function(e){var t=(e=(e=I.remove_only_last_char(e,"}")).split("{"))[1]||"";return t&&(e.shift(),t=e.join("{")),t.trim()},post_edit:function(e){I.startT(arguments),e.each(function(e){var t=D(this);L.update_input_width_and_scroll(t),L.adjust_comp_span(t,"after")}),I.endT(arguments)},adjust_event_fields:function(e){var t,s=I.convert_to_param(e.val(),""),r=e.closest(".field-wrap"),e=r.siblings(".event-target-field"),r=r.siblings(".event-value-field");I.hasValue(s)?(t=r,"css"!==E.event_type(s)?t=t.add(e):L.hide_property_fields(e),t.addClass("show-event-fields")):(t=r.add(e),L.hide_property_fields(t)),y.after_animation(t.first(),{type:"transition",cb:function(){L.adjust_scroll_buttons(L.get_pg_meta(),"style")}})},get_default_unit:function(e,t){return I.checkObject(L.pref,["my_props",e,"pg_props",t,"default_unit"],!0)},get_factory_default_unit:function(e,t){return e=e||I.prop_to_cssf(t),I.checkObject(TvrMT.data.prog.lh,[e,"fdu"],!0)},update_default_unit:function(e,t,s){I.updateObject(L.pref,["my_props",e,"pg_props",t,"default_unit"],s)},maybe_set_unit:function(e,t,s,r,a){if(!r)return!1;var o=void 0!==e.unit?e.unit:L.get_default_unit(t,s);if(I.isDefined(o)){r=r.trim().replace(/=(?:.+)(\(.*?\))/g,function(e){return e.replace(/ /g,"")});var n={val:r,converted:!1,calc:""};if(r.indexOf(" ")<0)n=L.do_conversion(r,o,s,0,a);else{var i,l,c=[],d=r.split(" ");for(i in d)d.hasOwnProperty(i)&&(l=L.do_conversion(d[i],o,s,i,a),c[i]=l.val,l.converted&&(n.converted=!0,n.calc+=0!=i?", "+l.calc:l.calc));n.val=c.join(" ")}return n}},do_conversion:function(e,t,s,r,a){var o={val:e,converted:!1,calc:""};return m.unitCouldBeAdded(e,t)?t&&(o.val=e+t,o.converted=!0):"="===e.charAt(0)&&(o=L.process_excel_function(e,s,r,a)),o},process_excel_function:function(e,t,s,r){var a={val:e,converted:!1,calc:""},o=e.split("(");if(!o[0]||!o[1]||o[1].indexOf(")")<0)return a;var n,i=o[0].replace("=",""),l=o[1].replace(")","").split(",");for(n in l)if(l.hasOwnProperty(n)&&(l[n]=l[n].trim(),!I.isDefined(l[n])))return a;o=L.nodeCSS[0];return o?(l[1]&&(o=L.nodeCSS[l[1]-1]),L.auto_convert(l[0],i,o,t,e,s,r)):(P.log({short:"Auto-conversion could not be calculated",long:"<p>The current selector may not target any elements on the current page.</p>",type:"warning"}),a)},auto_convert:function(e,t,s,r,a,o,n){I.startT(arguments);var i,l,c,d,_,u,p,g={val:a,converted:!1,calc:""},f=r,m=!1,v=TvrMT.data.prog.autoMap;if(v[f]&&v[f][t]){if(!D.isPlainObject(v[f][t])&&!v[f][t][0])return n&&(p={short:"Auto-conversion aborted",long:"<p>"+v[f][t]+"</p>",type:"warning"},P.log(p)),I.endT(arguments),g;i=v[f][t].node,l=v[f][t].prop,l=(l=Array.isArray(l)?l[o]:l).replace(/_/g,"-"),c=parseInt(s[i][l].replace("px","")),I.hasValue(v[f][t].tip)&&(m="<p>"+v[f][t].tip+"</p>")}return"%"===t?(d=e/c*100,_=e+"px / "+c+"px * 100 = "+parseFloat(d.toFixed(3).toString())+t,u=e+"px divided by "+c+"px ("+i+" "+l+") multiplied by 100 = <b>"+d+t+"</b>"):"em"!==t&&"rem"!==t||(l="font-size",d=e/(c="em"==t?(i="font_size"==f?"parent":"element",parseInt(s[i]["font-size"].replace("px",""))):(i="HTML base",L.baseFontSize)),_=e+"px / "+c+"px = "+parseFloat(d.toFixed(3).toString())+t,u=e+"px divided by "+c+"px ("+i+" "+l+") = <b>"+d+t+"</b>"),d&&(n&&(p={short:_,long:"<p>"+TvrLang.auto_conversion_performed+": <b>"+a+"</b><br />"+u+"<br />"+TvrLang.auto_values_rounded+"</p>",type:"info"},m&&(p.long+=m),P.log(p)),g={val:parseFloat(d.toFixed(3).toString())+t,converted:!0,calc:_}),I.endT(arguments),g},update_packs_obj:function(e){TvrMT.data.prog.combo.directories.push(e),TvrMT.data.prog.combo.directories.sort()},set_import_field:function(e){D("#import_from_pack_name").val(e)},handle_ajax_error:function(e,t){return 0==e.status?TvrLang.error_connection:404==e.status?TvrLang.error_404:500==e.status?TvrLang.error_500:"parsererror"==t?TvrLang.error_parser:"timeout"==t?TvrLang.error_timeout:TvrLang.error_unknown+"\n"},show_dialog:function(e){I.startT(arguments),L.close_dialog(!0);var r,a,t,s,o=(e=e.attr("rel")?e:e.closest("*[rel]")).attr("rel");if("not-yet"===o)return!1;D("#"+o+"-dialog").addClass("show"),L.stat.dialogs.addClass("show"),"mt-initial-setup"===o?L.pref.buyer_validated||D("#license-key-input").focus():"import-from-pack"===o?(I.hasValue(e.attr("data-pack-name"))&&D("#import_from_pack_name").val(e.attr("data-pack-name")),D("#preview-import-css-0").hasClass("ace_editor")||E.update_import_css_editor("")):"export-to-pack"===o?(r="",D("#tvr-menu").find(".section-tag").each(function(){var e=L.get_meta(D(this),"section"),t="",s="";0<parseInt(e.sectionM.find(".selector-count-state").attr("rel"))&&(t='checked="checked"',s="on"),r+='<li><input type="checkbox" name="export_sections['+e.sectionSlug+']" '+t+' /> <span class="fake-checkbox '+s+' mtif mtif-tick-box-unchecked"></span><span class="folder-icon tvr-icon"></span><span class="ef-label">'+e.sectionH+"</span></li>"}),D("#available-folders").html(r),a=D("#custom-css"),L.stat.code.find("textarea.hand-css-textarea").each(function(e){var t=D(this),s=a.find(".custom-"+t.attr("id"));I.hasValue(t.val())?I.check_fake(s):I.uncheck_fake(s)}),D("#export_to_pack").val(1),D("#export_pack_name").val(""),D("#toggle-checked-folders").find("input").prop("checked",!1).end().find(".fake-checkbox").removeClass("on")):"display-css-code"===o?(L.update_view_code_tabs(!0),P.ajax_save_settings({context:"view-code",settings:{},noSaveDelay:!0})):"inspect-stylesheet"===o?(s=(t=I.escapeRegExp(e.data("selector")))+"\\s*?{?",s={url:e.data("href"),media:e.data("media"),selector:t,findSelectorParts:!0,selectorPattern:s},L.update_inspector_stylesheet(!1,s,"loadNew")):"display-revisions"===o?L.ajax_load_revisions_table():"manage-design-packs"===o&&L.reload_iframe(e,"manage"),"google-fonts"===o?(L.gFontTarget=e.closest(".field-wrap").find(".property-input"),L.reload_iframe(e,"google_fonts")):"program-docs"===o&&L.reload_iframe(e,"docs",D("#docs-url").attr("rel"),!0),I.endT(arguments)},close_dialog:function(e,t){I.startT(arguments);var s=L.stat.tvr.find("div.tvr-dialog.show");e&&s.length?L.stat.dialogs.addClass("dialog-already-showing"):L.stat.dialogs.removeClass("dialog-already-showing"),L.stat.dialogs.removeClass("show"),s.removeClass("show"),D("#export_to_pack, #new_pack").val(0),I.endT(arguments)},reload_docs_iframe:function(e){I.startT(arguments);var t="docs_iframe",s=D("#docs-url").attr("rel");I.hasValue(e.attr("data-docs-index"))&&(s+="&docs_index=1"),I.hasValue(e.attr("data-prop-group"))&&(s+="&prop_group="+e.attr("data-prop-group")),I.hasValue(e.attr("data-prop"))&&(s+="&prop="+e.attr("data-prop"));D("#"+t);window.frames[t].location=s,I.endT(arguments)},reload_iframe:function(e,t,s,r){var a=t+"_iframe",o=D("#"+a);s=s||o.attr("rel"),"docs"===t&&(I.hasValue(e.attr("data-docs-index"))&&(s+="&docs_index=1"),I.hasValue(e.attr("data-prop-group"))&&(s+="&prop_group="+e.attr("data-prop-group")),I.hasValue(e.attr("data-prop"))&&(s+="&prop="+e.attr("data-prop"))),!r&&"manage"!==t&&"1"===o.attr("data-frame-loaded")||(o.attr("data-frame-loaded",0),window.frames[a].location=s,o.on("load",function(){o.attr("data-frame-loaded",1)}))},toggle_help_info:function(e){e.next().slideToggle("fast",function(){})},toggle_multi_checkboxes:function(e){I.startT(arguments);var t=D("#available-folders, #custom-css");e.hasClass("on")?t.find("input").prop("checked",!1).end().find(".fake-checkbox").add(e).removeClass("on"):t.find("input").prop("checked",!0).end().find(".fake-checkbox").add(e).addClass("on"),I.endT(arguments)},get_dyn_meta:function(e){I.startT(arguments);var t=e.closest(".dyn-wrap");L.dyn_meta={wrap:t,slug:t.data("slug"),add_input:t.find(".new-item-input"),add_button:t.find(".new-item-add"),menu:t.find(".tvr-dyn-menu")};t=e.closest("li.dyn-item");return I.isDomEl(t)&&(L.dyn_meta.item=t),I.endT(arguments),L.dyn_meta},dyn_add_item:function(e){I.startT(arguments);var t=L.get_dyn_meta(e),s=t.add_input.val(),r=t.wrap.data("base-key");if(r)var a={newName:r+=t.menu.find("li.dyn-item").length+1,newNameHuman:s};else if(!(a=I.new_name_checks(s,TvrLang.item)))return!1;a=L.dom_replacements(!1,"dyn_item",D(L.templates[t.slug+"_menu_item"]),"item",a.newName,a.newNameHuman);t.menu.append(a).find("li").filter(":last").hide().fadeIn("fast",function(){t.add_input.val(""),"mqs"==t.slug&&L.toggle_edit_item(D(this).find(".edit-item"))}),I.endT(arguments)},toggle_edit_item:function(e){I.startT(arguments);var t=L.get_dyn_meta(e).item.find(".edit-item-form");t.hasClass("show")?t.removeClass("show"):t.addClass("show"),I.endT(arguments)},delete_item:function(e){I.startT(arguments),e.closest("li").fadeOut("slow",function(){D(this).remove()}),I.endT(arguments)},reveal_form_opts:function(e){I.startT(arguments);var t=e.attr("rel"),t=e.closest("li").siblings(".hidden."+t);t.hasClass("show")?t.removeClass("show"):t.addClass("show"),I.endT(arguments)},toggle_system_menu_options:function(e){I.startT(arguments);var t=(e=e.closest("li")).find(".tvr-input-wrap"),s=e.find(".mt-menu-text"),r=e.closest("ul");t.hasClass("show")?(s.text(s.data("ll")),r.removeClass("expanded"),t.removeClass("show")):(s.text(s.data("sl")),r.addClass("expanded"),t.addClass("show")),I.endT(arguments)},create_url_from_input_path:function(e){let t=e.val(),s=!!t&&I.extract_url_path(t),r=s?I.rtrim(L.homeUrl,"/")+s:"";return!r&&y&&(r=y.get_current_url()),r},format_nonlog_param:function(e){return e=parseInt(L.pref.mt_nonlog)?(e=I.strip_page_builder_and_other_params(e),e=I.append_url_param(e,"mt_nonlog"),I.append_url_param(e,"_wpnonce",TvrMT.data.dyn.ui_config.mt_nonlog_nonce)):I.strip_url_param(e,"mt_nonlog")},clear_test_page_input:function(){D("#testPreviewPath").val("")},change_preview_url:function(e,t,s){I.startT(arguments);var r=e.closest("li").find("input.combobox"),a=L.create_url_from_input_path(r);a&&(P.update_prog_indicator("plus",TvrLang.load_wp),L.clear_test_page_input());var o=g.check_builder_autoload();o&&((r=t?t.item:L.get_item_from_previous_results(I.extract_url_path(a))||{}).url=a,o=g.launchBuilderOnNewPage(r,o)),o||(a=L.format_nonlog_param(a),g.maybeReleaseBuilderEditLockBeforeExit(a)),I.endT(arguments)},toggle_program_menu:function(e){L.stat.settingsMenu.hasClass("expanded")?L.hide_folders_or_settings("settings","right"):L.show_folders_or_settings("settings","right")},after_style_options_deleted:function(e){L.totalSels<1&&F.toolbar_adjusted()},menuOrder:{},refresh_sortable:function(){I.startT(arguments);for(var t=document.getElementById("tvr-menu"),e=t.getElementsByClassName("selector-sub"),s={animation:150,forceFallback:!0,onStart:function(e){MTlocal.clean_tooltips();e=D(e.item);I.currentlySorting=e.hasClass("section-tag")?"section":"selector",D(t).addClass("sorting-in-progress"),L.get_dom_order({},e,{prevSec:"",newSec:"",orig_order:["this"],new_order:["this"],map:[]},!1),L.itemIsBeingDragged=!0},onEnd:function(e){I.currentlySorting=!1,D(t).removeClass("sorting-in-progress"),L.get_dom_order({},D(e.item),L.menuOrder,!0),L.itemIsBeingDragged=!1}},r=D.extend(!0,{},s,{group:"folders",handle:".folder-icon",onUpdate:function(e){var t=L.get_meta(D(e.item),"section"),e=t.sectionM.prev().attr("id");I.hasValue(e)?t.section.detach().insertAfter("#"+e.replace("strk","opts")):t.section.detach().prependTo("#tvr-options"),I.hasValue(L.selInFocusID)&&L.update_prev_next_sel_buttons(L.selInFocusID)}}),a=D.extend(!0,{},s,{group:"selectors",handle:".selector-sortable-icon",onMove:function(e,t){if(-1<e.related.className.indexOf("strk-sec"))return!1},onUpdate:function(e){L.mirror_move_and_log({},e)},onAdd:function(e){L.selector_received({},e)}}),o=(new Sortable(t,r),[]),n=0;n<e.length;n++)o[n]=new Sortable(e[n],a);I.endT(arguments)},get_dom_order:function(e,t,s,r,a,o){I.startT(arguments);var n,i,l=t.closest("ul"),c=t.hasClass("section-tag")?"section":"selector",d="section"==c?["root"]:["section"],_=L.get_meta(t,c);return"selector"==c?(i=l.closest(".section-tag"),r?s.newSec=i.attr("id").replace("strk-",""):s.prevSec=_.sectionSlug,s.moved_item=_.selectorSlug):s.moved_item=_.sectionSlug,a&&!r?(n="section"==c?L.uiData:L.uiData[_.sectionSlug],s.orig_order=Object.keys(n)):l.find("> li").not(".sortable-ghost").each(function(e){var t=D(this),t=L.get_meta(t,c)[c+"Slug"];(r?s.new_order:s.orig_order).push(t)}),r&&(I.startT("get_dom_order post sort"),s.syncRenameConfig&&(e=w.modify_main_js_object("rename",e,L.menuOrder.syncRenameConfig),s.syncRenameConfig=!1),e.moveUpdate=[],e.orderUpdate=[],e=w.modify_main_js_object("reorder",e,{callbackDepth:d,maxDepth:d[0],targetSection:_.sectionSlug,targetSelector:_.selectorSlug,menuOrder:s}),"selector"==c?(i=L.get_meta(i,"section"),e=L.js_check_values(e,i),e=w.modify_main_js_object("update_section_css",e,{M:i,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]}),s.prevSec!==s.newSec&&(I.checkObject(L.uiData,[s.prevSec,"this","disabled"])!==I.checkObject(L.uiData,[s.newSec,"this","disabled"])&&(e=w.modify_main_js_object("group_to_css",e,{M:_,maxDepth:"group",recurse_key:["m_query"]})),i=L.get_meta(D("#strk-"+s.prevSec),"section"),e=L.js_check_values(e,i),e=w.modify_main_js_object("update_section_css",e,{M:i,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]}),L.is_cur("selector",_.selectorID)&&y.select_current_selector_elements({doNotUpdateSelectorSuggestions:1})),a||(e=P.user_action(e,{items:["selector"],val:L.title(_.selectorM.find("span.selector-sortable-icon")),M:_,pathTT:!0,icon:"mtif-arrowsx4"}))):(a||(e=P.user_action(e,{items:["section"],val:L.title(_.sectionM.find("span.folder-icon")),M:_,icon:"mtif-arrowsx4"})),y.edit_style_nodes(_,"reorder"),u.reorderFolderLoading(s.new_order),u.maybeAddLogicAdjustedFlag(_.sectionSlug,e)),a||P.ajax_save_settings({settings:e}),I.endT("get_dom_order post sort")),L.menuOrder=s,I.endT(arguments),e},mirror_move_and_log:function(e,t,s){I.startT(arguments),I.hasValue(L.selInFocusID)&&L.tvr_iterate_selectors_v(!1,L.selInFocusID,{doNotBringStylesTop:1,draftSelectorFolderCreated:t.draftSelectorFolderCreated,elementAlreadySelected:t.elementAlreadySelected}),I.endT(arguments)},selector_received:function(e,t){I.startT(arguments);var s=D(t.item),r=L.get_meta(s,"selector"),a=L.is_cur("selector",r.selectorID);L.oM=r;var o=L.get_meta(s.closest(".section-tag"),"section");L.update_count(r.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),L.update_count(o.sectionM.find(".selector-count-state"),"add",1,"selector","");var n=I.resolve_unique_name(r.selectorH,o.sectionM,".selector-name","Moved",r.selectorMID),s=I.convert_to_param(n);return L.dom_replacements(r,"selector",r.selector.add(r.selectorM),r.sectionSlug,o.sectionSlug,o.sectionH,r.selectorSlug,s,n,r.selectorCode),s!==r.selectorSlug&&(L.menuOrder.syncRenameConfig={rebuild:!0,callbackDepth:["section","selector"],maxDepth:"selector",targetDepth:"selector",targetSection:r.sectionSlug,targetSelector:r.selectorSlug,new_key:s,new_label:n,new_code:r.selectorCode}),o=L.get_meta(r.selectorM,"selector"),a&&(L.update_global_vars(o),r.selector.detach().prependTo(o.section.find("ul.selector-sub"))),L.sortableLoading=!1,L.mirror_move_and_log(e,t),I.endT(arguments),o},search_filter:!1,colorCodeSearchDec:!0,search_folders:function(e,t){function s(e){parseInt(L.pref.expand_all_folders)&&(D("#toggle-all-folders").removeClass("on"),L.pref.expand_all_folders=0),e=e.trim();var t=I.escapeRegExp(e),s=".*("+t+").*\\n";I.isDefined(e)?(L.stat.mainMenu.addClass("user-searching"),t={searchText:e,searchRegex:new RegExp(t,"i"),wholeLineRegex:new RegExp(s,"i"),searchMatches:{}},s=w.run_global_scans(D.extend(!0,{},t),["search_folders"]),t.searchMatches=s.searchMatches,L.search_filter=t,L.open_close_all_folders("close"),L.open_close_all_folders("open",!0)):L.clear_folder_search()}t?I.action_after_timeout("search_folders",L.inputTypingInterval,{item:s,args:[e]}):s(e)},clear_folder_search:function(){L.search_filter=!1,L.stat.searchFoldersInput.val(""),L.stat.mainMenu.removeClass("user-searching"),L.open_close_all_folders("close")},flag_search_matches:function(e,t,s){var r=L.colorCodeSearchDec,a=e.settings.searchText,o=e.settings.searchRegex,n=e.settings.searchMatches,t=e.selector,i=L.uiData[e.section_key],l=i[e.selector_key],c=I.checkObject(i,["this","label"]),d=l.label.split("|"),_=d[0]||"",u=d[1]||"",i=L.get_tab_name(s),l="all-devices"!==s,d=L.scss_enabled?t.raw_scss||"":t.compiled_css||"",c=d+c+_+i,_=""===d||d.match(new RegExp("^\\s*"+I.escapeRegExp(u)+"\\s*{\\s*}\\s*$"));if(c.match(o)){var c="",p=[];if(l&&_||!u.match(o)||p.push({pg:"code",property:"css",label:r?'<span class="mt-search-code">'+I.embolden_matched_text(u,a)+"</span>":u}),t.styles)for(var g=Object.keys(t.styles),f=0;f<g.length;f++){var m,v,h,b,y=g[f],S=t.styles[y];for(m in S)S.hasOwnProperty(m)&&"css"!==m&&(h=I.checkObject(S,[m,"value"])||"",b=I.checkObject(S,[m,"unit"])||"",h=(v=I.prop_to_cssf(m))+": "+(h=Array.isArray(h)?h.join(" "):h)+(b=!I.isNumeric(h)?"":b),b=I.embolden_matched_text(h,a),r&&(b=L.color_code_property_value(b)),h.match(o)&&p.push({pg:y,property:m,cssf:v,label:b,declaration:h}))}var w="",u=p.length;if(u||(d=d.match(e.settings.wholeLineRegex))&&(d=d[0].trim(),parseInt(L.pref.css_important)&&(d=d.replace(" !important;","")),p.push({pg:"code",property:"css",label:L.color_code_property_value(I.embolden_matched_text(d,a))}),u=1),u||!_&&i.match(o)){for(f=0;f<p.length;f++){var x=p[f];w+='<div class="mt-search-entry" data-pg="'+x.pg+'" data-property="'+x.property+'" data-mq_key="'+s+'">'+x.label+"</div>"}c+='<div class="mt-search-mq mt-search-entry" data-pg="code" data-property="css" data-mq_key="'+s+'">'+I.embolden_matched_text(i,a)+"</div>"+w}!u&&"all-devices"!==s&&_||I.updateObject(n,[e.section_key,e.selector_key,s],{data:p,html:c})}},color_code_property_value:function(e){e=e.split(":");return e[0]='<span class="mt-search-property">'+e[0]+"</span>",e[1]='<span class="mt-search-value">'+e[1]+"</span>",e.join(":")},maybe_apply_search_results_to_item:function(e,t,s){if(L.search_filter){var r=I.checkObject(L.search_filter,["searchMatches",e.section_key,e.selector_key]);if(r){for(var a=Object.keys(TvrMQsCombined),o="",n=0;n<a.length;n++){var i=a[n],i=I.checkObject(r,[i,"html"]);i&&(o+=i)}t.find("> .item-row").append('<div class="search-results-area">'+o+"</div>"),L.maybe_change_item_name_highlight(t,s)}else t.addClass("search-excluded")}},maybe_change_item_name_highlight:function(e,t,s){e=e.find(".name-text").first();s?e.html(t):L.search_filter&&t.match(L.search_filter.searchRegex)&&e.html(I.embolden_matched_text(t,L.search_filter.searchText))},search_entry_clicked:function(e){var t=L.get_meta(e,"selector"),s=e.data(),r=s.mq_key,e=s.pg,s=s.property;L.is_cur("selector",t.selectorID)||L.tvr_iterate_selectors_v(t.selectorM),t.tabSlug!==r&&L.mq_tab_pressed(L.stat.res.find(".mq-tab-"+r)),O.go_to_ui_property(e,s)},open_close_all_folders:function(r,a,o){L.stat.mainMenu.find(".folder-icon").each(function(){var e=D(this),t=L.get_meta(e,"section"),s=e.hasClass("on");a?!L.search_filter||L.search_filter.searchMatches[t.sectionSlug]||t.sectionH.match(L.search_filter.searchRegex)?(t.sectionM.removeClass("search-excluded"),L.maybe_change_item_name_highlight(t.sectionM,t.sectionH)):t.sectionM.addClass("search-excluded"):L.maybe_change_item_name_highlight(t.sectionM,t.sectionH,!0),(s&&"close"===r||!s&&"open"===r)&&t.sectionSlug!==o&&L.toggle_folder(e)})},maybe_show_current_folder_item_view:function(){var e,t;L.selInFocusID&&!L.search_filter&&((t=(e=L.get_selector_in_focus()).sectionM.find("> .sec-row .folder-icon")).hasClass("on")||(L.toggle_folder(t),e=L.get_selector_in_focus()),L.scrollIntoView(L.folders_scrollable_area(),e.selectorM))},scrollIntoView:function(e,t){I.scroll_to({scrollDiv:e,offset:I.getElPosRelToContainer(t,e)})},toggle_folder:function(e,t){I.startT(arguments);var s=L.get_meta(e,"section");s.sectionM.find("> .sec-row .folder-icon").hasClass("on")?L.close_folder(s,t):L.open_folder(s,t),I.endT(arguments)},open_folder:function(e,t){t||this.load_folder_menu_selectors(e),e.sectionM.addClass("is-open").find("> .sec-row .folder-icon").addClass("on"),e.sectionM.find("> ul.selector-sub").addClass("show")},close_folder:function(e){this.unload_folder_menu_selectors(e),e.sectionM.removeClass("is-open").find("> .sec-row .folder-icon").removeClass("on"),e.sectionM.find("> ul.selector-sub").removeClass("show")},load_folder_menu_selectors:function(e){var t=e.sectionM.find(".selector-sub"),s=L.load_selector(e,{items:["selectorM"]});return t.html(""),t.append(s),L.js_check_values({},L.get_meta(e.sectionM,"section")),s},unload_folder_menu_selectors:function(e){e=e.sectionM.find(".selector-sub").children("li");(e=L.menuSelInFocusID?e.not("#"+L.menuSelInFocusID):e).remove()},unload_all_option_selectors:function(){I.startT(arguments),L.stat.opts.find("ul.selector-sub").find("> li:not(#"+L.selInFocusID+")").remove(),I.endT(arguments)},update_editor_refs:function(e,t,s,r,a,o){return I.startT(arguments),!1},dom_replacements:function(e,t,s,r,a,o,n,i,l,c,d){var _,u,p;return I.startT(arguments),"section"==t&&(s.find("input, textarea.property-input").each(function(e){var t=D(this);I.hasValue(t.attr("name"))&&t.attr("name",t.attr("name").replace("tvr_mcth["+r+"]","tvr_mcth["+a+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+a+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+a+"]"))}),s.find(".section-name .name-text").text(o),s.find(".section-data-label").val(o),s.find(".selector-tag, .group-tag, .subgroup-tag, .property-tag, pre.custom-css-pre").add(s).each(function(){var e=D(this);e.attr("id",e.attr("id").replace(r,a))})),"selector"==t&&(s.find(".selector-name").attr("title",I.regular_escape_quotes(c)),s.find(".selector-name .name-text").text(l),s.find(".selector-label").val(l+"|"+c)),"group"==t&&(s.removeAttr("id"),s.attr("class",s.attr("class").replace("property-fields-all-devices","property-fields-"+d)),"all-devices"!=d&&s.find("input.property-input, textarea.property-input, input.disabled-tracker, input.chained-tracker, input.post-sel-css, input.post-sel-data").each(function(e){var t=D(this);t.attr("name",t.attr("name").replace("tvr_mcth","tvr_mcth[non_section][m_query]["+d+"]"))}).end().find("div.property-tag, div.subgroup-tag, pre.custom-css-pre").each(function(){var e=D(this);e.attr("id",e.attr("id").replace("-all-devices","-"+d))})),"selector"!==t&&"group"!==t||(s.find("input, textarea.property-input").each(function(e){var t=D(this);I.hasValue(t.attr("name"))&&t.attr("name",t.attr("name").replace("tvr_mcth["+r+"]["+n+"]","tvr_mcth["+a+"]["+i+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+a+"]["+i+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+a+"]["+i+"]"))}),s.find(".selector-tag, .group-tag, .subgroup-tag, .property-tag, pre.custom-css-pre").add(s).each(function(){try{var e=D(this);e.attr("id",e.attr("id").replace(r+"-"+n,a+"-"+i))}catch(e){}})),"dyn_item"==t&&(_=r,u=a,p=o,s.attr("id",s.attr("id").replace(_,u)),s.find("input, textarea").each(function(){var e=D(this);e.attr("name",e.attr("name").replace("["+_+"]","["+u+"]"))}),s.find(".script-display_name, .mquery-label").val(p),s.find(".name-text").text(p)),I.endT(arguments),s},add_section:function(e,t){I.startT(arguments);e=e||TvrLang.untitled_folder,e=I.resolve_unique_name(e,D("#tvr-menu"),".section-name");var s=L.dom_replacements(!1,"section",D(L.templates.sectionM).add(L.templates.section),"selector_section",I.convert_to_param(e),e);D("#tvr-options").append(s[1]);var r=D("#tvr-menu");r.append(s[0]);var a=r.find("li.section-tag").filter(":last"),s=L.get_meta(a,"section");a.hide().fadeIn("fast",function(){var e=D("#section-count-state");L.update_count(e,"add",1,"section")});r=!1;L.applyLogicToFolder&&(u.setFolderLogicHiddenInputs(s,L.applyLogicToFolder),u.hasGlobalCondition(L.applyLogicToFolder.expr)||s.sectionM.addClass("item-conditional"),I.updateObject(L.pref.asset_loading,["conditional",s.sectionSlug],1),L.update_cur_item_apply_state(s,"section"),r=L.applyLogicToFolder,L.applyLogicToFolder=!1);a=E.dom_to_data({M:s,domDepth:"section",return:"mtData"});return t&&(L.draftFolders.push(s.sectionSlug),r&&r.expr&&u.updateDraftFolderInSession({slug:s.sectionSlug,expr:r.expr})),L.refresh_sortable(),I.scroll_to({scrollDiv:L.folders_scrollable_area(),bottom:!0}),a=P.user_action(a,{items:[e],val:e,icon:"mtif-add"}),L.close_context_menu({filter:".cm-add-folder-options"}),u.maybeAutoSortSection("dom",s,a),t||(u.maybeAddLogicAdjustedFlag(s.sectionSlug,a),P.ajax_save_settings({settings:a})),I.endT(arguments),e},folders_scrollable_area:function(){return L.stat.mainMenu.children(".menu-scrollable")},action_rename_section:function(e){I.startT(arguments);var t=L.get_meta_for_context(e,"section","folder-popup"),s=e.closest(".edit-section-form").find(".edit-section-label-input").val(),r={};if(I.convert_to_param(s)==t.sectionSlug)r.newName=t.sectionSlug,r.newNameHuman=s;else if(!(r=I.new_name_checks(s,"folder")))return!1;L.rename_section_updates(t,r,e),I.endT(arguments)},rename_section_updates:function(e,t,s,r){var a=e.sectionM.find("input.section-data-label").val(),o=t.newName,n=t.newNameHuman,i=e.sectionSlug,l=e.sectionM.add(e.section);L.iframeEditing()&&(l=l.add(D(y.get_style_nodes(e))));t=L.is_cur("section",i);if(L.dom_replacements(e,"section",l,i,o,n),e=L.get_meta(D("#strk-"+o),"section"),t&&L.update_global_vars(L.get_meta(e.section.find("li.in-focus"),"selector")),r)return!1;L.logicTextareaChanged||L.close_context_menu({filter:".cm-edit-folder-options"}),L.context_menu_data&&".cm-edit-folder-options"===L.context_menu_data.filter&&(L.context_menu_data.M=e);r=w.modify_main_js_object("rename",{},{rebuild:!0,callbackDepth:["section"],maxDepth:"section",targetDepth:"section",targetSection:i,new_key:o,new_label:n}),o="";a!=n&&(o+=TvrLang.previous_name+": "+a+"\n",o+=TvrLang.new_name+": "+n),r=P.user_action(r,{items:["section"],val:L.title(s),M:e,valTT:o,icon:[{icon:L.hi.section},{icon:"edit-icon tvr-icon"}]}),L.updateFolderLoading("rename",i,{slug:e.sectionSlug}),P.ajax_save_settings({settings:r})},copy_section:function(e){I.startT(arguments);var t=L.get_meta_for_context(e,"section");L.maybe_save_draft_selector_before_action(t,"section","copy"),P.log_action(t.sectionM,"copy");var s=t.sectionSlug,r=t.sectionH,a=I.resolve_unique_name(t.sectionH,D("#tvr-menu"),".section-name","Copy"),o=I.convert_to_param(a),n=!1,i=[t.sectionM[0],t.section[0]];L.iframeEditing()&&(n=y.get_style_nodes(t),i=i.concat(n));i=L.dom_replacements(t,"section",L.proper_clone(D(i)),s,o,a),i=L.reset_copied_active_classes(i);t.sectionM.after(i[0]),t.section.after(i[1]),L.iframeEditing()&&y.insertCopiedStyleNodes(n,i);s=w.modify_main_js_object("copy",{},{M:t,targetDepth:"section",maxDepth:"section",origSlug:s,origHuman:r,newSlug:o,newHuman:a}),s=w.reorder_after_copy(s,t.sectionM,!0),r=D("#section-count-state"),o=t.sectionM.find("span.selector-count-state").attr("rel");L.update_count(r,"add",1,"section",o),P.unlog_action(t.sectionM,"copy"),I.hasValue(L.selInFocusID)&&L.update_prev_next_sel_buttons(L.selInFocusID),L.refresh_sortable(),s=P.user_action(s,{items:["section"],val:L.title(e),M:t,valTT:a,icon:e.attr("class")}),u.maybeAddLogicAdjustedFlag(t.sectionSlug,s),P.ajax_save_settings({settings:s}),I.endT(arguments)},delete_section:function(e,t){I.startT(arguments);var s=L.get_meta_for_context(e,"section");if(P.action_in_prog(s.sectionM,"delete")||P.action_in_prog(s.sectionM,"all-sels-loading"))return!1;if(0<I.obj_length(L.uiData[s.sectionSlug],{exclKey:"this"})&&!confirm(tvrsprintf(TvrLang.delete_folder_confirm,s.sectionH)))return!1;P.log_action(s.sectionM,"delete"),s.sectionM.fadeOut("fast",function(){L.action_delete_section(s,t,e)}),I.endT(arguments)},action_delete_section:function(e,t,s){var r=e.sectionM.find("span.selector-count-state").attr("rel");L.update_count(D("#section-count-state"),"subtract",1,"section",r);var a,o=I.hasValue(L.selInFocusID)&&L.is_cur("section",e.sectionSlug);o&&(a=(a=L.itemScan("selector","next","getID",e.sectionSlug))||L.itemScan("selector","prev","getID",e.sectionSlug)),e.section.remove(),e.sectionM.remove(),y&&y.edit_style_nodes(e,"delete");r=w.modify_main_js_object("delete",{},{rebuild:!0,maxDepth:"section",targetDepth:"section",targetSection:e.sectionSlug});L.after_style_options_deleted("section"),L.close_context_menu({filter:".cm-edit-folder-options"}),o&&!t&&a&&L.tvr_iterate_selectors_v(!1,a,{doNotBringStylesTop:1}),a||L.update_prev_next_sel_buttons(!1),t||(r=P.user_action(r,{items:["section"],val:L.title(s),M:e,icon:s.attr("class")}),u.maybeAddLogicAdjustedFlag(e.sectionSlug,r),L.updateFolderLoading("delete",e.sectionSlug),P.ajax_save_settings({settings:r}))},updateFolderLoading:function(e,t,s){let r=!!y&&y.getMTDynFrontData().folderLoading;if(r&&void 0!==r[t])switch(e){case"delete":delete r[t];break;case"rename":r[s.slug]=r[t],delete r[t]}},toggle_folder_add_options:function(e){L.toggle_context_menu({$clicked:e,filter:".cm-add-folder-options",relatedto:"folders",offsetSpacingLeft:0,noWidthOffset:!0,after_open:function(e){e.$content.find("input.add-section-label-input").focus()},after_close:function(e){e.$content.find("input.add-section-label-input").val("")}})},toggle_folder_more_options:function(e){var s=e.data("level"),t=e.parent().hasClass("current-item-actions"),r=t?L.get_selector_in_focus():L.get_meta(e,s);r[s+"M"];"section"===s?L.toggle_context_menu({M:r,$clicked:e,filter:".cm-edit-folder-options",relatedto:"folders",isCurrentItem:t,offsetSpacingTop:0,widthEstimate:560,heightEstimate:485,before_open:function(e){(L.retargetSelector||L.draftSelector.atts.id)&&L.save_draft_selector(L.retargetSelector,!0),e.$content.find("input.edit-section-label-input").val(r.sectionH),L.ensure_correct_disabled_state(r,s,e);var t=L.uiData[r.sectionSlug]?L.uiData[r.sectionSlug].this.logic:void 0;t?u.updateLogicFields("loadSettings",e.$content,t):u.reset_logic_fields(e.$content)},after_close:function(e){e.$content.find("input.selector-css-textarea, input.selector-name-input").val(""),u.reset_logic_fields(e.$content)}}):L.toggle_context_menu({M:r,$clicked:e,filter:".cm-selector-options",relatedto:"folders",widthEstimate:400,heightEstimate:351,before_open:function(e){L.update_edit_selector_fields(r,s,e)}}),I.clearSelection(L.stat.win,L.stat.doc)},draftInProgress:function(){return L.draftSelector.atts.id||L.retargetSelector},binary_button_clicked:function(e){var t=!!parseInt(e.attr("rel")),s=e.closest(".mt-binary-buttons"),r=s.children('input[type="checkbox"]').first(),a=!s.hasClass("on"),o=t==a,n=s.data(),t=n.run;o&&(n.toggleFeature&&L.toggle_feature(s),a?(s.addClass("on"),r.prop("checked",!0)):(s.removeClass("on"),r.prop("checked",!1))),t&&(o||s.data("always-run"))&&u[t](e,s.hasClass("on")?"page":"global",o)},edit_selector_fields_showing:function(){return L.context_menu_data&&".cm-selector-options"===L.context_menu_data.filter},update_edit_selector_fields:function(e,t,s){s.$content.find("input.selector-name-input").val(e.selectorH),s.$content.find("input.selector-css-textarea").val(e.selectorCode),L.ensure_correct_disabled_state(e,t,s),L.generate_selector_variations(s)},ensure_correct_disabled_state:function(e,t,s){var r=s.$content.find(".manage-"+t+"-icons").find(".disabled-toggle"),s=r.prev(".disabled-tracker"),t=L.is_dis(e[t+"M"]);r.removeClass("active"),I.isDomEl(s)&&s.remove(),t&&L.input_icon_toggle(r,!1,!0)},toggle_editor_options:function(e){L.toggle_context_menu({$clicked:e,filter:".cm-editor-options",offsetSpacingLeft:0,noWidthOffset:!0})},toggle_responsive_tab_options:function(o){L.toggle_context_menu({$clicked:o,filter:".cm-responsive-tab-options",offsetSpacingLeft:(o.parent().outerWidth()+2-o.outerWidth())/2*-1,offsetSpacingTop:30,noWidthOffset:!0,before_open:function(e){var t=o.closest(".mt-tab"),s=t.attr("rel"),r=TvrMQsCombined[s];e.$content.find(".edit-responsive-tab-label-input").val(r.label),e.$content.find(".edit-responsive-tab-query-input").val(r.query),"all-devices"===s?e.$content.addClass("all-devices-tab-actions"):e.$content.removeClass("all-devices-tab-actions");var a=e.$content.find(".disabled-toggle");t.hasClass("item-disabled")?a.addClass("active"):a.removeClass("active"),e.mq_key=s,e.Tab=r,e.M=L.get_selector_in_focus()}})},update_single_responsive_tab:function(e){var t=L.context_menu_data,s=t.$content.find(".edit-responsive-tab-label-input").val(),r=t.$content.find(".edit-responsive-tab-query-input").val(),t=D("#mqs-"+t.mq_key);t.find(".mquery-label").val(s),t.find(".mquery-query").val(r),P.save_media_queries()},selector_checks_values:function(e,t,s,r){I.startT(arguments);var a=L.strip_beyoned_brace(e,"name"),o=TvrLang.untitled,n={};return I.isNumeric(a=""===a?o:a)?(alert("Plain numbers are not permitted as names. Please use some letters too."),!1):(I.convert_to_param(a)===s?(n.newName=s,n.newNameHuman=a):(n.newNameHuman=L.ensure_unique_name(a,!1,"create-new",!1,r),n.newName=I.convert_to_param(n.newNameHuman)),t?(n.code=t,I.endT(arguments),n):(alert(TvrLang.enter_css),!1))},show_hide_sel_custom:function(e,t){I.startT(arguments),L.analyse_sel_code(e).custom_styles?t.addClass("custom-styles"):t.removeClass("custom-styles"),I.endT(arguments)},analyse_sel_code:function(e){I.startT(arguments);var t,s=[];return 0<=e.indexOf("{")?(s.custom_styles=!0,t=e.split("{"),s.code=t[0]):(s.custom_styles=!1,s.code=e),I.endT(arguments),s},add_selector:function(e,t,s,r){I.startT(arguments),r=r||{},e=e||L.get_meta_for_context(t,"section","folder-popup");var a=t.closest(".mt-folder-form");if(!L.allowed_action(e,"Add Sel"))return!1;var o=L.selector_checks_values(a.find(".selector-name-input").val(),L.strip_beyoned_brace(a.find(".selector-css-textarea").val()),!1,e.sectionSlug);if(!o)return!1;e.sectionM.hasClass("is-open")||L.open_folder(e);var n=o.newName,i=L.dom_replacements(e,"selector",D(L.templates.selectorM).add(L.templates.selector),"selector_section",e.sectionSlug,e.sectionM.find(".name-text").text(),"selector_css",n,o.newNameHuman,o.code),l=D(i[1]),a=L.pref.pg_focus;w.maybe_add_group_template(l,e.sectionSlug,o.newName,o.newNameHuman,o.code,e.tabSlug,a),F.editor_and_gui()&&"code"!==a&&w.maybe_add_group_template(l,e.sectionSlug,o.newName,o.newNameHuman,o.code,e.tabSlug,"code"),e.sectionM.find(".selector-sub").append(i[0]),e.section.find(".selector-sub").append(l),L.update_count(e.sectionM.find(".selector-count-state"),"add",1,"selector",""),e=L.get_meta(e.section.find(".selector-tag").last(),"selector");a=E.dom_to_data({M:e,domDepth:"selector",keepAsDraft:s,clean:{selector:[["styles"],[a]]},cleanMaxDepth:"selector",skipSassCompile:!0});return s&&(L.draftSelector.atts=L.selector_key_atts(e),w.updateObjectAndSavePackage(a.savePackage,[{action:"append",trail:[e.sectionSlug,n],key:"isDraft",data:1}])),a=w.run_global_scans(a,["update_indexes"]),w.updateObjectAndSavePackage(a.savePackage,[{action:"append",trail:[e.sectionSlug,n],key:"jsu",data:L.jsuVersion}]),r.action="add_draft_selector",r.elementAlreadySelected=1,L.tvr_iterate_selectors_v(e.selectorM,!1,r),L.refresh_sortable(),r.switchSelVariation||L.close_context_menu({filter:".cm-edit-folder-options"}),O.maybe_resume_editor_focus(),P.user_action(s?L.draft_user_action.new:a,{items:["selector"],val:L.title(t),M:e,pathTT:!0,icon:"mtif-add"}),u.maybeAutoSortSelector("dom",e,a),s?L.scrollIntoView(L.folders_scrollable_area(),e.selectorM):P.ajax_save_settings({settings:a}),I.endT(arguments),!0},load_selector:function(e,t){I.startT(arguments);var s=[];if(t.items){var r=!1,a=t.pg_focus||L.pref.pg_focus,o=F.editor_and_gui()&&"code"!==a;if(t.replaceExisting){var n=this.get_code_meta(e);if(I.isDomEl(n.$property_fields)){if("code"===a)return e.selector.find(".group-tag").not(n.$group).remove(),e.selector;r=n.$property_fields.detach()}}for(var i=0;i<t.items.length;i++){var l,c,d,_=t.items[i],u="selectorM"===_?"selector":"property",p="#"+("selectorM"===_?"strk":"opts")+"-"+e.sectionSlug,g=p+"-"+e.selectorSlug,f=D(g);f.length&&!t.replaceExisting||(e.groupSlug=a,c={M:e,load:"selector",templateKey:_,maxDepth:u,callbackDepth:["selector","group","property"]},l=t.mq_key||L.get_mq_focus(),"selector"===_?("all-devices"===l?c.recurse_key=["important"]:c.onlyRecurse=!0,c.mq_key=l):"selectorM"===_&&(c.incRecurse=!1),"selectorM"===_?f=E.data_to_template(e,c):"selector"===_&&(L.stat.styleComponents.html(""),(u=(g=(f=w.get_selector_data(e,l).data?E.data_to_template(e,c):L.dom_replacements(!1,"selector",D(L.templates.selector),"selector_section",e.sectionSlug,!1,"selector_css",e.selectorSlug,e.selectorH,e.selectorCode)).find(".group-tag-"+a)).find("div.property-fields-"+l)).length||(w.maybe_add_group_template(f,e.sectionSlug,e.selectorSlug,e.selectorH,e.selectorCode,l,a),u=g.find("div.property-fields-"+l),"flexbox"!==a&&"grid"!==a||(_=w.get_js_object_data([e.sectionSlug,e.selectorSlug],"all-devices"),I.checkObject(_.data,["pg_"+(c="flexbox"===a?"flexitem":"griditem")])&&(w.flip_flex_or_grid_item_switch(u,u.find(".subgroup-control-"+("flexbox"===a?"flexcontainer":"generalgrid")),_.levels,c),u.add(L.stat.grid).addClass("show-single-griditem"),"grid"===a&&(L.pref.grid_focus="griditems")))),"grid"===a&&(u=w.get_js_object_data([e.sectionSlug,e.selectorSlug],"all-devices").data,d=L.get_nth_focus(u),g.find(".tab-control-griditems:not(.nth-item-radios):not(.sub-label)").find("input.property-input").each(function(){var e=D(this);e.attr("name",I.replace_variable_name_attr(e.attr("name"),d))}),d&&g.find("span.grid-item-num").text(": "+d)),o&&L.addOrAttachCodeTextarea(f,e,l,r),F.sidebar_showing()&&g.addClass("show"),f.addClass("in-focus")),t.replaceExisting?D("#"+t.replaceExisting).replaceWith(f):D(p).find(".selector-sub").append(f)),s[i]=f}}return I.endT(arguments),1<s.length?s:s[0]},loadOrReloadEditor:function(){var e,t,s,r;L.pref.show_code_editor||"code"!==L.pref.pg_focus&&!F.editor_and_gui()||L.editor_to_gui_running||(e=L.get_selector_in_focus())&&(t=e.selector,s=e.tabSlug,r=L.detachCodeTextareaIfLoaded(e),L.addOrAttachCodeTextarea(t,e,s,r),O.update_adaptable_editor({M:e,directContent:E.resolve_inline_editor_content(e),mode:parseInt(L.pref.allow_scss)?"scss":"css"}),I.action_after_timeout("mt_panel_change",70,{item:F.modify_active_editors,args:[{resize:!0,updateHeight:F.horizontal_only()}]}))},detachCodeTextareaIfLoaded:function(e){e=this.get_code_meta(e);return!!I.isDomEl(e.$property_fields)&&e.$property_fields.detach()},addOrAttachCodeTextarea:function(e,t,s,r){r?e.find(".group-tag-code").append(r):w.maybe_add_group_template(e,t.sectionSlug,t.selectorSlug,t.selectorH,t.selectorCode,s,"code")},get_sel_abs_index:function(e,t){return 0},get_nth_focus:function(e){var t;e||(t=L.getM(),e=L.uiData[t.sectionSlug][t.selectorSlug]);e=I.checkObject(e,["nth_item"]);return!1===e?1:parseInt(e)},getM:function(){return L.get_meta(D("#"+L.selInFocusID),"selector")},strip_beyoned_brace:function(e){return void 0!==e&&(e=e.split("{"))[0]?(e=e[0]).trim():""},getOrCreateFolder:function(e,t){L.totalSels<1&&""===e&&(e=L.default_to_folder());var s=I.convert_to_param(e);if(!I.isDomEl(D("#strk-"+s))){t=L.add_section(e,t);if(!t)return!1;s=I.convert_to_param(t)}return L.get_meta(D("#strk-"+s),"section")},action_modify_selector:function(e,t,s,r,a,o,n){I.startT(arguments),L.jsDataFunc="action_modify_selector",e=e||L.get_meta_for_context(t,"selector","folder-popup");var i=t.closest(".mt-folder-form"),l=(s=s||{}).switchSelVariation,c=L.selector_checks_values(i.find(".selector-name-input").val(),L.strip_beyoned_brace(i.find(".selector-css-textarea").val()),e.selectorSlug,r?I.convert_to_param(r):e.sectionSlug);if(!c)return I.endT(arguments),L.jsDataFunc=!1;var d=e.selectorM.find(".selector-label").val().split("|"),_=d[0],u=d[1],p=e.selectorSlug,g=u!==c.code,f=c.newName,m=c.newNameHuman,i=e.sectionSlug,d=e.selectorM.add(e.selector);L.dom_replacements(e,"selector",d,i,i,e.sectionH,p,f,m,c.code),d.find("input.color.bound").removeClass("bound").css("display","").next(".sp-replacer").remove(),L.stat.styleComponents.find(".sp-container").remove(),s=w.modify_main_js_object("rename",{keepAsDraft:o,skipSave:n,switchSelVariation:l},{rebuild:!0,callbackDepth:["section","selector"],maxDepth:"selector",targetDepth:"selector",targetSection:i,targetSelector:p,new_key:f,new_label:m,new_code:c.code,orig_code:u});L.is_cur("selector",e.selectorID)&&L.update_global_vars(L.get_meta(e.section.find("li.in-focus"),"selector"),s),L.iframeEditing()&&!L.doNotReselectRevertedRetargetSel&&y.reposition_overlays({con:"reg"}),e=L.get_meta(e.selectorM,"selector"),s=w.modify_main_js_object("group_to_css",s,{M:e,maxDepth:"group",recurse_key:["m_query"],triggeredFromEditor:a,selCodeChanged:g&&{oldCode:u,newCode:c.code},skipSave:n}),a||O.update_adaptable_editor({M:e,directContent:E.resolve_inline_editor_content(e),contentShouldChange:!0}),L.retargetSelector&&!L.retargetSelector.initialModifySavePackage?L.retargetSelector.initialModifySavePackage=D.extend(!0,[],s.savePackage):L.retargetSelector.lastModifySavePackage=D.extend(!0,[],s.savePackage);g=s.savePackage.length;if(r){I.startT("action_modify_selector new folder");var v=L.getOrCreateFolder(r,o);if(!v)return I.endT(arguments),!1;v.sectionM.find("> .sec-row .folder-icon").hasClass("on")||L.open_folder(v),e.sectionM.find("> .sec-row .folder-icon").hasClass("on")||L.open_folder(e),I.startT("action_modify_selector new folder - dom order"),e=L.get_meta(D("#"+e.selectorMID),"selector"),s=L.get_dom_order(s,e.selectorM,{prevSec:"",newSec:"",orig_order:["this"],new_order:["this"],map:[]},!1,!0),e.selectorM.detach().appendTo(v.sectionM.find("ul.selector-sub")),e=L.selector_received({},{item:e.selectorM,draftSelectorFolderCreated:1,doNotUpdateSelectorSuggestions:1}),s=L.get_dom_order(s,e.selectorM,L.menuOrder,!0,!0),I.endT("action_modify_selector new folder - dom order"),L.retargetSelector&&(L.retargetSelector.initialFolderMoveSavePackage?L.retargetSelector.lastFolderMoveSavePackage=s.savePackage.slice(g):L.retargetSelector.initialFolderMoveSavePackage=s.savePackage.slice(g)),I.endT("action_modify_selector new folder")}l||L.close_context_menu({filter:".cm-selector-options"});v="",g=TvrLang.selector_modified,l="mtif-edit";L.retargetSelector&&o&&(_=L.retargetSelector.selectorH,u=L.retargetSelector.selectorCode,p=L.retargetSelector.selectorSlug),_!==m&&(v+=TvrLang.previous_name+": "+_+"\n",v+=TvrLang.new_name+": "+m),u!==c.code&&(v+=v?"\n":"",v+=TvrLang.previous_code+": "+u+"\n",v+=TvrLang.new_code+": "+c.code);c=s;return o&&(c=L.retargetSelector?(I.checkObject(L.uiData,[e.sectionSlug,e.selectorSlug,"isDraftRetarget"])||w.updateObjectAndSavePackage(s.savePackage,[{action:"append",trail:[e.sectionSlug,e.selectorSlug],key:"isDraftRetarget",data:L.retargetSelector}]),L.draft_user_action.retarget):(L.draftSelector.atts=L.selector_key_atts(e),v=TvrLang.selector_created+": "+m,l="mtif-add",g=TvrLang.selector_created,L.draft_user_action.new)),L.dontLogSelectorChange||P.user_action(o?c:s,{items:["selector"],val:g,M:e,valTT:v,pathTT:!0,icon:l}),o||n||P.ajax_save_settings({settings:s,timerName:"modify_selector_"+i+"_"+p}),I.endT(arguments),!(L.jsDataFunc=!1)},proper_clone:function(e){I.startT(arguments);var t=e.clone();return t.find("div.sp-replacer, div.sp-container").remove(),t.find("input.color.bound").removeClass("bound"),L.colorpicker_bind(t),I.endT(arguments),t},reset_copied_active_classes:function(e){return e.each(function(){var e=D(this);e.removeAttr("copy-in-prog").removeClass("in-focus").find("li.in-focus").removeClass("in-focus"),e.find(".toggle-folder-more-options").removeClass("on")}),e},maybe_save_draft_selector_before_action:function(e,t,s){var r;(L.retargetSelector||L.draftSelector.atts.id)&&(r=L.retargetSelector||L.draftSelector.atts,("selector"===t&&e.selectorID===r.id||"section"===t&&e.sectionSlug===r.sectionSlug)&&L.save_draft_selector(L.retargetSelector,!0))},copy_selector:function(e){var t=L.get_meta_for_context(e,"selector");if(!L.allowed_action(t,"Add Sel"))return!1;var s=L.load_selector(t,{items:["selector"]}),t=L.get_meta(s,"selector");L.maybe_save_draft_selector_before_action(t,"selector","copy");var r=t.selectorSlug,a=t.selectorH,o=I.resolve_unique_name(t.selectorH,t.sectionM,".selector-name","Copy"),n=I.convert_to_param(o),s=L.dom_replacements(t,"selector",L.proper_clone(D([t.selectorM[0],t.selector[0]])),t.sectionSlug,t.sectionSlug,a,r,n,o,t.selectorCode),s=L.reset_copied_active_classes(s);t.selectorM.after(s[0]),t.selector.after(s[1]);a=w.modify_main_js_object("copy",{},{M:t,targetDepth:"selector",maxDepth:"selector",origSlug:r,origHuman:a,newSlug:n,newHuman:o}),a=w.reorder_after_copy(a,t.selectorM,!0);a=w.modify_main_js_object("update_section_css",a,{M:t,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]}),L.update_count(t.sectionM.find(".selector-count-state"),"add",1,"selector",""),I.hasValue(L.selInFocusID)&&L.update_prev_next_sel_buttons(L.selInFocusID);n="#strk-"+t.sectionSlug+"-"+n;L.tvr_iterate_selectors_v(D(n),n,{action:"copy",doNotBringStylesTop:1}),a=P.user_action(a,{items:["selector"],val:L.title(e),M:t,pathTT:!0,valTT:o,icon:e.attr("class")}),P.ajax_save_settings({settings:a})},delete_selector:function(e,t){I.startT(arguments);var s=L.get_meta_for_context(e,"selector");if(P.action_in_prog(s.selectorM,"delete")||P.action_in_prog(s.selectorM,"data-load"))return!1;P.log_action(s.selectorM,"delete"),L.close_context_menu({filter:".cm-selector-options"}),s.selectorM.fadeOut("fast",function(){L.action_delete_selector(s,t,e)}),I.endT(arguments)},action_delete_selector:function(e,t,s){var r,a=I.hasValue(L.selInFocusID)&&L.is_cur("selector",e.selectorID);L.update_count(e.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),a&&(r=(r=L.itemScan("selector","prev","getID",e.sectionSlug,e.selectorSlug,{incCurrentSection:!0}))||L.itemScan("selector","next","getID",e.sectionSlug,e.selectorSlug,{incCurrentSection:!0})),e.selector.remove(),e.selectorM.remove();var o=w.modify_main_js_object("delete",{},{rebuild:!0,callbackDepth:["section","selector"],maxDepth:"selector",targetDepth:"selector",targetSection:e.sectionSlug,targetSelector:e.selectorSlug}),o=w.modify_main_js_object("update_section_css",o,{M:e,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]});L.after_style_options_deleted("selector"),o=L.js_check_values(o,e),a&&r&&!t&&L.tvr_iterate_selectors_v(!1,r,{doNotBringStylesTop:1}),r||L.update_prev_next_sel_buttons(!1),O.ace_sync_details={},t||(o=P.user_action(o,{items:["selector"],val:L.title(s),M:e,pathTT:!0,icon:s.attr("class")}),P.ajax_save_settings({settings:o}))},remove_property_group:function(e,t){I.startT(arguments);var s=e.group.find("div.property-fields-"+t);return s?(s.remove(),I.endT(arguments),!0):(I.endT(arguments),!1)},update_accordion:function(e){var t=e.parent(),s=t.closest(".accordion-wrapper").find(".accordion-heading").not(e),e=t.hasClass("property-menu");s.removeClass("expanded"),e&&(L.pgInFocusWiz=t.attr("id").replace("comp-",""),I.isDomEl(y.triggerEl)&&y.getAndUpdateCompStyles(!0,!0,void 0,"obj"))},toggle_expandable_panel:function(e){var t="open",s=e.attr("rel"),r=L.pref.layout.right.expanded_settings;e.hasClass("accordion-heading")&&L.update_accordion(e),e.hasClass("expanded")?(e.removeClass("expanded"),t="close"):e.addClass("expanded");e=I.in_array(s,r);"open"===t?!1===e&&r.push(s):r.splice(e,1),F.save_layout_preferences()},trigger_pg_icon_click:function(e){e=e||L.pref.pg_focus,L.dontSavePgFocus=!0,L.pg_icon_pressed(L.stat.css_icons.find("ul.styling-option-icons").find(".pg-icon-wrap-"+e)),L.dontSavePgFocus=!1},pg_icon_pressed:function(e,t,s){I.startT(arguments);var r=D("#"+L.selInFocusID);if(!I.isDomEl(r))return!1;e=e.closest(".pg-icon-wrap");var a=L.get_mq_focus(),o=e.attr("rel"),n=L.get_meta(r,"selector");L.pref.pg_focus=o;r=(n=L.ensure_selector_and_pg_loaded(n,t,a,o)).selector.find(".styling-options"),a=L.stat.css_icons.find(".styling-option-icons");L.update_tab(r,".group-tag",a,o,".pg-icon-wrap",".pg-focus"),"grid"!==o&&"transform"!==o||L.js_check_values({},n),L.after_tab_switch(n,s),F.editor_and_gui()&&F.maybe_adjust_side_options(),I.action_after_timeout("pg_expensive",3,{item:function(e){L.iframeEditing()&&y.get_computed_styles({data:L.curSelCSS,con:"str",M:e}),L.refresh_comp_css()},args:[n]}),L.dontSavePgFocus||P.simple_ajax_request({type:"GET",url:L.ajaxUrl+"&pg_focus="+o}),I.endT(arguments)},ensure_selector_and_pg_loaded:function(e,t,s,r){return t||L.load_selector(e,{items:["selector"],replaceExisting:e.selectorID,mq_key:s}).addClass("in-focus"),L.get_meta(L.get_pg_focus_obj(r),"group")},clear_data_level:function(e,t){I.startT(arguments);var s,r=e.attr("data-input-level"),a="pgtab"===r,o=a?"group":r;if(!t&&("tab"===r?(s=D("#"+L.selInFocusID),I.isDomEl(s,!0)&&(t=L.get_meta(s,"selector"))):t=L.get_meta_for_context(e,o),!t))return;var n,i={M:t,clear:{},clean:{}},l=["styles","pie","pg_chained","pg_flexitem","pg_griditem","ast"];t.selectorSlug;switch(r){case"section":var c=t.section.find("div.property-tag");if(i.clear.section=[!1,l],0<I.obj_length(L.uiData[t.sectionSlug],{exclKey:"this"}))if(!confirm(tvrsprintf(TvrLang.clear_folder_confirm,t.sectionH)))return!1;break;case"selector":L.maybe_save_draft_selector_before_action(t,"selector","clear"),c=t.selector.find("div.property-tag"),i.clear.selector=[l];break;case"tab":var d=t.tabSlug;c=t.selector.find("div.property-fields-"+d).find("div.property-tag"),i.mq_key=d,i.onlyRecurse="all-devices"!==d,i.clear.selector=[l];break;case"group":case"pgtab":case"subgroup":i.mq_key=t.tabSlug,"all-devices"===i.mq_key?i.recurse_key=["important"]:i.onlyRecurse=!0,i.clear.selector=[["styles"],[t.groupSlug]],"group"===r||"flexbox"===t.groupSlug?c=L.get_group(t).find("div.property-tag"):(n=a&&e.data("tab-group"),d=a?Object.keys(TvrMT.data.prog.pg_tab_props[t.groupSlug][n]):TvrMT.data.prog.subGroupKeys[t.subgroupSlug],c=L.get_subgroup_or_tabgroup(t,!1,n),i.clear.selector.push(d),L.maybe_add_nth_index_filter(a,n,t,e,i.clear.selector)),"pgtab"===r&&(r="group")}L.clear_fields(c,e,r,t,i),i=w.modify_main_js_object("clear",i,{maxDepth:"selector",dontUpdateSavePackage:!0}),i=w.modify_main_js_object("group_to_css",i,{maxDepth:"group",recurse_key:["m_query"]}),i=w.modify_main_js_object("clean",i,{maxDepth:"selector",clean:i.clear}),i=L.js_check_values(i,t),F.editor_and_gui()&&O.gui_to_editor(!1,t),i=P.user_action(i,{items:[r],val:L.title(e),M:t,pathTT:!0,icon:[{icon:P.h_i_class(r,t)},{icon:e.attr("class")}]}),P.ajax_save_settings({settings:i}),I.endT(arguments)},clear_fields:function(e,t,s,o,r){I.startT(arguments),e.each(function(){var e=D(this),t=e.prev(".subgroup-tag"),s=e.find("input.property-input, input.mt-supplementary-picker, textarea.property-input"),r=e.find("span.important-toggle"),a=e.hasClass("has-variable-line");s.val(""),a&&e.find(".tvr-input-wrap:not(:first-child)").remove(),s.hasClass("color")&&L.clear_spectrum_inputs(L.get_meta(e,"property"),!1),s.hasClass("mt-event-input")&&L.adjust_event_fields(s),s.hasClass("tvr-editor-hidden")&&L.is_cur("selector",o.selectorID)&&(a=L.stat.adaptableEditor,e=O.eds[a.attr("id")],a.hasClass("ace_editor")&&e&&O.set_editor_content(a,e,{M:o})),L.post_edit(s),r.hasClass("active")&&L.input_icon_toggle(r,!0,!0),!I.isDomEl(t)||(t=t.find(".chained-toggle")).hasClass("active")&&L.input_icon_toggle(t,!0,!0)}),I.endT(arguments)},getReportingStatus:function(e){var t=TvrMT.data.dyn.ui_config.reporting.max,s=L.pref.reporting,r=s.permission,a=r.file,o=r.data,n=r.contact,i=!e&&!a&&!o,r=!e&&parseInt(s.file.sends_today)>=parseInt(t.fileSends),e=!e&&parseInt(s.data.sends_today)>=parseInt(t.dataSends);return{max:t,filePermission:a,dataPermission:o,contactPermission:n,disallowed:i,fileQuotaReached:r?1:0,dataQuotaReached:e?1:0,allQuotaReached:r&&e?1:0,reporting:s}},strip_domain_names:function(e){return e?e.replace(/(https?:)?\/\/[^\/]+/g,""):""},toggle_preview_error_report:function(){let e=D("#toggle-preview-report-data"),t=D("#data-send-preview"),s="show-data-preview";e.hasClass("on")?(t.removeClass(s),e.removeClass("on")):(t.addClass(s),e.addClass("on"),L.update_error_report_preview())},update_error_report_preview:function(){if(L.stat.tvr.hasClass("error_reporting_disabled"))return D("#data-send-preview").find("pre").text("No data will be sent."),!1;L.maybe_send_error_report(!0,D("#data-send-preview").find(".report-data-dump"),{URL:"http://localhost:8080/microthemer/wordpress/wp-content/plugins/microthemer/js/page/frontend.js?v=7.2.3.8&ver=6.2.2",line:635,col:7,file:"frontend.js",source:"Site frontend",error:"Uncaught ReferenceError: cons is not defined",error_key:"frontend.js|635|7|Uncaught ReferenceError: cons is not defined",stack:"ReferenceError: cons is not defined\n    at Object.init_front (/microthemer/wordpress/wp-content/plugins/microthemer/js/page/frontend.js?v=7.2.3.8&ver=6.2.2:635:7)\n    at mt_frontend_setup_vars_and_init (/microthemer/wordpress/wp-content/plugins/microthemer/js/page/frontend.js?v=7.2.3.8&ver=6.2.2:7123:10)"},!0)},maybe_send_error_report:function(e,t,s,a){if(e){if(L.stat.tvr.hasClass("error_reporting_disabled"))return alert("Please enable one or more error reporting options to give us permission to send data"),!1;t.removeClass("mt-error-response mt-success-response").addClass("active")}let o=L.getReportingStatus(e);if(o.disallowed||o.allQuotaReached)return!1;let r=a?[s]:L.reportedJSErrors.length?L.reportedJSErrors:L.prevJSerrors.length?L.prevJSerrors:L.JSerrors,n=null,i=null,l=s?s.URL.match(/wp-content\/(plugins|theme)\/([^/]+)/):null;l&&(i=l[1],n=l[2]);var c=r.length?r[0]:null,d=c?c.error:null,_=c?c.stack:null,u=c?c.error_key:null;if(!e&&c&&!c.URL)return!1;let p=window.navigator.userAgent,g=p.match(/(Windows|Android|Linux|iPhone|iPad|iPod|Mac|UNIX|Googlebot|MSNBot)/),f=p.match(new RegExp(L.browser+"\\/([\\d.]+)","i")),m=f?f[1]:null,v=g?g[1]:null,h={manual:e?1:0,domain:location.host,context:{browser:L.browser,browserVersion:m,op:v,userAgent:p},error_message:d,error_stack:_,error_key:u,vendor:n,vendor_type:i,preview:a?1:0};if(a||o.fileQuotaReached||++o.reporting.file.sends_today,o.dataPermission&&!o.dataQuotaReached&&(e||TvrMT.data.dyn.ui_config.errorsRequiringData[u])&&(!s||L.isMTerror(s.URL))){let t=["options_live","preferences"],s=0,r=o.max[e?"manual":"auto"].bytes;for(let e=0;e<t.length;e++){var b=t[e],y="options_live"===b?P.serialiseJsObject(L.uiData):P.serialiseJsObject(L.download_preferences(!0,!0)),S=y.length;if(s+=S,r&&s>r)break;h[b]=y}a||o.dataQuotaReached||++o.reporting.data.sends_today}h.status=o,h.reporting=o.reporting,P.simple_ajax_request({url:L.ajaxUrl+"&send_error_report=1",type:"POST",dataType:"json",sendData:h,cbFunction:function(e,t,s){t&&(t=e.success?"mt-success-response":"mt-error-response",s.removeClass("active").addClass(t),a&&D("#data-send-preview").find("pre").text(e.response))},cbfArgs:[e,t]}),a||(L.reportedJSErrors=[])},external_video_clicked:function(e,t){let s=e.closest(".mt-video-thumbs"),r=e.closest(".external-video-thumb"),a=r.data("slug"),o,n=!0;var i,l;L.pref.external_videos.last_viewed||(L.pref.external_videos.last_viewed={}),L.pref.external_videos.watched||(L.pref.external_videos.watched={}),e.hasClass("external-video-watched-toggle")&&(o="mt-watched-video",l=(i=!r.hasClass(o))?e.data("neg"):e.data("pos"),i?(r.addClass(o),L.pref.external_videos.watched[a]=1):(t.preventDefault(),r.removeClass(o),delete L.pref.external_videos.watched[a],n=!1),L.refresh_tt(e,l)),n&&(o="mt-last-viewed-video",s.find("a").removeClass(o),r.addClass(o),L.pref.external_videos.last_viewed=r.data("slug")),P.save_multiple_preferences({external_videos:L.pref.external_videos})},largeExportable:{my_props:1,layout:1},download_preferences:function(e,t){let s=TvrMT.data.prog.exportable_preferences,r={};for(let e=0;e<s.length;e++){var a=s[e];t&&L.largeExportable[a]||(r[a]=L.pref[a])}if(e)return r;I.downloadObjectAsJson("microthemer-preferences",r)},update_tab:function(e,t,s,r,a,o,n){I.startT(arguments);var i=s.find(a+"-"+r);s.find(a).removeClass("active").end().find(o).val(r),i.addClass("active"),n||(e.find(t+".show").removeClass("show"),e.find(t+"-"+r).addClass("show"),".mq-tab"===a&&e.addClass("show"),".pg-icon-wrap"===a&&e.find(t+"-"+r).find(".property-fields").removeClass("show").end().find(".property-fields-"+L.get_mq_focus()).addClass("show")),I.endT(arguments)},mq_tab_pressed:function(e,t,s,r){I.startT(arguments);var a=!(L.rulerManuallyAdjusted=!1),o="",n=e.attr("rel"),i=L.stat.res.find(".query-tabs");if(!r&&g.check_synced_page_builder_responsive_views(n))return!1;L.pref.mq_device_focus=n,P.simple_ajax_request({type:"GET",url:L.ajaxUrl+"&mq_device_focus="+n});var l,c,d=I.hasValue(L.selInFocusID);d&&(l=L.get_meta(L.get_pg_focus_obj(),"group"),l=L.ensure_selector_and_pg_loaded(l,t,n,L.pref.pg_focus),a=!1,o=".property-fields",c=L.get_pg_focus_obj()),L.update_tab(c,o,i,n,".mq-tab",".device-focus",a),d&&(L.js_check_values({},l),L.after_tab_switch(l)),I.action_after_timeout("mq_expensive",3,{item:function(e){L.reset_preview_width_for_current_tab(e,!1,s),L.get_local_window_function("reset_mob_previews")()},args:[n]}),I.endT(arguments)},resume_cur_slider_value:function(){},reset_preview_width_for_current_tab:function(e,t,s){e=e||L.get_mq_focus(),L.get_local_window_function("update_iframe_slider")(e,L.mqs[e].min,L.mqs[e].max,t,s)},after_tab_switch:function(e,t){var s,r;I.startT(arguments),t=t||{},"css"===e||L.pref.show_code_editor||(r="styles","code"===e.groupSlug?(L.stat.tvr.addClass("onlyInlineEditor"),L.onlyInlineEditor=1,r="editor"):(L.stat.tvr.removeClass("onlyInlineEditor"),L.onlyInlineEditor=0),"editor"===r&&!L.pref.dock_editor_left||"styles"===r&&!L.pref.dock_styles_left||t.doNotBringStylesTop||F.update_sidebar_z_indexes(r,"left"),F.adjust_preview_margin_and_save_config({skipPGPress:1,side:"left",skipSave:1}),r=L.iframeEditing()?L.stat.tvr.add(L.stat.fHTML):L.stat.tvr,"transform"===e.groupSlug&&L.default_to_tab("transform"),"grid"===e.groupSlug?(r.addClass("showGridControls"),L.default_to_tab("grid"),s="show-single-griditem",e.group.find(".property-grid").hasClass(s)?L.stat.grid.addClass(s):L.stat.grid.removeClass(s)):r.removeClass("showGridControls"),"code"!==e.groupSlug&&!F.editor_and_gui()||L.editor_to_gui_running||O.update_adaptable_editor({M:e,directContent:E.resolve_inline_editor_content(e),mode:parseInt(L.pref.allow_scss)?"scss":"css"}),I.action_after_timeout("tab_switch_deferred",3,{item:function(e){L.maybe_scroll_image_fields(e),L.adjust_scroll_buttons(e,"style")},args:[e]})),"css"===e&&(s=t.$curObj.data("code-type"),O.update_adaptable_editor({M:e,directContent:t.$curObj.find("textarea").val(),mode:parseInt(L.pref.allow_scss)&&"css"===s?"scss":s}),r=L.stat.code.find(".save-javascript-button"),"css"===s?(L.existingSelRadioUsed||O.resume_editor_cursor_pos_and_select(),r.removeClass("show")):r.addClass("show")),I.endT(arguments)},open_property_dropdown:function(e,t,s){var r=D("#"+L.selInFocusID);if(t=t||e.group,!(s=s||I.checkObject(e,["fieldData",0,"prop"]))||!I.isDomEl(r))return!1;t=r.find("div.field-"+t+"-"+s),s=t.hasClass("is-picker")?".property-input, .sp-preview-inner":".combo-arrow";t.find(s).trigger("click")},get_code_meta:function(e){var t=e.selector.find(".group-tag-code"),e=!!t&&t.find("div.property-fields-"+e.tabSlug);return{$group:t,$property_fields:e,$editor:L.stat.adaptableEditor,editor:O.eds["adaptable-editor"]}},js_in_focus:function(){return!(!L.stat.tvr.hasClass("show_code_editor")||"js"!=L.get_css_focus())},default_to_tab:function(e){var t,s;I.startT(arguments),"mq"===e?L.mq_tab_pressed(L.stat.res.find(".mq-tab-"+L.get_mq_focus())):"css"===e?L.css_tab_pressed(L.stat.code.find(".css-tab-"+L.get_css_focus())):"view-code"===e?(t=L.stat.view.find(".dialog-tab")).length&&((s=t.filter(".dialog-tab-"+L.get_initial_code_view_tab())).length||(s=t.first()),L.dialog_tab_pressed(s)):"wizard"===e?L.adv_tab_pressed(D("#adv-tabs").find(".adv-tab-"+L.get_wizard_focus())):"grid"!==e&&"transform"!==e||L.pg_tab_pressed(_.get_pg_fields(e).find("."+e+"-tab-"+L["get_"+e+"_focus"]()),e),I.endT(arguments)},get_mq_focus:function(){var e=L.pref.mq_device_focus;return e=!I.hasValue(e)||!I.hasValue(L.mqs[e])?"all-devices":e},get_wizard_focus:function(e){if(e&&!parseInt(L.pref.wizard_expanded)&&!L.pref.dock_wizard_right)return!1;e=L.pref.adv_wizard_tab;return e=!e||"html-inspector"===e||"refine-targeting"===e?"css-computed":e},get_css_focus:function(){return L.pref.css_focus||"all-browsers"},get_grid_focus:function(){var e=L.pref.grid_focus;return e||"gridtemplate"},get_transform_focus:function(){var e=L.pref.transform_focus;return e||"transform"},get_dialog_tab_focus:function(e){e=(e=(e=e||L.get_dialog_focus()).find("input.dialog-focus").val())||0;return parseInt(e)},get_dialog_focus:function(){return L.stat.dialogs.find("div.tvr-dialog.show")},get_tab_name:function(e){return D("#responsive-bar").find(".mq-tab-"+e).find(".mq-tab-txt").text()},get_pg_focus_obj:function(e){e=e||L.pref.pg_focus;e=D("#"+L.selInFocusID+"-"+e);return!!I.isDomEl(e)&&e},get_group:function(e,t){e=e.group.find("div.property-fields-"+e.tabSlug);return t&&(e=e.find("input.property-input")),!!I.isDomEl(e)&&e},get_pg_fields_obj:function(e,t){I.startT(arguments);var s=e.find("div.property-fields-"+t);return I.endT(arguments),!!I.isDomEl(s)&&s},get_subgroup_or_tabgroup:function(e,t,s){var r=L.get_group(e);if(!I.isDomEl(r))return!1;e=s?"div.tab-control-"+s:"div.subgroup-"+e.subgroupSlug,e=r.find(e);return!!I.isDomEl(e)&&(t&&(e=e.find("input.property-input")),!!I.isDomEl(e)&&e)},maybe_remove_group:function(e,t){if(I.startT(arguments),e){var s=L.get_meta(e,"group");if(!L.pg_check_values(s.group,t,!1)&&!L.input_toggles_enabled(s.group,"group",t))return I.endT(arguments),L.remove_property_group(s,t)}return I.endT(arguments),!1},input_toggles_enabled:function(e,t,s){"group"==t&&(e=e.find("div.property-fields-"+s));var r=!1;return e.find("input.input-toggle-tracker").each(function(e){return!(r=!0)}),r},selector_check_disabled:function(e){var t,s,r=e.selectorM.find(".disabled-responsive-tabs"),a=D("#responsive-bar").find(".query-tabs");for(t in TvrMQsCombined)TvrMQsCombined.hasOwnProperty(t)&&(s=a.find("span.mq-tab-"+t),I.isDomEl(r.find("input.disabled-tracker-"+t))?s.addClass("item-disabled"):s.removeClass("item-disabled"))},pg_check_values:function(e,t,s,r){var a=L.get_meta(e,"group"),o=!1;L.get_mq_focus();return r=r||"#nothing",a.group.find("div.property-fields-"+t).find("input.property-input, textarea.property-input").not(r).each(function(e){if(I.isDefined(D(this).val()))return!(o=!0)}),o},js_check_values:function(e,t,s,r,a){if(w.deferActions.check_values&&w.deferActions.update_dots)return e;I.startT(arguments);var o={incRecurse:!0,onlyRecurse:!1,mq_key:!1,M:L.get_meta(t.section||t,"section"),maxDepth:"group"};e.has_values={},e=w.modify_main_js_object("check_values",e,o),o.incRecurse=!1;var n=(e=w.modify_main_js_object("update_dots",e,o)).has_values;return n.current_sel_checked&&(L.update_tab_dots(n),L.update_group_dots(n),"grid"===L.pref.pg_focus&&(o={itemsWithValues:n.itemsWithValues},L.grid.isAllItems&&_.update_grid_and_radio_item_formatting("itemdots",o),L.update_pgtab_dots(n)),"transform"===L.pref.pg_focus&&L.update_pgtab_dots(n)),r&&P.silent_save(!1,e.savePackage),I.endT(arguments),e},update_tab_dots:function(e){for(var t in TvrMQsCombined){var s;TvrMQsCombined.hasOwnProperty(t)&&(s=L.item_has_styles(e,"tab",t),L.update_style_signal(L.stat.res.find(".mq-tab-"+t),s))}},update_pgtab_dots:function(e){var t=L.get_pg_meta(),s=w.get_selector_data(t,t.tabSlug).data,r=I.isDefined(s.nth_item)?s.nth_item:1;if(t){var s=t.groupSlug,a={},o=I.checkObject(e,["propsWithValues",s]);if(o)for(var n=Object.keys(o),i=0;i<n.length;i++){var l=n[i],c=L.get_property_tab_control(l);c&&("griditems"===c?I.checkObject(o,[l,"value",r]):1)&&(a[c]=1)}t.group.find("span.mt-tab").each(function(){var e=D(this),t=e.attr("rel"),t=a[t];L.update_style_signal(e,t)})}},update_group_dots:function(s,e){L.stat.css_icons.find(".pg-icon").each(function(){var e=D(this),t=e.attr("rel"),t=L.item_has_styles(s,"group",t);L.update_style_signal(e.parent(),t)})},item_has_styles:function(e,t,s){return I.checkObject(e,[t,s])?1:""},update_style_signal:function(e,t){e&&(t?e.addClass("hasValues"):e.removeClass("hasValues"))},css_tab_pressed:function(e){I.startT(arguments);var t=L.get_css_focus(),s=e.attr("rel"),r=(s!=t&&L.stat.code.find("div.mt-full-code-"+t),L.stat.code),t=r.find(".css-code-tabs");L.update_tab(r,".mt-full-code",t,s,".css-tab",".css-focus"),L.pref.css_focus=s;t=L.stat.code.find("div.mt-full-code-"+s);L.after_tab_switch("css",{$curObj:t}),P.simple_ajax_request({type:"GET",url:L.ajaxUrl+"&css_focus="+s}),F.toolbar_adjusted(),I.endT(arguments)},pg_tab_pressed:function(e,t,s){var r=e.closest(".property-"+t),a=r.find(".query-tabs"),e=e.attr("rel");L.update_tab(r,".tab-control",a,e,"."+t+"-tab","."+t+"-tab-focus"),L.pref[t+"_focus"]=e,L.stat.tvr.attr("data-"+t+"-pgtab",e),P.simple_ajax_request({type:"GET",url:L.ajaxUrl+"&"+t+"_focus="+e}),L.refresh_comp_css(),"grid"===t&&(L.adjust_grid_line_scroll_buttons(L.get_meta(r,"group")),L.iframeEditing()&&y.maybe_run_grid_control_update(s))},adv_tab_pressed:function(e){I.startT(arguments);var t=L.stat.inspectionPanes,s=t.find(".query-tabs"),r=e.attr("rel");L.update_tab(t,".adv-area",s,r,".adv-tab",".adv-wizard-focus"),L.pref.adv_wizard_tab=r,L.maybeUpdateInspectorPanels({updateComputed:1,updateStyles:1}),P.simple_ajax_request({type:"GET",url:L.ajaxUrl+"&adv_wizard_tab="+r}),I.endT(arguments)},settings_tab_pressed:function(e){},maybeUpdateInspectorPanels:function(e){if(I.startT(arguments),!parseInt(L.pref.wizard_expanded)||!L.iframeEditing(!0))return L.updateCompAsync(!1,!1,void 0,"obj"),I.endT(arguments),!1;e=e||{};var t=L.get_wizard_focus(!0);e.updateComputed&&L.updateCompAsync(!0,!0,void 0,"obj"),e.updateHTML&&(L.domChanged.updateHTMLPane||e.updateVisEditor?(e.updateVisEditor=1,L.update_wizard_html(e),L.domChanged.updateHTMLPane=!1):L.update_wizard_html_scroll(e)),"css-inspector"===t&&e.updateStyles&&I.action_after_timeout("update_styles_pane",70,{item:function(){E.update_stylesheet_rules()},args:[]}),I.endT(arguments)},updateCompAsync:function(e,t,s,r){I.action_after_timeout("update_comp_async",3,{item:function(){L.iframeEditing()&&(y.getAndUpdateCompStyles(e,t,s,r),L.get_wizard_focus(!0)&&O.update_pseudo_els({action:"comp-styles-update",goToLine:L.curSelCSS}))},args:[]})},dialog_tab_pressed:function(e){var t=e.closest(".dialog-main"),s=t.find(".dialog-tabs"),r=e.attr("rel"),e=L.get_dialog_focus(s);L.update_tab(t,".dialog-tab-field",s,r,".dialog-tab",".dialog-focus"),"display-css-code-dialog"===e.attr("id")&&((e=(s=L.generatedCodeTabs.items[r]).url)?P.simple_ajax_request({url:e,plus:TvrLang.retrieve_css,minus:TvrLang.retrieve_css_failed,cbFunction:L.update_generated_code_editor,cbfArgs:[r,s]}):(e=!!L.scss_error&&L.scss_error.fullString||L.previousSCSSCompile,L.update_generated_code_editor(e,r,s)))},combobox_clicked:function(e,t){var s;I.startT(arguments),e.hasClass("sug-sel")?I.isDomEl(e.closest(".code-suggestion.in-focus"))||L.sug_css_clicked(e):(s=e.attr("rel"),(e.hasClass("has-arrows")||e.hasClass("cssfilter-combo"))&&L.combo_arrow_clicked(!1,e),e.hasClass("cssfilter-combo")&&"custom_prefix"!==s&&L.feature_on(e)),I.endT(arguments)},combo_arrow_clicked:function(e,t){I.startT(arguments);var s="input"===(t=t||(e.hasClass("cur-item-dropdown")?e.prev("input"):e.siblings("input"))).prop("tagName").toLowerCase()?t:t.find("input");s.data("wasOpen")?L.close_combo_menu(s):L.open_combo_menu(s),s.hasClass("sug-sel")&&L.sug_css_clicked(s),I.endT(arguments)},open_combo_menu:function(e){e.MTautocomplete(),e.is(":focus")||e.trigger("focus"),e.MTautocomplete("search",""),L.combobox_focused(e)},close_combo_menu:function(e){e.MTautocomplete().MTautocomplete("close")},combobox_focused:function(e){e.hasClass("custom_css_unit")&&D("#css_unit_set").val("")},input_clear_icon_clicked:function(e,t){var s,r=e.siblings("input"+(t=t||"")),a=!1;r.val("").focus(),r.hasClass("search-folders-input")&&L.clear_folder_search(),r.hasClass("property-input")&&(a=L.get_meta(r,"property")),(a=r.hasClass("sp-input-var")?L.get_related_meta("picker",e.closest(".sp-container")).M:a)&&((t=a.property).hasClass("has-variable-line")&&(r.hasClass("vl-name-input")?L.toggle_optional_input(e.siblings(".toggle-optional-input")):(s=!1,r.closest(".tvr-input-wrap").find(".property-input").each(function(){if(""!==D(this).val().trim())return!(s=!0)}),s||L.delete_variable_field(t,r,a,!0))),L.maybe_toggle_google_fonts_field(r,""),L.run_input_updated(r))},format_combo_cat_toggle_atts:function(e){return' class="mt-ui-toggle uit-par mt-combo-toggle toggle-sampled-items toggle-'+e+'" data-action="toggle-sampled" data-dyn-tt-root="'+e+'"data-aspect="'+e+'"'},wheelDropdown:{cssf:"",source:[],index:-1},valueChangeDropdown:function(e,t,s){var r=L.wheelDropdown.source.length-1,t=t?L.wheelDropdown.index+1:L.wheelDropdown.index-1;t<0?t=r:r<t&&(t=0);r=L.wheelDropdown.source[t];r===Object(r)&&(r=I.isDefined(r.value)?r.value:r.label),e.val(r),L.maybe_sync_fields(e),L.wheelDropdown.index=t},cycleDrowndownValues:function(e,t,s){var r,a,o=I.prop_to_cssf(e.attr("rel")),n=e.val(),i=L.wheelDropdown.cssf!==o||!I.isDefined(n);i&&(r=(a=L.resolve_combobox_source(e))[1]===Object(a[1])&&"value",L.wheelDropdown.source=a,L.wheelDropdown.cssf=o,o=L.single_comp_value(o),a=I.isDefined(n)?I.in_array(n,a,!1,r):!1!==I.in_array(o,a,!1,r)?I.in_array(o,a,!1,r):I.in_array(o,a,!1,"label"),L.wheelDropdown.index=!1!==a?parseInt(a):-1),L.valueChangeDropdown(e,0<t.deltaY,s),i&&L.adjust_comp_span(e,"after"),P.ajax_save_settings({$property:e})},lastAutocompleteResponse:[],resolve_combobox_source:function(e,t,s,r){I.startT(arguments);var a,o,n,i,l,c,d,_,u,p,g=e.attr("rel"),f=(e.hasClass("sug-sel")?y.dom.sels:TvrMT.data.prog).combo[g];if("custom_paths"===g||"conditional_logic"===g)return L.conditionLogicSiteSearch="conditional_logic"===g,L.get_site_pages;if("custom_prefix"===g)return L.get_custom_prefix_combo_data;if("shape_outside"===g)f=[].concat(TvrMT.data.prog.combo.clip_path);else{if("all_sel_suggestions"===g)return L.filter_code_suggestions;if("css_length_units"===g)return m.filter_css_units(f,e.data("prop"));if("cur_folders"===g)return L.get_folders();if("alt_label_suggestions"===g)return L.get_label_suggestions()}return f=f||[],(e.hasClass("property-input")||e.hasClass("sp-input-var"))&&(a=L.gatheredCSS.root_cat_keys[g],d=I.prop_to_cssf(g),o=!!(c=TvrMT.data.prog.lh[d])&&L.get_default_unit(c.group,c.prop),n=L.support_sampling(g),i=[],l=[],u=[],a&&(_=L.pref.my_props.sug_values,d=E.sort_number_unit_strings(I.uniqueArray(_[c=(d="color_extra"===a)?"color":a].recent.concat(_[c].saved)),!1,g,!1,a,!1,d),_=_[a].copiedSrc,"grid_positions"!==a&&"grid_area"!==a||!I.checkObject(L.grid,["templateAreas"])||(d=d.concat(L.grid.templateAreas["grid_positions"===a?"implicit_names":"grid_areas"])),_=E.sort_number_unit_strings(I.uniqueArray(d.concat(_)),!1,g),f.length&&I.comboHasInitialCats(f)?i=L.format_combo_suggestions(a,"suggestions",d):f=L.format_combo_suggestions(a,"suggestions",_),n&&(E.get_scss_variables("keys"),parseInt(L.pref.show_sampled_values)&&(l=L.format_combo_suggestions(a,"sampled")),L.pref.my_props.sug_variables&&parseInt(L.pref.show_sampled_variables)&&(p=E.sort_number_unit_strings(Object.keys(L.pref.my_props.sug_variables),!1,g,!0,a,o),u=L.format_combo_suggestions(a,"sampled_variables",p)))),p=[],"font_family"===g?p.push(TvrLang.google_font):"list_style_image"!==g&&"background_image"!==g&&"url"!==g&&"mask_image"!==g||p.push("none"),(f=p.concat(i,f,u,l)).length||f.push("")),r=I.isDefined(r)?"curVal"===r?e.val():r:"",t&&e.MTautocomplete().MTautocomplete("option","source",f),s&&(e.MTautocomplete("search",r),L.maybe_combo_menu_width_change(e)),I.endT(arguments),f},maybe_combo_menu_width_change:function(t){var e;t.hasClass("mt-slider")&&(e=MTlocal.get_custom_autocomplete(t),e=D(e.menu.element),I.action_after_timeout("new_menu_width",100,{item:function(e){m.hide_slider_set(),m.show_slider_set(t,!0)},args:[e]}))},format_combo_cat_label:function(e,t){return TvrLang[e]},format_combo_suggestions:function(e,t,s){var r=[],a=s||L.pref.my_props.sug_values[e][t],o=L.format_combo_cat_label(t,e);if(a&&a.length)for(var n,i,l,c=0;c<a.length;c++)a[c]&&(i=(n=(l=a[c])===Object(l))?l.val:l,l=n?D.extend(!0,{},l):{},D.extend(!0,l,{label:i,category:o}),r.push(l));return r},add_variable_field:function(e,t){var s=e.closest(".property-tag"),r=s.find(".tvr-input-wrap").last(),a=r.find(".vl-post-line-name").find(".property-input").val(),o=r.clone(),e=o.find(".property-input");r.find(".vl-post-line-name").removeClass("show-optional-input").find(".property-input").val(""),o.find(".vl-item").removeClass("show-optional-input"),t.shiftKey||e.val(""),a&&o.find(".vl-pre-line-name").find(".property-input").val(a),o.find(".comp-style").html(""),r.after(o),o.find(".vl-main-input").find(".property-input").focus(),L.adjust_grid_line_scroll_buttons(L.get_meta(s,"group")),t.shiftKey&&P.ajax_save_settings({$property:e})},toggle_optional_input:function(e){e=e.parent();e.hasClass("show-optional-input")?e.removeClass("show-optional-input"):(e.addClass("show-optional-input"),e.find(".property-input").focus())},delete_variable_field:function(e,t,s,r){1<e.find(".tvr-input-wrap").length&&t.closest(".tvr-input-wrap").animate({opacity:0},200,function(){D(this).remove(),r&&L.adjust_grid_line_scroll_buttons(s)})},get_combo_menu_from_input:function(e){return D(MTlocal.get_custom_autocomplete(e).menu.element)},combobox_item_selected:function(e,t,s,r){I.startT(arguments);var a,o,n,i,l=s.closest(".property-tag"),c=s.attr("rel"),d=t.item.value;return!s.hasClass("grid-area-add")&&("conditional_logic"===c?(o=D("#addLogic"),n=D("#logic-to-add"),a=o.find("input.mt_exclude:checked").length,o=t.item.logic,d=a?t.item.exclude_logic||"!"+o:o,t.item.value=t.item.label,n.val(d)):t.item.label!==d&&I.in_array(c,["mask_image","background_image","clip_path","shape_outside"])&&(d.match(new RegExp(E.reg.abs_or_rel_file()))&&(d='url("'+I.root_rel_if_local(L.microUrl+"stock/"+d,!0)+'")'),L.last_field_val_converted={origVal:D.extend(!0,{},t.item),adjustedStringVal:d},t.item.value=d),s.val(d),L.maybe_run_code_or_synced_label_field_edited(s,t),s.hasClass("sp-input-var")?(L.run_input_updated(s),!1):(s.hasClass("bg-image-select")&&setTimeout(function(e){I.scroll_input_end(e)},30,s),s.hasClass("property-input")&&(l.hasClass("has-variable-line")&&(""===d||(o=_.parseGridTracks(d).lines)&&1<o.length&&(c=s.attr("rel"),i=L.get_meta(s,"property"),(n=s.closest(".mt-vl-inner")).find(".tvr-input-wrap").remove(),o=L.dom_replacements(!1,"group",D(TvrMT.data.templates.input_wraps[c]),"selector_section",i.sectionSlug,!1,"selector_css",i.selectorSlug,i.selectorH,i.selectorCode,i.tabSlug),n.prepend(o),w.map_property_values_to_field(c,l,d.split(" ")),n=n.find(".tvr-input-wrap").first(),s=(-1<c.indexOf("template")?n.find(".vl-main-input"):n).find(".property-input"))),L.adjust_comp_span(s,"after"),i=L.get_meta(s,"property"),L.maybe_toggle_google_fonts_field(s,d)||L.maybe_sync_fields(s),L.update_input_width_and_scroll(s),P.ajax_save_settings({$property:s,comboAction:r})),"css_unit_set"===s.attr("id")&&(d=s.val(),s.closest("ul").find("input.custom_css_unit").val(d)),"select"===r&&"custom_paths"===s.attr("rel")&&(s.MTautocomplete("close"),"testPreviewPath"===s.attr("id")?L.logicTextareaChanged?u.save_folder_logic(s,!0):u.test_logic_on_page(L.context_menu_data.M):L.change_preview_url(s.siblings(".change-preview-url"),t)),"viewed_import_stylesheets"===s.attr("rel")&&(s.MTautocomplete("close"),E.update_import_css_preview(!1,{c:s.closest(".stylesheet-to-import").find(".view-import-stylesheet")},"loadNew")),s.hasClass("sug-sel")&&L.sug_sel_updated({val:s.val(),$editedField:s,comboSelected:1,ui:t}),s.hasClass("cssfilter-combo")&&L.pseudo_updated(s,{input:1}),void I.endT(arguments)))},maybe_toggle_google_fonts_field:function(e,t){if(e.hasClass("tvr-font-select")){var s=e.closest(".field-wrap").siblings(".tvr-font-custom");return L.gFontTarget=s.find(".property-input"),t==TvrLang.google_font?L.show_google_fonts_field(s):L.hide_google_fonts_field(e,s),!0}return!1},hide_property_fields:function(e){e.each(function(){var e=D(this),t=e.find(".property-input");t.val(""),L.adjust_comp_span(t,"after"),e.removeClass("show-event-fields")})},sug_css_clicked:function(e){I.startT(arguments);var t,s,r,a,o,n,i,l=e.closest(".mt-selector-suggestion");l.hasClass("in-focus")||(t=e.hasClass("existsel-radio"),s="hand_coded_css"===(i=l.data()).type,a=(r=!t)&&l.find("input.sug-sel"),o=r?a.val():i.code,n=!!t&&i.id,i=L.existingSelSelected!==t,L.existingSelSelected=t,L.sug_sel_updated({switchedNewExisting:i,isCodeViewSel:s,isExisting:t,isNewSug:r,$editedField:a,$item:l,radioSelection:1,val:o,selID:n,scroll:1})),I.endT(arguments)},toggle_preview_page_menu:function(e){var t=L.stat.settingsMenu,s=L.stat.changeUrlInputWrap.find("input"),r=L.stat.settingsMenu.children(".mt-preview_page-heading");r.hasClass("expanded")||L.toggle_expandable_panel(r),t.hasClass("on")?(L.close_combo_menu(s),L.hide_folders_or_settings("settings","right")):(L.show_folders_or_settings("settings","right"),I.action_after_repaint({item:function(){L.open_combo_menu(s)}},270))},get_toggle_data:function(e,t){I.startT(arguments),e?e=e.closest(".uit-par"):"hide_interface"===t?e=D("#toggle-mt-interface"):"hover_inspect"===t?e=D("#hover-inspect-toggle"):"show_code_editor"===t?e=D("#toggle-full-code-editor"):"show_text_labels"===t?e=D("#mymtonoffswitch-show_text_labels").closest(".mt-ui-toggle"):"dock_editor_left"===t?e=D("#mymtonoffswitch-dock_editor_left").closest(".mt-ui-toggle"):"dock_styles_left"===t?e=D("#mymtonoffswitch-dock_styles_left").closest(".mt-ui-toggle"):"detach_preview"===t?e=D("#mymtonoffswitch-detach_preview").closest(".mt-ui-toggle"):"show_sampled_variables"===t||"show_sampled_values"===t?e=D("#"+t):"create_additional_selector"===t&&(e=L.stat.suggestionsAdvanced.find(".additional-selector-toggle"));var s=!1,r=!1,a=!1;"show_code_editor"==(t=t||e.data("aspect"))?(r=e,e=D("#toggle-full-code-editor"),s=D("#code-editor-alias")):"show_extra_actions"==t?(r=e,e=D("#show_extra_actions")):"show_sampled_variables"===t||"show_sampled_values"===t?(r=e,e=D("#"+t)):"hover_inspect"==t?(r=e,e=D("#hover-inspect-toggle")):"selname_code_synced"==t?(r=e,e=D("#selname_code_synced")):"mt_highlight"===t?(r=e,e=D("#toggle-highlighting")):"code_manual_resize"==t?(r=e,e=D("#code_manual_resize")):"pseudo_classes"==t||"pseudo_elements"==t||"page_specific"==t?(a=L.stat.cssModifiers,s=L.get_css_filter_alias(r=e,t)):"create_additional_selector"===t&&(r=e,e=L.stat.suggestionsAdvanced.find(".additional-selector-toggle"));var o,n=e.hasClass("on")?0:1,i=e.data();return i&&"custom-prefix"===i.pref_sub_key&&(o=e.closest(".css-filter-item").find(".cssfilter-combo").val()),I.endT(arguments),{clicked:e,aspect:t,turnOn:n,extraValue:o,alreadyOn:!n,$alias:s,$aliasTrigEl:r,$filter_scope:a}},feature_on:function(e,t,s){I.startT(arguments),s=s||{};var r=L.get_toggle_data(e,t);s.offFirst&&(L.feature_off(e,t,s.offFirst),r=L.get_toggle_data(e,t)),r.alreadyOn||L.toggle_feature(e,t,s),I.endT(arguments)},feature_off:function(e,t,s){I.startT(arguments),s=s||{},L.get_toggle_data(e,t).alreadyOn&&L.toggle_feature(e,t,s),s.onAgain&&L.feature_on(e,t,s.onAgain),I.endT(arguments)},toggle_inline_gui:function(){var e=O.eds["adaptable-editor"];e.isFocused()?(e.blur(),O.go_to_ui_property()):F.editor_and_gui()?(L.picker_method("hide"),e.focus()):L.trigger_pg_icon_click("code")},toggle_feature:function(e,t,s){I.startT(arguments);var r=L.get_toggle_data(e,t);e=r.clicked,t=r.aspect,s=s||{};var a=r.turnOn,o=r.$filter_scope||!1,n="",i=e.data("pref_sub_key");if("hide_interface"===t&&L.pref.detach_preview)return!1;s.pref_sub_key=i||!1,s.tmp&&(L.tmp[t]=a?"turnedOn":"turnedOff"),s.fHTML=I.isDefined(s.fHTML)?s.fHTML:e.data("fhtml"),s.noSave=I.isDefined(s.noSave)?s.noSave:parseInt(e.data("no-save"));var l,c,d=s.fHTML&&L.stat.fHTML?L.stat.tvr.add(L.stat.fHTML):L.stat.tvr,_=(s.extraClass&&s.extraClass,r.$alias?e.add(r.$alias):e),u=!1;a?(d.addClass(t),F.detached_window_available()&&p.add_html_class(t),_.addClass("on"),"show_time_concurrently"==t&&(s.noSave=1,I.log_concurrent=1),o||(u=e.data("neg")),"show_rulers"==t?L.get_local_window_function("show_rulers")():"dock_folders_left"===t||"dock_styles_left"===t||"dock_editor_left"===t||"detach_preview"===t||"dock_wizard_right"===t||"dock_settings_right"===t?F.toggle_layout_view(t,a,"dock_wizard_right"===t||"dock_settings_right"===t?"right":"left",s):"show_suggestions_menu"===t?L.show_suggestions_menu(y.stat.frontendControls.find(".show-suggestions-icon")):"enable_beaver_builder"===t?(L.iframeEditing()&&!s.uiCorrection&&g.activate_builder("FLBuilder"),L.stat.tvr.addClass("FLBuilder_is_on")):"activate_elementor"==t?g.activate_builder("elementor",!1,L.pageOrPostID):"activate_oxygen"==t?g.activate_builder("oxygen",!1,L.pageOrPostID):"selname_code_synced"==t?L.selname_code_synced(r.$aliasTrigEl,a):"code_manual_resize"==t?(F.horizontal_only()&&(L.stat.inlineEditor.css("height",L.pref.layout.editor_height.size),O.get_focus_editor().resize(),F.toolbar_adjusted()),L.close_context_menu({filter:".cm-editor-options"})):"show_code_editor"==t?(L.cancel_draft_selector_edit(!0,{elementAlreadySelected:1}),L.pref[t]=a,F.adjust_preview_margin_and_save_config({side:"left",skipSave:1}),L.default_to_tab("css"),s.doNotAutoSelect||O.resume_editor_cursor_pos_and_select()):"mt_dark_mode"===t?O.updateAllEditorsTheme("dark"):"sync_browser_tabs"===t?(window.MTBroadCast.toggleSyncBrowserTabs(a),P.update_full_logs({short:"Reload other tabs!",long:"<p>Browser tab syncing has been enabled, but please reload any already open tabs to ensure this change propagates.</p>",type:"info"})):"auto_publish_mode"===t?0<L.pref.num_unpublished_saves&&P.publish_settings():"pseudo_base_styles"===t?L.adjust_pseudo_base_styles(a,!0):"hover_inspect"==t?L.iframeEditing()&&y.bind_wizard_hover():"fullscreen"==t?I.enable_full_screen():"wizard_expanded"==t?(L.pref[t]=a,this.wizard_expanded()):"hide_interface"==t?(F.toolbar_adjusted(),L.feature_off(!1,"hover_inspect",{tmp:1,noSave:1})):"mt_highlight"===t?(r.$aliasTrigEl&&r.$aliasTrigEl.hasClass("current-item-spotlight")&&(s.con="reg",s.scroll=1),s.con&&L.iframeEditing()&&y.reposition_overlays(s)):o&&e.hasClass("filter-editable")?e.find("input.combobox").select():"expand_all_folders"===t?(L.clear_folder_search(),L.open_close_all_folders("open")):"selector_auto_name"===t&&(s.doNotUpdateField||L.update_nice_name(!1,L.stat.curCodeInput.val(),L.pref.selname_code_synced))):("show_time_concurrently"==t&&(s.noSave=1,I.log_concurrent=0),_.removeClass("on"),o&&o.find("ul.flist-"+t).find("li.css-filter-item.on").length||d.removeClass(t),F.detached_window_available()&&p.remove_html_class(t),o||(u=e.data("pos")),"show_rulers"==t?L.get_local_window_function("hide_rulers")():"dock_folders_left"===t||"dock_styles_left"===t||"dock_editor_left"===t||"detach_preview"===t||"dock_wizard_right"===t||"dock_settings_right"===t?F.toggle_layout_view(t,a,"dock_wizard_right"===t||"dock_settings_right"===t?"right":"left",s):"enable_beaver_builder"===t?(L.iframeEditing()&&!s.uiCorrection&&g.get("FLBuilder").deactivate(),L.stat.tvr.removeClass("FLBuilder_is_on")):"activate_elementor"===t?g.deactivate_builder("elementor"):"activate_oxygen"===t?g.deactivate_builder("oxygen"):"selname_code_synced"==t?L.selname_code_synced(r.$aliasTrigEl,a):"code_manual_resize"==t?(F.horizontal_only()&&(d=(l=L.stat.adaptableEditor).attr("id"),(d=O.eds[d])&&(c=d.session.getLength(),O.editor_update_height(d,l,16*c))),F.toolbar_adjusted(),L.close_context_menu({filter:".cm-editor-options"})):"hover_inspect"==t?L.iframeEditing()&&y.unbind_wizard_hover():"show_code_editor"==t?(O.prev_code_selector=!1,L.cancel_draft_selector_edit(!1),L.pref[t]=a,F.adjust_preview_margin_and_save_config({side:"left",skipSave:1}),L.default_to_tab("mq"),L.adjust_scroll_buttons(!1,"responsive"),!s.doNotAutoSelect&&L.iframeEditing()&&y.select_current_selector_elements({})):"mt_dark_mode"===t?O.updateAllEditorsTheme("light"):"sync_browser_tabs"===t?window.MTBroadCast.toggleSyncBrowserTabs(a):"auto_publish_mode"===t||("pseudo_base_styles"===t?L.adjust_pseudo_base_styles(a,!0):"fullscreen"==t?I.disable_full_screen():"wizard_expanded"==t?(L.pref[t]=a,this.wizard_collapsed()):"show_suggestions_menu"===t?L.hide_suggestions_menu():"hide_interface"==t?(F.toolbar_adjusted(),"turnedOff"===L.tmp.hover_inspect&&(L.tmp.hover_inspect=!1,L.feature_on(!1,"hover_inspect",{noSave:1}))):"mt_highlight"===t||"expand_all_folders"===t&&L.open_close_all_folders("close"))),s.pref_sub_key?(i=s.pref_sub_key,L.pref[t][i]=a,n+="&pref_sub_key="+i,r.extraValue&&(n+="&extraValue="+(c=r.extraValue.trim()),L.pref[i+"-extraValue"]=c)):L.pref[t]=a,u&&L.refresh_tt(_,u,r.$aliasTrigEl),e.data("text-pos")&&(r=a?e.data("text-neg"):e.data("text-pos"),e.text(r)),o&&L.pseudo_updated(e,{toggle:1,turnOn:a,doNotSelectEl:s.doNotSelectEl,turningOffOtherPagePrefix:s.turningOffOtherPagePrefix}),"dock_wizard_right"!==t||a?"show_text_labels"===t?F.toolbar_adjusted():"expand_device_tabs"===t?L.adjust_scroll_buttons(!1,"responsive"):"mt_nonlog"===t?L.change_preview_url(L.stat.settingsMenu.find(".change-preview-url"),void 0,!0):"specificity_preference"===t?L.specificity_toggled():"full_height_left_sidebar"!==t&&"full_height_right_sidebar"!==t||F.adjust_preview_margin_and_save_config({skipSave:1,skipPGPress:1,side:"full_height_left_sidebar"===t?"left":"right"}):L.default_to_tab("wizard"),s.noSave||P.save_ui_toggle_update(t,a,n),I.endT(arguments)},specificity_toggled:function(){L.stat.suggestionsAdvanced.find("input.sug-sel").add(L.stat.curCodeInput).each(function(){var e,t=D(this),s=t.attr("rel");I.isDefined(s)&&(e=("all_sel_suggestions"===s?TvrMT.data.prog:y.dom.sels).combo,(e=I.checkObject(e,[s]))&&(y.sort_selector_suggestions(e,parseInt(L.pref.specificity_preference)),e=I.checkObject(e,["0","value"]),I.isDefined(e)&&"all_sel_suggestions"!==s&&(t=t.closest(".code-suggestion").hasClass("in-focus"),L.suggestion_instances({action:["setInputs"],incCurCode:t,val:e,itemFilter:".code-suggestion.refKey-"+s}),t&&parseInt(L.pref.selector_auto_name)&&L.update_nice_name(!1,e,L.pref.selname_code_synced))))})},context_menu_data:!1,toggle_context_menu_using_atts:function(e){var t=e.data();t.$clicked=e,L.toggle_context_menu(t)},toggle_context_menu:function(e){e.$clicked.hasClass("on")?L.close_context_menu():L.show_context_menu(e)},show_context_menu:function(e){MTlocal.show_context_menu(e)},close_context_menu:function(e){MTlocal.close_context_menu(e)},maybe_run_context_menu_callback:function(e,t){var s=I.checkObject(t,[e]),e=!0;return!1!==(e=s?s.apply(this,[t]):e)},default_context_menu_offset:function(e,t){var s=e.offset(),r=t.noOffsetSpacing?0:10,a=e.outerWidth(),o=e.outerHeight(),n=t.noWidthOffset?0:a,i=t.noHeightOffset?0:o,l=(t.noFlipWidthOffset,t.noFlipHeightOffset,0),e=0,o=0;"Chrome"!==L.browser&&"Edge"!==L.browser||(l=.5);i={top:s.top+i+I.definedOrDefault(t,"offsetSpacingTop",r),left:s.left+l+n+I.definedOrDefault(t,"offsetSpacingLeft",r),bottom:"auto",right:"auto"};t.adjustForParentWindow&&(c=(F.detached_window_available(!0)?p:L).stat.iframe.offset(),d=y.stat.win,e=c.top-d.scrollY,o=c.left-d.scrollX,i.top=i.top+e,i.left=i.left+o);var l=I.definedOrDefault(t,"heightEstimate",285),n=I.definedOrDefault(t,"widthEstimate",500),c=(F.detached_window_available(!0)?p:L).stat.win,d=c.innerWidth,c=c.innerHeight;return i.top+l>c&&(i.bottom=c-(s.top+e)+I.definedOrDefault(t,"offsetSpacingBottom",r),i.top="auto",i.bottom+l>c&&(c=i.bottom+l-c,i.bottom-=10+c)),i.left+n>d&&(i.right=d-(s.left+o+a)+I.definedOrDefault(t,"offsetSpacingRight",r),i.left="auto"),i},getMainOrDetachedObj:function(){return F.detached_window_available(!0)?p:L},show_suggestions_menu:function(e){L.getMainOrDetachedObj().show_context_menu({filter:".cm-suggestions",$clicked:e,clickedDoc:y.stat.doc,adjustForParentWindow:1,noOffsetSpacing:1,noWidthOffset:1,hideHeader:!0}),L.pref.show_suggestions_menu=1},hide_suggestions_menu:function(){L.getMainOrDetachedObj().close_context_menu();var e=y.stat.frontendControls.find(".show-suggestions-icon");I.isDomEl(e,!0,y.stat.doc)&&e.removeClass("on"),L.pref.show_suggestions_menu=0},get_toggle_switch_template:function(e){var t=L.templates.toggle_switch.replace(/toggle_aspect/g,e.aspect).replace("toggle_id",e.id).replace('title="enable_toggle_tooltip"','title="'+(e.on?e.disableTT:e.enableTT)+'"').replace('data-pos="enable_toggle_tooltip"','data-pos="'+e.enableTT+'"').replace("disable_toggle_tooltip",e.disableTT);return t=e.on?t.replace("uit-par","uit-par on"):t},generate_selector_variations:function(e){var t,s=TvrMT.data.prog.selector_variations,r=Object.keys(s),a=e.M,o=I.custom_to_non_escaped(L.curSelCSS),n=/(?:(:hover|:focus|::?before|::?after))$/,i=o.match(n),l="normal",c=L.get_all_selector_code(!0,!0),d={},_='<div class="selector-variation-items fake-radio-parent">';i&&(l=i[1]);for(var u=0;u<r.length;u++){var p,g=r[u],f=g.replace("::",""),m=g===l;if(d[g]={label:s[g].label},m)h=a.selectorCode,t=t||a.selectorH.replace(/ \(.+?\)$/,""),d[g]={code:h,existing:{id:L.selInFocusID.replace(/^opts-/,"strk-"),sName:a.selectorH}};else{switch(g){case"normal":h=o.replace(n,"");break;case":hover":case":focus":case"::before":case"::after":h="normal"===l?o+g:o.replace(n,g)}for(var v in d[g].code=h,c)!c.hasOwnProperty(v)||"hand_coded_css"!==(p=c[v]).type&&h===p.code&&(p.id=v,d[g].existing=p)}d[g].isCurrentState=m,d[g].variationCode=h}for(u=0;u<r.length;u++){var m=d[g=r[u]].isCurrentState,h=d[g].variationCode,b=TvrMT.data.templates.variation_radio,y=m?" in-focus":"",S=h,w='data-code="'+I.regular_escape_quotes(h)+'" data-key="'+g+'"',x=m?L.get_base_styles_switch(g):"";t&&(w+='data-rootlabel="'+t+'"'),d[g].existing&&(y+=" variation-exists",S+=" ("+d[g].existing.sName+")",w+='data-id="'+d[g].existing.id+'"'),_+='<div class="mt-variation-item mt-variation-item-'+f+" mt-variation-option "+y+'" '+w+">"+b+'<span class="variation-label mt-variation-option" title="'+I.regular_escape_quotes(S)+'">'+s[g].label+"</span>"+x+"</div>"}_+="</div>",e.$content.find("#mt-selector-state-options").html(_)},get_base_styles_switch:function(e){var t="pseudo_base_styles";return"::before"===e||"::after"===e?'<span class="mt-variation-styles">\t<span>'+TvrLang.base_styles+"</span>"+L.get_toggle_switch_template({on:L.pref[t],aspect:t,id:t,enableTT:TvrLang.add_base_styles,disableTT:TvrLang.remove_base_styles})+"</span>":""},switch_selector_variation:function(e){I.startT(arguments);var t=e.closest(".mt-variation-item");if(t.hasClass("in-focus"))return!1;var s=t.data(),r=s.key,a=I.convert_to_param(r,""),o=L.get_base_styles_switch(r);t.addClass("in-focus").siblings().removeClass("in-focus"),L.clear_css_filters(!0),t.siblings().find(".mt-variation-styles").remove(),o&&t.append(o),s.id?L.resume_existing_or_set_draft_selector(!1,{},{existingSelector:{id:s.id},forceResume:!0,switchSelVariation:1}):(L.feature_on(L.stat.cssModifiers.find(".filter-"+a),void 0,{doNotSelectEl:!0}),L.feature_on(!1,"create_additional_selector"),s.rootlabel&&(L.disable_selector_auto_name(),a=s.rootlabel+" ("+r+")",L.update_nice_name(a,!1)),L.sug_sel_updated({val:s.code,stateSelectorSet:1,addPseudoBaseStyles:("::before"===r||"::after"===r)&&r,switchSelVariation:1,doNotRepositionOverlays:1})),I.endT(arguments)},adjust_pseudo_base_styles:function(e,t){for(var s=L.get_selector_in_focus(),r=w.get_selector_data(s).data,a=(L.get_default_unit("dimensions","width"),L.get_default_unit("dimensions","height"),{behaviour:{content:{value:'" "'}}}),o=t?D.extend(!0,a,{background:{background_color:{value:"rgb(255, 192, 203)"}},dimensions:{width:{value:"20",unit:"px"},height:{value:"20",unit:"px"}},behaviour:{display:{value:"inline-block"}}}):a,n=Object.keys(o),i=0;i<n.length;i++)for(var l=n[i],c=o[l],d=Object.keys(c),_=0;_<d.length;_++){var u=d[_],p=c[u],g=I.checkObject(r,["styles",l,u]),f=g?g.value:void 0,m=g?g.unit:void 0;e&&!g?I.updateObject(r,["styles",l,u],D.extend(!0,{},p)):e||p.value!==f||p.unit!==m||"content"===u||delete r.styles[l][u]}t="all-devices"!==s.tabSlug,a=w.modify_main_js_object("group_to_css",a={savePackage:[],keepAsDraft:!0,doNotRepositionOverlays:1},{M:s,domDepth:"group",mq_key:s.tabSlug,incRecurse:t,onlyRecurse:t,recurse_key:["m_query"]});L.client_scss&&P.ajax_save_settings({keepSelectorAsUnsavedDraft:1,settings:a,serialise:!0}),L.trigger_pg_icon_click(s.groupSlug),F.editor_and_gui()&&O.gui_to_editor(!1,s,"property"),a=L.js_check_values(a,s)},wizard_expanded:function(){L.default_to_tab("wizard"),L.maybeUpdateInspectorPanels({updateComputed:1,updateStyles:1,updateHTML:1})},wizard_collapsed:function(){},after_animation:function(e,s){var t="transition"===s.type?"transitionend.tvr webkitTransitionEnd.tvr oTransitionEnd.tvr otransitionend.tvr MSTransitionEnd.tvr":"oanimationend.tvr animationend.tvr webkitAnimationEnd.tvr";e.on(t,function(e){var t=TvrMT.integrate.elementor.newResponsiveMode?"margin-left":"left";"elementorLeftPanelAdjusted"!==s.aspect||e.originalEvent.propertyName!==t&&"width"!==e.originalEvent.propertyName?"elementorRightPanelAdjusted"===s.aspect?"width"===e.originalEvent.propertyName&&g.builderRightPanelAdjusted("elementor",TvrMT.integrate.elementor.doUpdatePreviewForRightPanel()):s.cb&&s.cb.apply(this,s.args):g.builderLeftPanelAdjusted("elementor",!0)})},selname_code_synced:function(e,t){var s="selname_code_synced"==e.attr("id")?"wizard":"existing-sel",r=!!t,a=("wizard"==s?L.stat.curCodeInput:e.closest(".mt-folder-form").find(".selector-css-textarea")).val();a&&(t="wizard"==s?L.get_selector_in_focus():L.context_menu_data.M,L.doNotResizeInputs=!0,t&&(L.ignoreSelector=t.sectionSlug+"_"+t.selectorSlug),"wizard"==s?L.update_nice_name(!1,a,r):e.closest(".mt-folder-form").find("input.selector-name-input").val(L.format_nice_name(a,r)),L.ignoreSelector=!1,L.doNotResizeInputs=!1)},filter_favourited:function(e,t,s){},filter_un_favourited:function(e,t,s){},toggle_screen_preview:function(e){I.startT(arguments),((e=e.closest("li.mt-screen-preview")).hasClass("clicked")?L.get_local_window_function("unset_screen_preview"):L.get_local_window_function("set_screen_preview"))(e,"clicked"),I.endT(arguments)},screen_width_adjusted:function(e,t){I.startT(arguments),L.iframeEditing()&&(L.post_screen_width_adjusted(e,t),I.action_after_timeout("screen_width_adjusted",550,{item:L.post_screen_width_adjusted,args:[e,t]})),I.endT(arguments)},post_screen_width_adjusted:function(e,t){t=t||{updateComputed:1,updateStyles:1},y.reposition_overlays({con:e,scroll:0}),y.getAndUpdateCompStyles(!1,!1),t.skip||L.maybeUpdateInspectorPanels(t)},map_formatted_comp:function(e,t,s,r,a,o,n,i,l){var c;if(I.startT(arguments),c=l?L.intelliCompProps:L.compProps,"straight"==s&&("var"==t?c[e[r]]=o:(0==a&&(c[e[r]]=[]),c[e[r]][a]=[],c[e[r]][a].val=o,c[e[r]][a].htmlString=n)),"array"==s){var d,_=-1,u=e[r];for(d in u)u.hasOwnProperty(d)&&("var"==t?c[u[d]]=i[++_]:(0==a&&(c[u[d]]=[]),c[u[d]][a]=[],c[u[d]][a].val=i[++_],c[u[d]][a].htmlString=n))}l?L.intelliCompProps=c:L.compProps=c,I.endT(arguments)},format_exceptions:function(e,t,s,r,a,o){var n,i,l,c,d,_,u,p,g,f,m;if("var"==a?n=s:s[r]&&(n=s[r].val,i=s[r].htmlString),!I.hasValue(n))return!1;"font-family"==t||"display"==t||"grid-template-areas"==t||"list-style-type"==t||"border-top-left-radius"==t||"border-top-right-radius"==t||"border-bottom-right-radius"==t||"border-bottom-left-radius"==t?L.map_formatted_comp(e,a,"straight",t,r,n,i,[],o):"text-shadow"==t||"box-shadow"==t?((_=n.match(/(-?\d+px)|(rgba?\(.+\))/g))?"MSIE"!=L.browser&&(u=_[1],l=_[2],d=I.replace_decimals(_[0],1),c=_[3],"text-shadow"==t?_=[u,l,c,d]:"box-shadow"==t&&(_=[u,l,c,_[4],d,_[5]])):(_=[0,0,0,"none"],"box-shadow"==t&&(_[3]=0,_[4]="none",_[5]="")),L.map_formatted_comp(e,a,"array",t,r,n,i,_,o)):"list-style-image"==t?L.map_formatted_comp(e,a,"straight",t,r,I.basename(n),i,[],o):"background-img-full"==t?((p=[])[0]=I.extract_str("bg-image",n),(g=I.extract_str("gradient",n))?(s=/gradient\((.+)\)/.exec(g))?(u=s[1],l=I.get_all_matches(u,/rgba?\([^)]+\)/g,0),c=I.replace_all_matches(u,l,"xxx").split(", "),d="",0<=n.indexOf("webkit")&&(d="webkit-"),s=!(_="top to bottom"),-1<c[u=f=0].indexOf("deg")&&(_=e.keys[d+"gradient-angle"][c[0]],s=!0,u=1),p[1]=_,p[2]=l[f],s&&3<c.length||!s&&2<c.length?(u=c[++u].split(" "),p[3]=l[++f],p[4]=u[1],p[5]=l[++f]):(p[3]=l[++f],p[4]="0",p[5]="none")):-1<g.indexOf("svg")&&(p[1]="IE9 can't report",p[2]="IE9 can't report",p[3]="IE9 can't report",p[4]="IE9 can't report",p[5]="IE9 can't report"):(p[1]="none",p[2]="none",p[3]="none",p[4]="0",p[5]="none"),L.map_formatted_comp(e,a,"array",t,r,n,i,p,o)):"background-position"==t?(f=(m=n.split(", "))[0].split(" "),g=e.keys["background-position-x"][f[0]],p=e.keys["background-position-y"][f[1]],g=g||f[0],f=p||f[1],L.map_formatted_comp(e,a,"straight",t,r,g+" "+f,i,[],o)):"background-repeat"!=t&&"background-attachment"!=t&&"background-size"!=t&&"background-clip"!=t||(m=n.split(", "),L.map_formatted_comp(e,a,"straight",t,r,m[0],i,[],o))},filter_css_exceptions:function(e){var t;I.startT(arguments),t=e?L.intelliCompProps:L.compProps;var s,r=TvrMT.data.prog.propExc,a=0;for(s in t)if(t.hasOwnProperty(s)){++a;var o=t[s];if(o===Object(o))for(var n in o)o.hasOwnProperty(n)&&L.format_exceptions(r,s,o,n,"obj",e);else L.format_exceptions(r,s,o,"","var",e)}return I.endT(arguments),a},single_comp_value:function(e){e=L.compProps[e];return e=Array.isArray(e)?e[0].val:e},refresh_comp_css:function(h){if(I.startT(arguments),!L.iframeEditing())return I.endT(arguments),!1;var e=!!h;if(h=h||D("#"+L.selInFocusID),!e&&!I.isDomEl(h))return I.endT(arguments),!1;if(L.filter_css_exceptions(!1)<1){var t=TvrLang.null_selector;return h.find(".option-value").text(t),h.find("div.field-wrap").removeClass("mixed-cp").find("span.comp-style").text(""),void I.endT(arguments)}var t="div.field-wrap:not(.tvr-editor-area)",t=(L.pref.pg_focus?h.find("li.group-tag-"+L.pref.pg_focus):h).find(t),b=L.get_nth_focus();t.each(function(e){var t=D(this);if(!t.hasClass("group-label")&&!t.hasClass("sub-label")){var s=t.find(".option-label"),r=t.find(".option-value"),a=s.text(),o=t.find("span.comp-style"),n=t.find(".property-input"),i=n.val(),l=o.attr("class").split(" ")[1].replace("cprop-",""),c=l,d=s.data("prop"),_=TvrMT.data.prog.pg_tab_props.grid.griditems[d],s=TvrMT.data.prog.pg_tab_props.grid.allgriditems[d],d=s?1:b-1;L.propAliases[l]&&(l=L.propAliases[l]);var u=("grid"===L.pref.pg_focus&&0<b&&L.grid.items&&L.grid.items.length&&L.grid.items[d]&&(_||s)&&(h.find(".grid-tab-griditems").hasClass("active")||h.find(".grid-tab-allgriditems").hasClass("active"))?L.grid.items[d].comp:L.compProps)[l],s=!1,d=t.hasClass("has-variable-line");"event"===l?u=i||("animation"===L.pref.pg_focus?"page load":"unknown"):"event-target"===l?u=i||"self":"event-value"===l&&(u=i||"not set"),L.compProps[c]=u;var p=0;if(I.isDefined(u))if(u===Object(u)){t.addClass("mixed-cp"),L.update_comp_input_overlay(t,o,"[mix]");var g,f=TvrLang.value_varies,m="";for(g in u)u.hasOwnProperty(g)&&I.isDefined(u[g].val)&&(m+='<tr class="mixed-val" rel="'+p+'"><td>'+ ++p+"</td><td title='"+I.escapeHTML(u[g].htmlString)+"'>"+L.colored_box(u[g].val,!0)+"</td></tr>");t.find("table.comp-mixed-table").find("tbody").html(m)}else{f=u;t.removeClass("mixed-cp");var v=u;d||(u=L.truncate_displayed_comp_css(n,u)),t.hasClass("is-picker")?(s=!0,n="background-color:transparent","transparent"!=v&&"none"!=v&&(n="background-color:"+v,f=I.maybe_to_hex(v)),o.html('<span style="'+n+'"></span>')):L.update_comp_input_overlay(t,o,u)}else{f=TvrLang.style_not_applicable;"Content"==a&&(f=TvrLang.not_knowable),o.text("")}f=s?L.trans_gradient_box(v,"computed-color-box")+f:f;r.html(f)}}),h.addClass("visible-computed"),L.flexbox_dynamic_gui(h,{compProps:L.compProps}),"grid"===L.pref.pg_focus&&(_.update_nth_radios(),L.skipGridReflow?L.skipGridReflow=!1:_.itemResising||_.update_grid_canvas()),I.endT(arguments)},update_comp_input_overlay:function(e,t,s){var r;e.hasClass("has-variable-line")?(e=s.split(" "),r=e.length?e:[s],t.each(function(e){D(this).html(r[e])})):t.html(s)},flexbox_dynamic_gui:function(e,t){t.compProps["flex-direction"]&&(e=e.find("div.property-flexbox"),t=t.compProps["flex-direction"],e.removeClass("flex-direction-column flex-direction-column-reverse flex-direction-row-reverse"),I.in_array(t,["column","column-reverse","row-reverse"])&&e.addClass("flex-direction-"+t))},truncate_displayed_comp_css:function(e,t){I.startT(arguments);var s=e.width()/6;return s<t.length&&(t=t.substring(0,s)+"..."),I.endT(arguments),t},colored_box:function(e){if(!e||e.indexOf("rgb")<0||-1<e.indexOf(":"))return e;var t=I.maybe_to_hex(e),e=L.trans_gradient_box(e);return e+='<span class="colored-val">'+t+"</span>"},trans_gradient_box:function(e,t){var s=L.pref.mt_dark_mode?"trans-big-dark":"trans-big";return'<span class="'+(t=t||"colored-box")+'" style="background-image: linear-gradient(0deg, '+e+", "+e+"), url("+L.pluginUrl+"images/"+s+'.png)"></span>'},slugs_from_id:function(e){var t=e.split("-"),s=t[1],r=t[2],e=(e=I.checkObject(L.uiData,[s,r,"label"]))?e.split("|"):[];return!!t.length&&{sectionSlug:s,selectorSlug:r,selectorH:e[0],selectorCode:e[1]}},default_to_sel:function(e){I.startT(arguments);var t=I.checkObject(L.uiData,["non_section","meta","last_viewed_selector"]),t=!!t&&L.slugs_from_id(t);if(!(t=!(t&&I.checkObject(L.uiData,[t.sectionSlug,t.selectorSlug]))?w.modify_main_js_object("get_first_sel",{incRecurse:!1,callbackDepth:["selector"]}).slugs:t))return!1;L.tvr_iterate_selectors_v(!1,"strk-"+t.sectionSlug+"-"+t.selectorSlug,e),I.endT(arguments)},get_manual_wrap_class:function(e){return e.hasClass("mt-vl-input")?".vl-item":".tvr-input-wrap"},adjust_comp_span:function(e,t){I.startT(arguments);var s=this.get_manual_wrap_class(e);"after"==t?e.val()?this.remove_comp_overlay(e,s):this.add_comp_overlay(e,s):"hover"==t&&e.siblings("span.comp-style:not(.comp-for-picker)").addClass("hidden"),I.endT(arguments)},add_comp_overlay:function(e,t){e.closest(t).removeClass("manual-val"),e.siblings("span.comp-style:not(.comp-for-picker)").removeClass("hidden")},remove_comp_overlay:function(e,t){e.closest(t).addClass("manual-val"),e.siblings("span.comp-style:not(.comp-for-picker)").addClass("hidden")},chain_is_on:function(e){return I.isDomEl(e.subgroup.find("input.chained-tracker"))},sync_fields:function(e,a,o){I.startT(arguments);var t=L.get_subgroup_or_tabgroup(a,"inputs"),n=e.val(),i=!1;t.not(e).not(".vl-name-input").each(function(e){var t,s=D(this),r=s.closest(".property-tag");s.hasClass("color")?(s.hasClass("bound")||L.colorpicker_bind(s.parent()),n?L.maybe_set_variable_color(n,s,!1,!0,!1)||L.update_spectrum(n,s,{},!1):L.clear_spectrum_inputs(L.get_meta(s,"property"))):(s.val(n),I.isDefined(o)&&(t=L.get_meta(s,"property"),m.apply_property_unit(n,n,o,r,t.groupSlug,t.propertySlug,{writeToLabel:1,writeToInput:1,writeToJS:1,trail:w.get_property_data(t).propLevels}))),0<e&&""===n&&r.hasClass("has-variable-line")&&(L.delete_variable_field(r,s,a,!1),i=!0),L.post_edit(s)}),i&&L.adjust_grid_line_scroll_buttons(a),I.endT(arguments)},maybe_sync_fields:function(e,t){var s;I.startT(arguments),e.hasClass("autofillable")&&(s=L.get_meta(e,"property"),L.chain_is_on(s)&&L.sync_fields(e,s,t)),I.endT(arguments)},sync_important:function(e,s){I.startT(arguments),L.chain_is_on(e)&&L.get_subgroup_or_tabgroup(e).not(e.property).each(function(e){var t=D(this).find("span.important-toggle");("add"==s&&!t.hasClass("active")||"remove"==s&&t.hasClass("active"))&&L.input_icon_toggle(t,!0)}),I.endT(arguments)},run_input_updated:function(e,t){var s=e.attr("class"),r=!1;if(!s)return!1;if(0<=s.indexOf("property-input")){L.inputWaitingObj=e;var a=L.get_meta(e,"property"),o=e.val(),n=o&&0===o.indexOf("=");if(n)if(!L.process_excel_function(o,a.propertySlug).converted)return L.post_edit(e),!0;L.maybe_sync_fields(e),L.post_edit(e)}else if(0<=s.indexOf("selector-name-input")||0<=s.indexOf("selector-css-textarea"))r=!0,L.pref.selname_code_synced&&e.closest(".mt-folder-form").find(".selector-name-input, .selector-css-textarea").not(e).val(e.val());else if(0<=s.indexOf("sp-input")){n=L.get_related_meta("picker",e.closest(".sp-container")),o=L.inputWaitingObj=n.$input;if(-1<s.indexOf("sp-input-opacity")){a=e.val();if(isNaN(a)||a<0||1<a)return;o.mtspectrum("get")||o.mtspectrum("set",n.$container.find(".sp-input-rgb").val());n=o.mtspectrum("get").toRgb();n.a=a,o.mtspectrum("set",n),L.update_spectrum_inputs(tinycolor(n),o,e,!0)}else-1<s.indexOf("sp-input-var")?L.maybe_set_variable_color(e.val(),o,e,!0):L.update_spectrum(e.val(),o,e,!0)}r||L.set_input_timer()},maybe_set_variable_color:function(e,t,s,r,a){a=!I.isDefined(a)||a;var o,n,i=!E.isJustColor(e,!0)&&e;return i?(-1<i.indexOf("var(")?(n=E.get_variable_name(i))&&(o=E.get_variable_value(n,"css",!0)):-1<i.indexOf("$")&&(o=E.get_variable_value(n,"scss")),o&&L.update_spectrum(o,t,{},a,!0),s&&s.val(i),t.val(i),a&&L.maybe_sync_fields(t),!0):(r&&(L.update_spectrum(e,t,{},a,!0),t.val("")),!1)},bind_input_events:function(t){I.startT(arguments),L.unbind_input_events(t),t.on("input.tvr propertychange.tvr",function(e){L.run_input_updated(t,e)}),t.on("blur",function(){L.unbind_input_events(t)}),I.endT(arguments)},unbind_input_events:function(e){e.off("input.tvr propertychange.tvr")},update_input_width_and_scroll:function(e,t,s,r,a,o,n,i){var l,c,d,_;I.startT(arguments),(r||F.flexible_field_widths())&&(a=a||L.stat.inputWidthCalc,o=o||0,(d=e.val()).length,_=d.replace(/\s/g,"&nbsp;"),a.html(_),l=a.innerWidth()+o,c=i?e.parent():e,n?(d=I.isDefined(n[0])&&Array.isArray(n)?n[0]:"0px",_=I.isDefined(n[1])&&Array.isArray(n)?n[1]:"100%",c[0].style.cssText="width:clamp("+d+", "+l+"px, "+_+")"):c.width(l),s||L.adjust_scroll_buttons(L.get_pg_meta(),"style")),I.endT(arguments)},maybe_scroll_image_fields:function(e){"list"!==e.groupSlug&&"background"!==e.groupSlug&&"mask"!==e.groupSlug||e.group.find(".bg-image-select").each(function(){I.scroll_input_end(D(this))})},done_typing:function(){if(L.isForbiddenProperty(L.inputWaitingObj))return!1;P.ajax_save_settings({$property:L.inputWaitingObj})},get_folders:function(){var a=[];return D("#tvr-menu").find(".section-tag").each(function(e){var t=L.get_meta(D(this),"section"),s=u.folderIsConditional(t.sectionSlug),r=!!u.folderIsEffectivelyGlobal(t.sectionSlug);a[e]={category:TvrLang.select_enter_folder,value:t.sectionH,itemConditional:s&&!r}}),a},get_label_suggestions:function(){var e,t=[],s=L.get_selector_in_focus();L.retargetSelector&&(e=L.retargetSelector.selectorH,t.push({category:TvrLang.original_label,value:e}));var r=L.format_nice_name(s.selectorCode,!1),s=L.format_nice_name(s.selectorCode,!1,!0);return r!==e&&t.push({category:TvrLang.label_suggestions,value:r}),s!==e&&s!==r&&t.push({category:TvrLang.label_suggestions,value:s}),t},ensure_targeting_is_on:function(e){e.bind_wizard_hover(),D("#hover-inspect-toggle").addClass("on")},default_to_folder:function(e){var t,s="";return s=L.retargetSelector?L.retargetSelector.sectionH:I.hasValue(L.selInFocusID)?L.get_meta(D("#"+L.selInFocusID),"selector").sectionH:(t=I.obj_index(0,L.uiData,"non_section"))?t.this.label:"",e&&L.stat.curSecInput.val(s),s},generalTargetingClassFlag:"targeting-or-retargeting",retargetClassFlag:"retarget_selector",selectorLabelEditingClassFlag:"editing-selector-label",adjustClassesOnAdminAndFront:function(e,t){"add"===e?(L.stat.tvr.addClass(t),L.iframeEditing()&&y.stat.html.addClass(t)):"remove"===e&&(L.stat.tvr.removeClass(t),L.iframeEditing()&&y.stat.html.removeClass(t))},selector_key_atts:function(e){return{sectionH:e.sectionH,sectionSlug:e.sectionSlug,selectorSlug:e.selectorSlug,selectorH:e.selectorH,selectorCode:e.selectorCode,id:e.selectorID,mid:e.selectorMID}},show_selector_label_edit:function(){L.selectorLabelEditing||L.stat.tvr.hasClass(L.generalTargetingClassFlag)||(L.stat.tvr.addClass(L.selectorLabelEditingClassFlag),L.selectorLabelEditing=L.get_hierarchy_input_values())},save_selector_label_edit:function(e){var t=L.get_meta(D("#"+L.selInFocusID),"selector"),s=L.stat.curSelInput.val(),r=L.selectorLabelEditing,s=D.extend(!0,{},r,{selectorH:s});if(!L.modify_selector_if_values_changed(t,!1,r,s))return!1;L.hide_selector_label_edit(e)},cancel_selector_label_edit:function(e){var t=L.stat.curSelInput;t.val(L.selectorLabelEditing.selectorH),L.size_hierarchy_inputs(t),L.hide_selector_label_edit(e)},hide_selector_label_edit:function(e){L.enable_selector_auto_name(!0),L.stat.tvr.removeClass(L.selectorLabelEditingClassFlag),L.selectorLabelEditing=!1,e||L.stat.curSelInput.trigger("blur")},retarget_selector:function(e){var t;I.startT(arguments),L.retargetSelector||(MTlocal.clean_tooltips(),t=e||D("#"+L.selInFocusID),t=L.get_meta_for_context(t,"selector"),L.is_cur("selector",t.selectorID)||L.tvr_iterate_selectors_v(t.selectorM),L.update_current_selector_controls(t),L.show_hierarchy_inputs(!0),L.retargetSelector=L.selector_key_atts(t),L.retargetSelector.initialModifySavePackage=!1,L.retargetSelector.initialFolderMoveSavePackage=!1,I.updateObject(L.uiData,[t.sectionSlug,t.selectorSlug],L.retargetSelector,{action:"append",key:"isDraftRetarget",data:L.retargetSelector}),L.sync_selector_modifiers(L.curSelCSS),L.feature_on(D("#hover-inspect-toggle"),"hover_inspect"),I.endT(arguments))},disable_selector_auto_name:function(){L.feature_off(D("#selector_auto_name"),"selector_auto_name",{noSave:1})},enable_selector_auto_name:function(e){L.feature_on(D("#selector_auto_name"),"selector_auto_name",{noSave:1,doNotUpdateField:e})},save_draft_selector:function(e,t,s,r){s=s||L.get_meta(D("#"+L.selInFocusID),"selector"),r=r||{savePackage:[]};var a=L.get_hierarchy_input_values(!1,!0),o=e?"isDraftRetarget":"isDraft",n=!e,i=e?"retarget":"new",a=L.modify_selector_if_values_changed(s,!0,s,a);if(!a)return!1;L.hide_hierarchy_inputs(),a.changedRequired&&(s=L.get_meta(D("#"+L.selInFocusID),"selector")),r.user_action=I.checkObject(L.draft_user_action,[i,"user_action"]),n?r.savePackage.push({action:"append",trail:[s.sectionSlug],key:s.selectorSlug,data:I.checkObject(L.uiData,[s.sectionSlug,s.selectorSlug])}):e&&(L.retargetSelector.sectionSlug!==s.sectionSlug&&s.sectionH,L.retargetSelector.M=L.selector_key_atts(s),Array.prototype.push.apply(r.savePackage,L.surgically_adjust_retarget_save_packages(L.retargetSelector))),w.updateObjectAndSavePackage(r.savePackage,{action:"delete",trail:[s.sectionSlug,s.selectorSlug],key:o});o=!1!==I.in_array(s.sectionSlug,L.draftFolders)&&I.checkObject(L.uiData,[s.sectionSlug,"this","logic","expr"]);if(L.resetDraftTrackers(e,!0,"afterSave"),L.save_last_viewed_selector(L.selInFocusID),!L.doNotReselectRevertedRetargetSel&&L.iframeEditing()&&y.select_current_selector_elements({scroll:!1}),t){let e=parseInt(L.pref.auto_folders),t={settings:r};o&&(u.updateDraftFolderInSession({},!0),u.maybeAddLogicAdjustedFlag(s.sectionSlug,t.settings),w.updateObjectAndSavePackage(t.settings.savePackage,{action:"replace",trail:[s.sectionSlug,"this"],data:I.checkObject(L.uiData,[s.sectionSlug,"this"])}),e&&(t.settings=u.maybeAutoSortSection("js",s,r)),u.addSaveLogicCallback(s,!0,t,!0)),e&&(t.settings=u.maybeAutoSortSelector("js",s,t.settings)),P.ajax_save_settings(t)}},clean_duplicate_save_packages:function(e,t){for(var s={},r=e.length-1;0<=r;r--){var a=e[r],o=a.trail.join(".");a[t]&&(s[o]?e.splice(r,1):s[o]=1)}},surgically_adjust_retarget_save_packages:function(e){if(!e.initialModifySavePackage)return[];var t=e,s=(e.M,e.initialModifySavePackage),r=e.lastModifySavePackage||s,a=e.initialFolderMoveSavePackage,e=e.lastFolderMoveSavePackage||a,a=L.findReplaceSavePackages(s,{returnRenameOrder:1}).order,s=[];return r&&(L.findReplaceSavePackages(r,{origAtts:t,origSelectorOrder:a,replaceTrailOnLabelCodeUpdate:1,applyOrigAttsToRename:1,applyOrigSectionToSelectorReplace:1}),Array.prototype.push.apply(s,r)),e&&(L.findReplaceSavePackages(e,{origAtts:t,applyOrigAttsToDeleteSelector:1}),Array.prototype.push.apply(s,e)),s},findReplaceSavePackages:function(e,t){for(var s={},r=t.origAtts||{},a=0;a<e.length;a++){var o=e[a];switch(o.action){case"array_merge_recursive_distinct":t.replaceTrailOnLabelCodeUpdate&&I.checkObject(o,["data","label"])&&L.replaceInTrail(o.trail,r.sectionSlug,r.selectorSlug);break;case"rename":t.returnRenameOrder?s.order=o.order:t.applyOrigAttsToRename&&(o.key=r.selectorSlug,o.order=t.origSelectorOrder,L.replaceInTrail(o.trail,r.sectionSlug,!1,-1));break;case"reorder":break;case"replace":t.applyOrigSectionToSelectorReplace&&o.fullSelectorUpdate&&L.replaceInTrail(o.trail,r.sectionSlug);break;case"delete":t.applyOrigAttsToDeleteSelector&&L.replaceInTrail(o.trail,r.sectionSlug,!1,-1)}}return s},replaceInTrail:function(e,t,s,r,a){t&&e.splice(r=void 0!==r?r:-2,1,t),s&&e.splice(-1,1,s)},go_to_code_view_selector_line:function(e,t){var s=O.eds["adaptable-editor"],r=e.code;s.gotoLine(e.line,0,!1),s.navigateLineEnd(),t&&y.reposition_overlays({scroll:1,con:"resume-existing-code-sel",css:r}),O.prev_code_selector=r},should_resume_existing_draft:function(e,t){return"GUI"===t&&L.draftSelector.atts.mid===e.id},resume_existing_or_set_draft_selector:function(e,t,s){I.startT(arguments);var r,a,o,n=s.existingSelector||!(!y.isUsingExistingSel()||!t.mSels)&&t.mSels[0];n&&(s.forceResume||!L.retargetSelector&&!s.customCSSVal)?(r=L.pref.show_code_editor?"code":"GUI",a="code"==(o="hand_coded_css"===n.type?"code":"GUI"),L.should_resume_existing_draft(n,o)||L.cancel_draft_selector_edit(a,{elementAlreadySelected:"code"==o}),"GUI"==o?L.tvr_iterate_selectors_v(!1,n.id,{scroll:s.scroll,elementAlreadySelected:s.elementAlreadySelected,doNotUpdateSelectorSuggestions:s.doNotUpdateSelectorSuggestions,switchSelVariation:s.switchSelVariation}):L.go_to_code_view_selector_line(n,s.updateHighlighting),r!=o&&P.update_full_logs({short:"See "+(o="GUI"==o?o:"full code")+" view",long:"<p>An existing selector targets the element you selected, but it was created in the "+o+" view. To switch, go to <i>Settings > View > Full code editor</i> and adjust the toggle.</p>",type:"info"})):(L.show_hierarchy_inputs(L.retargetSelector),L.create_or_update_draft_selector(!1,!0,s)),I.endT(arguments)},create_or_update_draft_selector:function(e,t,s){I.startT(arguments);var r=L.get_hierarchy_input_values(e,t);if(!r)return!1;if(L.pref.show_code_editor){if(!L.pref.buyer_validated&&15<O.count_editor_selectors())return alert(TvrLang.trial_notice),!1;r.selectorCode&&O.insert_code_view_selector(r.selectorCode)}else{var a=L.getOrCreateFolder(r.sectionH,t);if(!a)return!1;if(L.retargetSelector||L.draftSelector.atts.id){var o=L.get_meta(D("#"+L.selInFocusID),"selector");if(!L.modify_selector_if_values_changed(o,t,o,{sectionSlug:r.sectionSlug,sectionH:r.sectionH,selectorSlug:I.convert_to_param(r.selectorH),selectorH:r.selectorH,selectorCode:r.selectorCode},s))return!1}else if(L.get_set_selector_values({action:"set",target:"popup",context:"add",label:r.selectorH,code:r.selectorCode,M:a}),!L.add_selector(a,L.stat.addSelectorForm,t,s))return!1;s.addPseudoBaseStyles&&L.adjust_pseudo_base_styles(!0,L.pref.pseudo_base_styles)}I.endT(arguments)},get_hierarchy_input_values:function(e){var t,s=L.stat.curSecInput.val();I.hasValue(s)||L.default_to_folder(L.stat.curSecInput),e?t=L.format_nice_name(e,L.pref.selname_code_synced):(t=L.stat.curSelInput.val(),e=(e=L.stat.curCodeInput.val())||I.checkObject(y,["dom","sels","final",0,"code"]),t||e&&(t=L.format_nice_name(e,L.pref.selname_code_synced)));var r=I.convert_to_param(s),a=u.maybeUseAutoOrAvailableFolder({sectionSlug:r,sectionH:s});return{sectionSlug:r=a.sectionSlug,sectionH:s=a.rawSecName,selectorSlug:I.convert_to_param(t),selectorH:t,selectorCode:e}},checkMaxedFolder:function(e,t){return I.obj_length(L.uiData[e],{exclIfDraft:t,exclKey:"this"})>=L.maxSelsPerFolder},get_set_selector_values:function(e){var t,s,r,a;if("M"===e.target?"get"===e.action&&(r=e.M.selectorH,a=e.M.selectorCode):"popup"===e.target?(t=(s=L.stat[e.context+"SelectorForm"]).find(".selector-name-input"),s=s.find(".selector-css-textarea"),"get"===e.action?(r=s.val(),a=s.val()):"set"===e.action&&(t.val(e.label),s.val(e.code))):"hiddenInput"===e.target&&(t=e.M.selectorM.find(".selector-label"),"get"===e.action?(r=(s=t.val().split("|"))[0],a=s[1]):"set"===e.action&&t.val(e.label+"|"+e.code)),"get"===e.action)return{label:r,code:a}},modify_selector_if_values_changed:function(e,t,s,r,a){a=a||{};var o=I.convert_to_param(s.sectionH)!==I.convert_to_param(r.sectionH)&&r.sectionH,n=s.selectorH!==r.selectorH,i=s.selectorCode!==r.selectorCode,s={};return!((o||n||i)&&(s.changedRequired=!0,L.get_set_selector_values({action:"set",target:"popup",context:"edit",label:r.selectorH,code:r.selectorCode,M:e}),!L.action_modify_selector(e,L.stat.editSelectorForm,{switchSelVariation:a.switchSelVariation},o,!1,t)))&&s},delete_draft_selector:function(){var e,t;L.draftSelector.atts.id&&(e=D("#"+L.draftSelector.atts.id),I.isDomEl(e)&&(t=L.get_meta(e,"selector"),L.action_delete_selector(t,!0))),L.draftSelector.ace.range&&L.pref.show_code_editor&&((t=L.draftSelector.ace).editor.session.replace(t.range,""),L.draftSelector.ace={})},get_hierarchy_inputs:function(){return L.stat.curSecInput.add(L.stat.curSelInput).add(L.stat.curCodeInput)},show_hierarchy_inputs:function(e){var t=L.generalTargetingClassFlag;e&&(t+=" "+L.retargetClassFlag),L.adjustClassesOnAdminAndFront("add",t),L.size_hierarchy_inputs(L.stat.curCodeInput,!0)},size_hierarchy_inputs:function(e,s){(e=e||L.get_hierarchy_inputs()).each(function(){var e=D(this),t=!1;"code-hierarchy-input"===e.attr("id")&&(t=L.stat.codeInputWidthCalc),L.update_input_width_and_scroll(e,0,!0,!0,t,2),s&&I.scroll_input_end(e)})},hide_hierarchy_inputs:function(){var e=L.generalTargetingClassFlag+" "+L.retargetClassFlag;L.adjustClassesOnAdminAndFront("remove",e)},resetRetargetCSSModifiers:function(){for(var e=Object.keys(L.preRetargetModifierConfig),t=0;t<e.length;t++){var s=e[t],r=L.preRetargetModifierConfig[s];r&&(r.wasOn?(r.$combined.addClass("on"),L.pref[r.type][s]=1):(r.$combined.removeClass("on"),delete L.pref[r.type][s]))}L.preRetargetModifierConfig={}},resetDraftTrackers:function(e,t,s){e?(e=L.retargetSelector.M,L.retargetSelector=!1,L.draft_user_action.retarget={},L.resetRetargetCSSModifiers(),"afterSave"===s&&w.modify_main_js_object("update_section_css",{savePackage:[]},{M:e,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]})):(L.draftSelector.atts={},L.draft_user_action.new={}),L.clean_draft_folders(),L.folderNameCustomized=!1,L.get_set_selector_values({action:"set",target:"popup",context:"add",label:"",code:""}),t&&L.clear_css_filters(!0),L.enable_selector_auto_name(!0),L.feature_off(!1,"create_additional_selector")},clean_draft_folders:function(){for(var e=L.draftFolders.length-1;0<=e;e--){var t=L.draftFolders[e],s=I.checkObject(L.uiData,[t]);1<I.obj_length(s)||(t=D("#strk-"+t),I.isDomEl(t)&&(t=L.get_meta(t,"section"),L.action_delete_section(t,!0))),L.draftFolders.splice(e,1)}},cancel_draft_selector_edit:function(e,t){if(L.hide_hierarchy_inputs(),L.retargetSelector){var s=L.retargetSelector,r=L.get_meta(D("#"+L.selInFocusID),"selector"),a=r.sectionSlug!==s.sectionSlug&&s.sectionH;if(L.update_current_selector_controls(!1,s),I.updateObject(L.uiData,[r.sectionSlug,r.selectorSlug],!1,{action:"delete",key:"isDraftRetarget"}),L.get_set_selector_values({action:"set",target:"popup",context:"edit",label:s.selectorH,code:s.selectorCode,M:r}),!L.action_modify_selector(r,L.stat.editSelectorForm,{},a,!1,!1,!0))return L.resetDraftTrackers(L.retargetSelector,!0,"afterCancel"),!1;!L.doNotReselectRevertedRetargetSel&&L.iframeEditing()&&y.select_current_selector_elements({scroll:!1})}else L.delete_draft_selector(),e&&L.default_to_sel(t);L.resetDraftTrackers(L.retargetSelector,!0,"afterCancel")},update_current_selector_controls:function(e,t,s){s=s||{};var r=(e||t).sectionH,a=(e||t).selectorH,t=(e||t).selectorCode;L.stat.curSecTrailText.text(r),L.stat.curSecInput.val(r),L.update_and_scroll_input(L.stat.curSelInput,a),L.stat.curCodeInput.is(":focus")||L.update_cur_code(t),s.switchSelVariation&&L.edit_selector_fields_showing()&&(L.context_menu_data.M=e,L.update_edit_selector_fields(e,"selector",L.context_menu_data)),L.size_hierarchy_inputs()},human_tagname:function(e){var t={h1:"heading 1",h2:"heading 2",h3:"heading 3",h4:"heading 4",h5:"heading 5",h6:"heading 6",p:"paragraph",br:"line break",hr:"horizontal rule",abbr:"abbreviation",b:"bold",em:"emphasis",i:"emphasis",ins:"insert",pre:"preformatted",q:"quote",sub:"subscript",sup:"superscript",optgroup:"option group",img:"image",figcaption:"figure caption",a:"link",ul:"unordered list",ol:"ordered list",li:"list item",th:"table heading",tr:"table row",td:"table data",thead:"table head",tbody:"table body",tfoot:"table foot",col:"column",colgroup:"column group"};return t[e]||e},human_pseudo:function(e){var t,s=I.pseudo_str_to_arr(e),r="";for(t in s)s.hasOwnProperty(t)&&(r+=s[t].replace(/^:nth\-(?:child|of\-type)\((.*)\)$/,"#$1").replace(/^:nth\-last\-(?:child|of\-type)\((.*)\)$/,"#-$1").replace("link","unvisited"));return r?" ("+r+")":""},humanize:function(e,t,s){(s=s||{}).keepPre=s.keepPre?e:"";var r=new RegExp("("+e+")([_a-zA-Z0-9"+e+"\\(\\)\\[\\]=\\^\\*'\"\\/\\$~-]+)","g"),e=new RegExp(e,"g");return t=(t=t.match(r))&&t[0]?t[0].replace(e,s.keepPre):"",(t=!s.keepDashes?t.replace(/[-_]+/g," "):t).trim()},ensure_unique_name:function(e,t,s,r,a){I.startT(arguments);var o=1,n="create-new"===s?u.getFolderSelectorKeys(a):{};do{var i=!1,l=new RegExp(" _\\d+$"),c=e.match(l)?(1===o&&(o=2),e.replace(l," _"+o)):1<o?e+" _"+o:e,d=I.convert_to_param(c);if("folderName"==s)i=L.uiData[d];else if("folderWithSpace"==s)i=L.uiData[d]&&I.obj_length(L.uiData[d],{exclKey:"this"})>=L.maxSelsPerFolder;else if("import"==s)i=r.unqSels[d]&&r.unqSels[d].code!=t;else if("create-new"===s)for(let e=0;e<n.length;e++)if(n[e]===d){i=!0;break}}while(o++,i);return I.endT(arguments),c},human_css_name:function(e,t,s){I.startT(arguments);var r,a=[],o=!1,n=(e=e&&(o=e.match(/.bricks-is-frontend\s+(.+?),/))?o[1]:e).split(","),i=L.sel_trail(n[0]).pieces.reverse();for(l in i)i.hasOwnProperty(l)&&(r=i[l].match(/type="([^"]+)"/),a[l]={level:0==l?"child":"parent",tagName:i[l].split(/[#:.\[]/)[0],id:L.humanize("#",i[l]),class:L.humanize("\\.",i[l]),pseudo:L.human_pseudo(i[l]),type:r?r[1]:""});var l,c,d,_,u=[];for(l in a)a.hasOwnProperty(l)&&(c=_="",d=a[l],_=L.human_tagname(d.tagName),d.pseudo&&(c=""+d.pseudo),d.id?u[l]=d.id:d.class?u[l]=d.class:d.type?u[l]=d.type+" "+_:u[l]=_,u[l]+=c);var p="";n[1]&&(p="+"+(n.length-1)+" "+TvrLang.more,u.unshift(p)),I.endT(arguments);n=u[0];var g,f=p?2:1,m=[];for(g in u)if(u.hasOwnProperty(g)){if(f<=g)break;m.push(u[g])}p=m.reverse().join(" ");o&&(p+=" [BGW]");o=p;return p=""===(p=(p=p.replace(/wp block\s?/g,"").replace(/wp\s/g,"WP "))||o)?TvrLang.untitled:p},code_or_fallback:function(e){return e||L.intelli_css},format_nice_name:function(e,t,s){return e=this.code_or_fallback(e),t?e:I.capitalizeFL(L.human_css_name(e,s))},update_nice_name:function(e,t,s){e=e||this.format_nice_name(this.code_or_fallback(t),s),this.update_and_scroll_input(L.stat.curSelInput,e)},update_cur_code:function(e){this.update_and_scroll_input(L.stat.curCodeInput,e)},update_and_scroll_input:function(e,t){e.val(t),L.doNotResizeInputs||L.size_hierarchy_inputs(e),I.scroll_input_end(e)},maybe_auto_select_label:function(e){e=e||D("#sel-hierarchy-input");var t=L.stat.suggestionsAdvanced.find(".code-suggestion.in-focus").find("input.sug-sel"),s=L.stat.cssModifiers.find("input.cssfilter-combo:focus"),r=D("#wizard_inspector_html").find("textarea:focus");L.pref.selname_code_synced||t.is(":focus")||s.length||r.length||TvrMT.integrate.elementor||e.trigger("select")},set_initial_size_of_nth_modifier_inputs:function(){D("#cm-css-filters").find(".cssfilter-combo").each(function(){L.update_input_width_and_scroll(D(this),0,!0,!0,L.stat.codeInputWidthCalc)})},preRetargetModifierConfig:{},sync_selector_modifiers:function(e,i){I.startT(arguments);var l=L.get_active_modifiers_from_selector(e).active;L.stat.cssModifiers.find("li.css-filter-item").each(function(e){var t=D(this),s=t.data(),r=s.type,a=s.filter,o=t.hasClass("on"),n=!o&&l[a],a=o&&!l[a];i&&"page_specific"===r||(n||a)&&((t=L.get_css_filter_alias(a=t)).length&&(a=a.add(t)),n?(a.addClass("on"),L.pref[r][s.pref_sub_key]=1):(a.removeClass("on"),delete L.pref[r][s.pref_sub_key]),"page_specific"===r&&(L.preRetargetModifierConfig[s.pref_sub_key]={wasOn:!n,$combined:a,type:r}))}),I.endT(arguments)},get_active_modifiers_from_selector:function(e){I.startT(arguments);var t=L.pref["custom-prefix-extraValue"]?"|("+I.escapeRegExp(L.pref["custom-prefix-extraValue"])+")":"",t=new RegExp("(?:((?:::?)|\\.mtp?-)([a-zA-Z0-9-]+)(?:\\((.+?)\\))?)"+t,"g"),s=/^:(nth|not|first|last)/,r=I.get_all_matches(e,t,0,{itemObj:1}),t=r.length,a={matches:r,active:{}};if(t)for(var o=t-1;0<=o;o--){var n,i=r[o],l=i.match[0];l.match(s)?r.splice(o,1):(n=l,":"!==(l=i.match[1])&&"::"!==l&&(n=i.match[4]?"custom-prefix":I.isNumeric(i.match[2])?"page-id":"page-name"),a.active[n]=i)}return I.endT(arguments),a},maybeUpdateRecentCustomPrefixes:function(e){var t=I.checkObject(e,["search","customPrefix"]),s=L.pref["custom-prefix-extraValue"],e=L.pref.recent_custom_prefixes;s&&t.$el&&!I.in_array(s,e)&&(e.unshift(s),10<e.length&&e.pop(),P.simple_ajax_request({type:"POST",url:L.ajaxUrl+"&update_recent_custom_prefixes=1",sendData:P.serialized_data_with_single_key(JSON.stringify(e)),plus:"",minus:""}))},maybe_disable_other_page_prefixes:function(e,t,s){L.stat.cssModifiers.find(".flist-page_specific").find(".mt-ui-toggle").not('[data-filter="'+e.data("filter")+'"]').each(function(e){var t=D(this),s=t.data();L.pref.page_specific[s.pref_sub_key]&&L.feature_off(t,"page_specific",{turningOffOtherPagePrefix:1,toggle:1,doNotSelectEl:!0})})},pseudo_updated:function(e,i){var t,l=e.closest("li"),s=l.data(),c=s.aspect,r=s.pref_sub_key;L.preRetargetModifierConfig[r]&&delete L.preRetargetModifierConfig[r],"page_specific"!==c||i.turningOffOtherPagePrefix||i.skipOtherPagePrefixCheck||L.maybe_disable_other_page_prefixes(l,s,i),i.input&&("custom-prefix"===r?(t=L.pref[r+"-extraValue"],s=L.pref[c][r],parseInt(s)&&I.isDefined(t)&&(delete L.pref[c][r],L.pseudo_updated(l,{toggle:1,turnOn:0,doNotSelectEl:!0,skipOtherPagePrefixCheck:1}),L.pref[c][r]=s),L.pref[r+"-extraValue"]=e.val().trim(),y.search_parents_and_descendents(y.triggerEl),y.dom.search.customPrefix.$el||(L.pref[r+"-extraValue"]="")):L.update_input_width_and_scroll(e,0,!0,!0,L.stat.codeInputWidthCalc));e=L.stat.suggestionsAdvanced.find(".code-suggestions");i.turnOn&&L.existingSelSelected&&!i.doNotSelectEl&&L.sug_css_clicked(e.find(".code-suggestion:first-child").find(".sugsel-radio")),e.find(".code-suggestion").each(function(e){i.manual=1,i.$li=l;var t=D(this),s=t.find(".sug-sel"),r=s.attr("rel"),a=t.data("level");I.isDefined(a)||(a=0);var o=s.val(),t=y.apply_css_filters(o,y.dom.search.nodes[a],y.dom,i),o=L.stat.suggestionsMenu.find(".code-suggestion:nth-child("+(e+1)+")").find(".sug-sel"),o=s.add(o);if(o.val(t.code),!y.dom.sels.final[e]||y.dom.sels.final[e].refKey!==r)return!0;var n=!1;"page_specific"===c&&(n=y.get_parent_level_from_selector(t.code,a))===a&&(n=!1),y.dom.sels.final[e].code=t.code,o.each(function(){var e=D(this);e.get(0).scrollLeft=s.get(0).scrollWidth,!1!==n&&e.closest(".code-suggestion").attr("data-level",n).data("level",n)});o=s.attr("rel");o&&y.dom.sels.combo[o]&&L.apply_filter_to_combo_data(y.dom.sels.combo[o],i)}),L.apply_filter_to_combo_data(TvrMT.data.prog.combo.all_sel_suggestions,i),i.doNotSelectEl||((e=e.find(".code-suggestion:first-child, .code-suggestion.in-focus")).length?(e=(e=(e=e.filter(".in-focus"))||e[0]).find("input"),L.sug_sel_updated({$editedField:e,val:e.val(),pseudoUpdated:1})):I.isDomEl(y.triggerEl)&&y.select_element(y.triggerEl,{forceHighlight:1}),i.input&&"custom-prefix"===r&&I.action_after_timeout("after_pseudo_updated_by_input",50,{item:function(){P.save_ui_toggle_update(c,parseInt(L.pref[c][r]),"&pref_sub_key="+r+"&extraValue="+L.pref[r+"-extraValue"])},args:[]}))},apply_filter_to_combo_data:function(e,t,s){for(var r=0;r<e.length;r++){var a=e[r],o="object"==typeof a,n=o?a.value:a,a=o&&void 0!==a.level?a.level:0,a=y.apply_css_filters(n,y.dom.search.nodes[a],y.dom,t).code;o?(e[r].label=a,e[r].value=a):e[r]=a}},maybe_run_code_or_synced_label_field_edited:function(e,t){var s,r=e.hasClass("code-hierarchy-input"),a=L.pref.selname_code_synced&&e.hasClass("sel-hierarchy-input");(r||a)&&(s=e.val(),L.pref.selname_code_synced&&(r?L.stat.curSelInput:L.stat.curCodeInput).val(s),L.sug_sel_updated({$editedField:e,val:s,suggestionCustomised:!t,syncedLabelFieldEdited:a,codeFieldEdited:r,topFieldEdited:1,comboSelected:!!t,topComboSelected:1,ui:t}))},suggestion_instances:function(e){var t=e.exclItem||"#invalid",a=e.exclInput||"#invalid",s=e.itemFilter||".mt-selector-suggestion.in-focus",s=L.bothSuggestionAreas(s);e.incCurCode&&(s=s.add(L.stat.curCodeInput));var o=e.$items||s.not(t),r={$items:o};Array.isArray(e.action)||(e.action=[e.action]);for(var n=0;n<e.action.length;n++)!function(e,t,s){switch(e){case"getInputs":case"setInputs":var r=o.find("input[type=text]").addBack("input[type=text]").not(a);"setInputs"===e&&r.each(function(){var e=D(this);e.val(t.val),I.scroll_input_end(e)}),s.$inputs=r;break;case"getN":case"setN":r=o.find(".num-els-icon-wrap");"setN"===e&&r.html(L.num_els_icon(t.n)),s.$nWrap=r;break;case"radioSelection":o.closest(".radio-set-container").find(".mt-selector-suggestion").removeClass("hover-elsewhere in-focus"),o.addClass("in-focus")}}(e.action[n],e,r);return r},customCSSN:0,show_suggestion_refresh_icon:function(e,t,s){L.customCSSN=t,e&&e.siblings(".mt-clear-field").addClass("refresh-code-suggestions").attr("title",TvrLang.refresh_suggestions)},hide_suggestion_refresh_icon:function(e){L.customCSSN=0,e&&e.siblings(".mt-clear-field").removeClass("refresh-code-suggestions").attr("title","")},refresh_code_suggestions:function(e){L.iframeEditing()&&(e=e.siblings("input").val(),y.select_element(y.triggerEl,{suggestionCustomisedForNewEl:1,customCSSVal:e,forceHighlight:1,pseudoSelected:I.get_before_after(e,1)}))},sug_sel_updated:function(e){var t=L.strip_beyoned_brace(e.val),s=e.$editedField,r=y.get_sel_elements({con:"sug_sel_updated",css:t}),a=r.n,o=r.$toEls,n=!I.in_array(t,y.dom.sels.final,!1,"code"),i=a&&n,l=a&&!r.triggerElInNewSelection,c=[],r={e:{},doNotFocusEditor:1,doNotUpdateDomSearch:!l&&!e.customPrefixChanged,doNotUpdateSelectorSuggestions:1,customCSSVal:t,scroll:l,sugSelUpdatedConfig:e,notInSugList:n?t:void 0,suggestionCustomisedForNewEl:l,forceHighlight:1,pseudoSelected:I.get_before_after(t,1),addPseudoBaseStyles:e.addPseudoBaseStyles,switchSelVariation:e.switchSelVariation,doNotRepositionOverlays:e.doNotRepositionOverlays};if(e.radioSelection){n=e.isExisting?"mt-matching-item":"code-suggestion",l=e.$item.index();if(L.suggestion_instances({action:"radioSelection",itemFilter:"."+n+":nth-child("+(l+1)+")",val:t}),e.isExisting){l=e.$item.data();return L.doNotReselectRevertedRetargetSel=1,L.existingSelRadioUsed=1,L.resume_existing_or_set_draft_selector(y.triggerEl,y.dom,{existingSelector:l,forceResume:1,updateHighlighting:1,scroll:1,doNotUpdateSelectorSuggestions:1,elementAlreadySelected:0}),L.doNotReselectRevertedRetargetSel=!1,L.existingSelRadioUsed=0,void L.feature_off(!1,"create_additional_selector")}}L.intelli_css=t,e.suggestionCustomised&&i?L.show_suggestion_refresh_icon(s,a,t):L.hide_suggestion_refresh_icon(s),e.suggestionCustomised&&L.sync_selector_modifiers(t,!0),c.push("setN"),e.comboSelected&&I.scroll_input_end(e.$editedField),e.topComboSelected&&c.push("radioSelection"),c.push("setInputs");i=!1;e.comboSelected?i=".code-suggestion.refKey-"+e.ui.item.refKey:(e.topComboSelected||e.stateSelectorSet)&&(i=".code-suggestion:first-child"),L.suggestion_instances({action:c,val:t,n:a,incCurCode:1,exclInput:s,itemFilter:i}),parseInt(L.pref.selector_auto_name)&&L.update_nice_name(!1,t,L.pref.selname_code_synced),y.select_element(o,r),L.previous_selector=t},default_code_suggestion:function(e,t,s){return t.intelli_css||t.customCSSVal||(e?e.code:s)},update_selector_suggestions:function(e){I.startT(arguments);for(var t="",s=[],r=0;r<y.dom.sels.final.length;r++){var a,o=y.dom.sels.final[r],n=o.level,i=o.isCombo?" combobox has-arrows":"",l=i?'data-appto="#style-components"':"",c=o.isCombo?" combobox-has-arrows ":"",d=i?'<span class="combo-arrow"></span>':"",_=(i&&"x_plus"===o.refKey?"<sup>+</sup>":"")?"+":"",u=i?'rel="'+o.refKey+'"':"",p=I.regular_escape_quotes(o.code),g=o.n,f=r<1&&(L.retargetSelector||!y.dom.mSelsCount||e.customCSSVal)?" in-focus":"";r<1&&((p=L.default_code_suggestion(o,e,a=p))!==a&&(g=y.jquery_compat_sel_elements(p).length,n=y.get_parent_level_from_selector(p,n)));n='data-level="'+n+'"';i?Array.prototype.push.apply(s,y.dom.sels.combo[o.refKey]):s.push(y.formattedSelSugItem(o,y.dom)),t+='<div class="code-suggestion mt-selector-suggestion refKey-'+o.refKey+f+'" '+n+">"+TvrMT.data.templates.new_sel_radio+'<span class="tvr-input-wrap'+c+'"><input type="text" spellcheck="false" class="sug-sel'+i+'" value="'+I.regular_escape_quotes(p)+'" '+u+" "+l+" />"+d+'<span class="mt-clear-field"></span></span><span class="num-els-icon-wrap">'+L.num_els_icon(g,_)+"</span></div>"}L.redo_sug_sels(t,{advanced:1}),L.redo_sug_sels(t,{frontend:1}),e.selectCurrentSelector||(p=L.code_or_fallback(!1),parseInt(L.pref.selector_auto_name)&&L.update_nice_name(!1,p,L.pref.selname_code_synced),L.update_cur_code(p),L.previous_selector=p),TvrMT.data.prog.combo.all_sel_suggestions=s,I.endT(arguments)},otherFilters:function(e,t){e=L.bothSuggestionAreas(".fav-filters").add("#cm-css-filters").find(e);return e=t?e.not(t):e},bothSuggestionAreas:function(e){var t=L.stat.suggestionsAdvanced.add(L.stat.suggestionsMenu);return e?t.find(e):t},redo_sug_sels:function(e,t){I.startT(arguments),t=t||{};var s=D(e),r=t.frontend?L.stat.suggestionsMenu:t.advanced?L.stat.suggestionsAdvanced:L.bothSuggestionAreas();r.find(".code-suggestions").html(s),I.endT(arguments)},num_els_icon:function(e,t){t=t||"";var s=I.isDefined(e)?e.toString():"0";return'<span class="num-els-icon'+(0===e?" el-targets-nothing":"")+'" title="'+(1===e?tvrsprintf(TvrLang.n_els,s):tvrsprintf(TvrLang.n_els_plural,s+t))+'">'+e+"</span>"},refresh_wizard_comp_css:function(){if(I.startT(arguments),I.isDomEl(y.triggerEl)){L.filter_css_exceptions("intelli");var e,t,s=L.intelliCompProps=L.un_flatten_css(L.intelliCompProps),r=L.pgInFocusWiz,a="";for(e in s[r])s[r].hasOwnProperty(e)&&(void 0!==(t=s[r][e])&&(a+='<span class="info-label '+e+'-info-label">'+e+':</span>\n<span class="info-value '+e+'-info-value">'+(t=t&&-1<t.toString().indexOf("rgb")?L.trans_gradient_box(t)+" "+I.maybe_to_hex(t):t)+"</span>",0))}else;D("#comp-"+r).find(".mt-expandable-panel").html(a);for(var o=L.templates.key_computed_info,n=0;n<E.keyInfoProps.length;n++){var i=E.keyInfoProps[n],l=y.compProps[i];!Array.isArray(l)&&l!==Object(l)||(l=l[0])!==Object(l)||(l=l.val),I.isDefined(l)?"color"===i||"background-color"===i?l=L.trans_gradient_box(l)+" "+I.maybe_to_hex(l):"font-size"!==i&&"line-height"!==i&&(l=l.replace(/px$/,"").replace(/^0$/,"-")):l="-",o=o.replace(new RegExp("{"+i+"}"),l)}D("#key-computed").html(o),I.endT(arguments)},un_flatten_css:function(e){I.startT(arguments);var t,s=[];for(t in L.cssProps)if(L.cssProps.hasOwnProperty(t))for(var r in s[t]=[],L.cssProps[t])L.cssProps[t].hasOwnProperty(r)&&("background-img-full"===(r=L.cssProps[t][r].cssf)||"extracted-gradient"===r||"google-font"===r||L.propAliases[r]||"order-grid"===r||"text-shadow"===r||"box-shadow"===r||"background-image"===r&&"gradient"===t||(s[t][r]=e[r]));return I.endT(arguments),s},ensure_backwards_compat:function(){I.startT(arguments),parseInt(L.pref.remove_all_bricks_container_hacks)&&(L.pref.manual_recompile_all_css=1);var e=parseInt(L.pref.manual_recompile_all_css);L.compile_non_compiled_selectors(!e),I.endT(arguments)},compile_non_compiled_selectors:function(e){L.uiData=w.filter_object_keys("clean",L.uiData,0,!1,{fullCodeSelectors:1,hand_coded_css:1});var t={M:{},settings:{keyFormatFixes:{sectionKeyChanges:{},actions:[]}},template:"ui",no_style_node_update:!0,compile_non_compiled:!0,passNum:1,dataFormattingFixesOnly:e,onlyRun:{recurse_key:["m_query"]},onlyLoop:{recurse_key:["m_query"]}},s={section:[{item:w.ensure_valid_folder_and_label,args:[!1]},{item:w.update_item_index,args:[!1]},{item:w.maybe_fix_key_format,args:[!1]}],selector:[{item:w.update_item_index,args:[!1]},{item:w.check_jsu,args:[!1]},{item:w.check_values,args:[!1]},{item:w.maybe_fix_key_format,args:[!1]}],group:[{item:w.check_values,args:[!1]}],property:[{item:w.update_property_values_structure,args:[!1]},{item:w.update_legacy_unit_structure,args:[!1]}]},e={section:[{item:w.update_dots,args:[!1]}],selector:[{item:w.check_jsu,args:[!e]},{item:w.update_dots,args:[!1]}],group:[{item:w.modify_item,args:["group_to_css",{dontUpdateSavePackage:e,dontRemoveVendorPrefixes:1}]},{item:w.check_values,args:[!1]}]};parseInt(L.pref.remove_all_bricks_container_hacks)&&s.selector.push({item:w.remove_all_bricks_container_hacks,args:[!1]}),t.maxDepth="property",t.cb=s;s=w.run(L.uiData,t).settings;t.settings=s,t.maxDepth="group",t.cb=e,t.passNum++;var r=(s=w.run(L.uiData,t).settings).keyFormatFixes.actions;if(r.length)for(var a=0;a<r.length;a++)w.modify_main_js_object("rename",{},r[a]);L.client_scss?s=w.run_global_scans(s,["scss_types"]):I.checkObject(L.uiData,["non_section","scss_usage"])&&delete L.uiData.non_section.scss_usage,s.savePackage&&s.savePackage.length||r.length?(s.savePackage=!1,s.fullSCSSCompile=L.client_scss,P.ajax_save_settings({settings:s,serialise:!0})):L.client_scss&&L.mt_compile_scss({isSassVendorPrefixPatch:1,settings:{fullSCSSCompile:1}}),parseInt(L.pref.manual_recompile_all_css)&&(L.pref.manual_recompile_all_css=0,P.simple_ajax_request({type:"GET",url:L.ajaxUrl+"&manual_recompile_all_css=0"})),parseInt(L.pref.remove_all_bricks_container_hacks)&&(L.pref.remove_all_bricks_container_hacks=0,P.simple_ajax_request({type:"GET",url:L.ajaxUrl+"&remove_all_bricks_container_hacks=0"})),parseInt(L.pref.initial_view_set)||L.stat.tvr.width()<=796&&(I.toggle_radio_checkbox(D("#screen-layout-options").find('.switch-layout-preset[data-preset="S"]')),P.simple_ajax_request({type:"GET",url:L.ajaxUrl+"&initial_view_set=1"}))},isContainerQuery:function(e){return I.checkObject(L.mqs,[e,"container"])},load_visual_view:function(e){if(I.startT(arguments),D("#mt-picker-palette").removeClass("hidden"),L.forceNoLayoutSave=!0,F.update_num_items_docked("left"),F.update_num_items_docked("right"),F.adjust_preview_margin_and_save_config({skipSave:1,skipPGPress:1,side:"left"}),F.adjust_preview_margin_and_save_config({skipSave:1,skipPGPress:1,side:"right"}),O.init_editor_deps(),L.maybe_initiate_sass_js(),L.pref.theme_mode_set||L.set_default_theme_mode(),L.ensure_backwards_compat(),L.stat.body.addClass("tvr-visual"),L.pref.detach_preview||MTlocal.maybe_load_site_preview(),L.pref.returned_ajax_msg&&!L.pref.returned_ajax_msg_seen)for(var t in L.pref.returned_ajax_msg)L.pref.returned_ajax_msg.hasOwnProperty(t)&&P.log(L.pref.returned_ajax_msg[parseInt(t)]);window.history.pushState&&parseInt(D("#clean-ui-url").attr("rel"))&&window.history.pushState(L.uiUrl,null,L.uiUrl),O.bind_editor(L.stat.inlineEditor,{filterClass:"custom-css-pre",mode:parseInt(L.pref.allow_scss)?"scss":"css",M:"css",directContent:"pending"}),_.bind_gridstack(),L.default_to_tab("mq"),L.default_to_sel({elementAlreadySelected:L.pref.show_code_editor}),L.toggle_enabled_buttons(),L.set_initial_size_of_nth_modifier_inputs(),L.pref.detach_preview&&F.retrieve_or_load_detached(),MTlocal.apply_rulers(),L.pref.show_code_editor&&L.default_to_tab("css"),window.launchMTUnlock&&L.show_dialog(D("#mt-renew-prompt")),L.adjust_scroll_buttons(!1,"responsive"),g.maybe_update_available_builder_name(),L.forceNoLayoutSave=!1,(L.pref.show_setup_screen||L.innoFireall)&&(L.show_dialog(D("#program-settings-menu").find(".item-mt-initial-setup")),L.pref.show_setup_screen&&P.save_multiple_preferences({show_setup_screen:0,show_setup_screen_first_time:0})),I.endT(arguments)},page_load_debug:function(){},scss_div:"/*MTSCSSPART*/",sass_preloaded_files:[],sass_worker_to_mt_dir:"../../../../micro-themes/",maybe_initiate_sass_js:function(){L.client_scss&&(L.sass=new Sass,L.uiData.non_section.hand_coded_css,L.sass.options({style:Sass.style.expanded,indent:"\t"},function(){}),L.sass.importer(function(e,t){var s=e.resolved.replace("/sass/",""),r=L.check_file_exists(s,!0);r?I.in_array(r,L.sass_preloaded_files)?t({path:e.path}):P.simple_ajax_request({url:L.ajaxUrl+"&load_sass_import="+encodeURI(r),dataType:"json",plus:TvrLang.loading_sass_import,minus:TvrLang.loading_sass_import_failed,cbFunction:function(t,s){L.sass.writeFile(r,t.content,function(e){L.sass_preloaded_files.push(r),s({content:t.content})})},cbfArgs:[t]}):t({error:"Import failed, no file found: "+s+". Try refreshing Microthemer if path is definitely correct."})}),L.sass.writeFile(TvrMT.data.dyn.preloaded_sass_imports,function(e){L.sass_preloaded_files=Object.keys(TvrMT.data.dyn.preloaded_sass_imports),TvrMT.data.dyn.preloaded_sass_imports=null,L.sass.compile(L.uiData.non_section.hand_coded_css,function(e){})}))},parse_scss_or_css:function(e,t){t=t||"scss";try{return window.TvrSCSS.parse(e,{syntax:t})}catch(e){}return!1},stringify_scss:function(e){return e.toString()},normalise_scss_type_name:function(e,t){return I.in_array(e,["variable","mixin","function"])?t.replace(/-/g,"_"):t},get_ast_child_node:function(e,t,s){for(var r=0;r<e.length;r++){var a=e[r];if(a.type===t)return s?a[s]:a}return!1},get_variable_node_data:function(e,t,s,r){var a=t.content[0].content,o=t.insideFM||r.insideFM,n=r.isRelatedType;if("property"===s.type){var i="";if((s=L.get_ast_child_node(s.parent.content,"value"))&&(e={value:i=s.toString()}),n&&!L.is_scss_global_var(i))return!(r.localDecs[a]=1)}else if(n&&(r.localDecs[a]||t.insideArg&&!t.insideDec))return!(r.localDecs[a]=1);return!(o&&r.onlyGlobalVars&&!L.is_scss_global_var(e.value)&&!L.is_scss_default_var(e.value))&&{name:a,value:e}},is_scss_global_var:function(e){return"string"==typeof e&&-1<e.indexOf("!global")},is_scss_default_var:function(e){return"string"==typeof e&&-1<e.indexOf("!default")},get_scss_types:function(c){var e=c.parseTree||L.parse_scss_or_css(c.code,"scss");if(!e)return"parseFail";L.parseTreeDone||(L.parseTreeDone=!0);var d={},_=c.types||L.scss_types,u=!1;return e.traverse(function(e,t,s){var r=e.type,a=!1,o={value:1};("mixin"===r||s&&s.insideFM||"atrule"===r&&L.get_ast_child_node(e.content,"function"))&&(e.insideFM=1),("arguments"===r||s&&s.insideArg)&&(e.insideArg=1),("declaration"===r||s&&s.insideDec)&&(e.insideDec=1);var n=c.isRelatedType&&!I.in_array(r,["property","variable","extend"]);if(!I.in_array(r,_)||n)return!1;switch(r){case"atkeyword":if("import"!==(r=L.get_ast_child_node(e.content,"ident","content")))return!1;l=L.get_ast_child_node(s.content,"string","content");break;case"property":return e.parent=s,!1;case"variable":var i=L.get_variable_node_data(o,e,s,c);if(!i)return!1;l=i.name,o=i.value;break;case"function":if(l=e.content[0].content,I.in_array(l,E.css_functions))return!1;"atrule"===s.type&&(o={value:s.toString()},a={node:s,parent:s});break;case"mixin":l=L.get_ast_child_node(e.content,"ident","content"),o={value:e.toString()},a={node:e,parent:s};break;case"include":r="mixin",l=L.get_ast_child_node(e.content,"ident","content");break;case"extend":var l=L.get_ast_child_node(e.content,"selector").toString(),o={value:"extender"}}l=L.normalise_scss_type_name(r,l),I.checkObject(d,[r,l,"values"])||I.updateObject(d,[r,l,"values"],[]),d[r][l].values.push(o.value),c.isRelatedType||!a||(n=L.get_scss_types({isRelatedType:1,parseTree:a.node,types:["property","variable","extend","include","function"],localDecs:{},insideFM:1}))&&(d[r][l].related_types=n),1!==o.value&&(d[r][l].value=o.value,d[r][l].hasDeclaration=1),u=!0}),!!u&&d},maybe_merge_related_types:function(e,t){t&&(e.related_types||(e.related_types={}),e.related_types=D.extend(!0,e.related_types,t))},cross_update_related_types:function(e,t,s){for(var r=Object.keys(s),a=0;a<r.length;a++)for(var o=r[a],n=Object.keys(s[o]),i=0;i<n.length;i++){var l=n[i];I.checkObject(e,[o,l])||I.updateObject(e,[o,l],{}),L.maybe_merge_related_types(e[o][l],t)}},log_all_scss_usage:function(e,t,s,r,a){for(var o=Object.keys(s),n=0;n<o.length;n++)for(var i=o[n],l=s[i],c=Object.keys(l),d=0;d<c.length;d++){var _=c[d],u=D.extend(!0,{},s[i][_]),p=u.values,g=u.value,f=u.related_types;I.checkObject(t,[i,_,"deps"])||I.updateObject(t,[i,_,"deps"],[]),I.checkObject(t,[i,_,"values"])||I.updateObject(t,[i,_,"values"],[]);var m=t[i][_];p&&(m.values=m.values.concat(p)),f&&(L.maybe_merge_related_types(m,f),I.updateObject(p={},[i,_],{}),L.cross_update_related_types(t,p,f)),g&&(m.finalDecVal=g,m.type=g?E.checkStringValue(g):"unknown");f={};g&&(f.hasDeclaration=1),e&&(D.extend(!0,f,{trail:r.trail.selector,mq_key:r.recurse.mq_key,sectionSlug:r.section_key,selectorSlug:r.selector_key}),m.deps.push(f));var v=u.locMeta;if(v){var h=Object.keys(v);for(k=0;k<h.length;k++){var b=h[k],y=D.extend(!0,{},v[b]),S=y.trail.join(".");I.checkObject(m,["locDone",S])||(m.deps.push(y),I.updateObject(m,["locDone",S],1),"removed"===y.action&&w.updateObjectAndSavePackage(r.settings.savePackage,[{action:"delete",trail:r.trail.item.concat(["scss_types","extend",_,"locMeta"]),key:b}]))}}}},get_raw_scss_or_selector:function(e,t){return e.raw_scss||(t||e).label.split("|")[1]+" {\n\n}\n"},tag_extended:function(e,t,s){if(!e.settings.extend)return!1;for(var r=e.settings.extend,a=Object.keys(r),o=L.uiData[e.section_key][e.selector_key],n=L.get_raw_scss_or_selector(t,o),i=0;i<a.length;i++){var l=a[i],c=r[l],d=c.action;if(L.extender_match(l,n)&&c.actions)for(var _=0;_<c.actions.length;_++){d=c.actions[_].action,e.settings.active_scss_types||(e.settings.active_scss_types={}),I.checkObject(e.settings.active_scss_types,["extend",l,"locMeta"])||I.updateObject(e.settings.active_scss_types,["extend",l,"locMeta"],{});var u=e.trail.selector.join(".");e.settings.active_scss_types.extend[l].locMeta[u]={action:d,trail:e.trail.selector,mq_key:s,sectionSlug:e.section_key,selectorSlug:e.selector_key}}}},log_all_scss_selectors:function(e,t,s){var r=e.settings.deps,a=(a=t.raw_scss)||"",o=e.trail.selector,n=e.section_key,t=L.get_selector_index_from_trail(n,o);r[s][t]={code:a,mq_key:s,sectionSlug:n,selectorSlug:e.selector_key,trail:o}},scss_types:["variable","function","mixin","include","extend","property","atkeyword"],prev_full_code_scss_types:{},compare_scss_types:function(e,t){t=t||{};for(var s=D.extend(!0,{},e=e||{}),r=Object.keys(t),a=0;a<r.length;a++){var o=r[a],n=Object.keys(t[o]);e[o]||(s[o]={});for(var i=0;i<n.length;i++){var l=n[i],c=L.get_value_from_possible_object(I.checkObject(e,[o,l])),d=L.get_value_from_possible_object(t[o][l]);!1===c?s[o][l]={action:"added",actions:L.compare_add_remove_values(I.checkObject(e,[o,l,"values"]),I.checkObject(t,[o,l,"values"])),value:d,form:I.checkObject(v,[o,l,"hasDeclaration"])?"declaration":"instance"}:c===d&&delete s[o][l]}}for(var _=!1,u=Object.keys(s),p=0;p<u.length;p++)for(var o=u[p],n=Object.keys(s[o]),g=0;g<n.length;g++){var f,m,v,h,b,_=!0,l=n[g];"added"!==s[o][l].action&&(b=L.get_value_from_possible_object(I.checkObject(t,[o,l])),f=L.get_value_from_possible_object(I.checkObject(e,[o,l])),m=b?"changed":"removed",h=b||f,b=I.checkObject(v=b?t:e,[o,l,"hasDeclaration"])?"declaration":"instance",b={action:m,actions:L.compare_add_remove_values(I.checkObject(e,[o,l,"values"]),I.checkObject(t,[o,l,"values"])),value:h,form:b},"changed"==m&&(b.oldValue=f),s[o][l]=b)}return!!_&&s},compare_add_remove_values:function(e,t){var s=[];return I.compare_array_values(t,e,"added",s),I.compare_array_values(e,t,"removed",s),!!s.length&&s},get_value_from_possible_object:function(e){return e===Object(e)?I.combine_array_values(e.values):e},get_co_dependent_types:function(e,t,s){var r={},a=!1,o=["extend"];if(t||o.push("variable"),e)for(var n=0;n<o.length;n++){var i=o[n],l=I.checkObject(e,[i]);l&&(r[i]=l,a=!0)}return!s||(s=L.get_extenders(s))&&(D.extend(!0,r,s),a=!0),!!a&&r},get_changed_and_co_dependents_types:function(e,t,s,r){var a=L.get_co_dependent_types(t,s,r);return!(!e&&!a)&&{changed:e,co_types:L.get_co_dependent_types(t,s,r)}},extender_match:function(e,t){e=I.escapeRegExp(e),e=new RegExp("(?<!@extend\\s)"+e+"(?:[\\s{,]+)");return t.match(e)},get_extenders:function(e){var t=I.checkObject(L.uiData,e.split("."));if(!t)return!1;e=I.checkObject(L.uiData,["non_section","scss_usage","extend"]);if(!e)return!1;for(var s=L.get_raw_scss_or_selector(t),r=!1,a=Object.keys(e),o={extend:{}},n=0;n<a.length;n++){var i=a[n];L.extender_match(i,s)&&(o.extend[i]={},r=!0)}return!!r&&o},cachedDeps:!1,prepare_scss_sources_obj:function(){return{sectionNodes:{},deps:L.cachedDeps||L.prepare_dependent_sels_obj(),fullstring:"",parts:[]}},add_selective_sources:function(e,t,s){var r=L.get_changed_and_co_dependents_types(t.scss_types_changed,t.scss_types,t.codeEditorEdited,t.selIdentifier);s?(e.fullstring+=t.code+L.scss_div,e.parts.push(t)):(o=t.sectionIndex+t.index,e.deps[t.mq_key][o]=t);var a=I.checkObject(L.uiData,["non_section","scss_usage"]),s={selsAdded:{},relatedTypesChecked:{}},o=Object.keys(TvrMQsCombined);r&&a&&(e.deps=L.gather_dependent_selectors(e,r,a,s)),"hand_coded_css"!==t.editor_slug&&(t.scss_types||1<e.numSels)?(!(t=I.checkObject(L.uiData,["non_section","code_editors","hand_coded_css","scss_types"]))||(t=L.get_co_dependent_types(t,!1,!1))&&(e.deps=L.gather_dependent_selectors(e,{co_types:t},a,s)),L.scss_deps_to_string_parts(e,e.deps,o),L.add_full_code_scss_part(e)):L.scss_deps_to_string_parts(e,e.deps,o)},prepare_dependent_sels_obj:function(e,t){e=e||{},t=t||Object.keys(TvrMQsCombined);for(var s=0;s<t.length;s++)e[t[s]]=[];return e},gather_dependent_selectors:function(e,t,s,r){for(var a=e.deps,o=Object.keys(t),n=0;n<o.length;n++){var i=o[n];if(t[i])for(var l=Object.keys(t[i]),c=0;c<l.length;c++)for(var d=l[c],_=Object.keys(t[i][d]),u=0;u<_.length;u++){var p=_[u],g=t[i][d][p],f="changed"===i?g:{};I.checkObject(r.relatedTypesChecked,[d,p])||(I.updateObject(r.relatedTypesChecked,[d,p],1),(g=I.checkObject(s,[d,p,"related_types"]))&&(a=L.gather_dependent_selectors(e,{related_types:g},s,r)));var m=I.checkObject(s,[d,p,"deps"]);if(m&&0<m.length)for(var v,h,b,y,S,w=m.length-1;0<=w;w--)m[w]&&(h=(v=D.extend(!0,{},m[w])).action,b=v.hasDeclaration,"changed"===i&&f.form,"co_types"===i&&"variable"===d&&!b||(S=(y=v.trail).join("."),r.selsAdded[S]||(b=I.checkObject(L.uiData,y))&&(y=L.get_selector_index_from_trail(v.sectionSlug,y),v.code=L.get_raw_scss_or_selector(b),a[v.mq_key][y]=v,r.selsAdded[S]=1,e.numSels++,(S=L.get_co_dependent_types(b.scss_types,!1,S))&&(a=L.gather_dependent_selectors(e,{co_types:S},s,r))),h&&("removed"===h?m.splice(w,1):"added"===h&&delete v.action)))}}return a},toggle_scss_import_compile_note:function(e){"show"===e?L.stat.scss_compile_notes.show():L.stat.scss_compile_notes.hide()},toggle_view_draft_published_files:function(e){let t=D("#view-file");"show"===e?t.show():t.hide()},log_client_scss_error:function(e,t,s,r){var a=t.file&&"stdin"!==t.file;if(e)return a?(o=L.check_file_exists(t.file.replace("/sass/",""),!0),L.sass.readFile(o,function(e){L.log_client_scss_error(!1,t,e,r)}),L.toggle_scss_import_compile_note("show"),L.stat.scss_error_file.text(o)):(L.log_client_scss_error(!1,t,L.previousSCSSCompile,r),L.toggle_scss_import_compile_note("hide")),!1;var e=TvrLang.scss_error_line,o=a?L.stat.scss_import_compile_notes.html():"",a=t.message.replace(r,"");L.scss_error={log:{short:TvrLang.scss_error,long:"<p>"+TvrLang.scss_error_long+'.</p><p style="font-weight: bold">'+a+".</p>"+o+'<p><span id="scss-line-error" class="link show-dialog" rel="display-css-code"  data-line="'+t.line+'" title="'+e+'">'+e+"</span></p>"},line:t.line,fullString:s},P.update_full_logs(L.scss_error.log),D.extend(!0,L.scss_error,t),L.stat.tvr.addClass("cur_scss_error")},clear_client_scss_error:function(){P.clear_messages(),L.stat.tvr.removeClass("cur_scss_error"),L.scss_error=!1},scssCompileNext:{},compileQueue:[],enqeueCompile:function(e){L.compileQueue.push(e)},deqeueCompile:function(){L.compileQueue.shift()},pendingCompile:function(){return L.compileQueue[0]||!1},mt_compile_scss:function(s,r,a,e,o){if(L.compilingSCSS)return L.enqeueCompile([s,r,a,e,o]),!1;I.startT("prep_and_compile_scss"),I.startT("prep_scss"),L.compilingSCSS=!0;var n=s.settings,t=n.preprocessor,i=L.prepare_scss_sources_obj(),l=n.fullSCSSCompile||t.importChanged||L.fullCompileNeeded;L.fullCompileNeeded=l,i.numSels=0,l&&!L.scssCompileNext.run?(P.update_prog_indicator("plus",TvrLang.compile_scss),L.scss_compile_everything(i)):L.add_selective_sources(i,t,e),L.cachedDeps=D.extend(!0,{},i.deps),I.endT("prep_scss"),I.startT("compile_scss"),L.sass.compile(i.fullstring,function(e){l&&P.update_prog_indicator("minus",!1,TvrLang.compile_scss),I.endT("compile_scss"),I.endT("prep_and_compile_scss"),L.compilingSCSS=!1,I.startT("post_scss_node_update_or_error");var t=new RegExp(I.escapeRegExp(L.scss_div),"g");L.previousSCSSCompile=i.fullstring.replace(t,""),e.status&&3!==e.status?(L.log_client_scss_error(!0,e,!1,t),s.sassCompileError=1):(L.fullCompileNeeded=!1,L.scss_error&&L.clear_client_scss_error(),n=L.update_nodes_with_compiled_css(n,i,e),L.cachedDeps=!1),I.endT("post_scss_node_update_or_error");e=L.pendingCompile();if(e)return L.deqeueCompile(),L.mt_compile_scss.apply(this,e),!1;s.isSassVendorPrefixPatch||s.keepSelectorAsUnsavedDraft||P.save_or_start_timer(s,r,a,o)})},update_nodes_with_compiled_css:function(e,t,s){var s=s.text?s.text.trim():"",r=L.extract_compiled_parts(s),a="";";"===r[r.length-1]&&r.pop(),t.parts.length,r.length;for(var o=0;o<r.length;o++){var n,i,l=t.parts[o];l.isJunk||l.trail&&!I.checkObject(L.uiData,l.trail)||(n=l.compiled_css_trail||l.trail.concat(["compiled_css"]),a=r[o].trim()+"\n",l.node_trail&&(a=a.replace(P.full_editor_placeholder_comment,"")),i={action:"replace",trail:n,data:a=L.apply_sass_post_css(a)},e.savePackage?w.updateObjectAndSavePackage(e.savePackage,i):I.updateObject(L.uiData,n,a,i),l.node_trail&&L.iframeEditing()&&y.update_preview_style_node(l.node_trail,a))}for(var c=Object.keys(t.sectionNodes),d=0;d<c.length;d++){var _=c[d].split("."),u=_[0],p=_[1],_=[u,p];a=w.get_section_css(!1,!1,w.get_js_object_data([p],u).data),L.iframeEditing()&&y.update_preview_style_node(_,a,w.get_media_query(u))}return e},apply_sass_post_css:function(e){e=E.parse_css(e,!0);return e.stylesheet.rules=E.add_final_compile_data(e.stylesheet.rules),E.stringify_css(e,{opts:{},tabDepth:0,tab:""})},get_selector_index_from_trail:function(e,t){e=L.get_section_index(e),t=2<t.length?t.slice(Math.max(t.length-2,1)):t;return e+L.get_selector_index(t)},scss_deps_to_string_parts:function(e,t,s){for(var r=0;r<s.length;r++){var a,o,n,i,l=s[r],c=t[l].filter(Boolean),d="all-devices"!==l&&c.length,_=d?"\t":"";for(o in d&&(l="\n\n/*( "+(a=L.pref.m_queries[l]).label+" )*/\n",e.fullstring+=l+a.query+" {\n"+L.scss_div,e.parts.push({isJunk:!0})),c)c.hasOwnProperty(o)&&(n=c[o],I.checkObject(L.uiData,[n.sectionSlug,n.selectorSlug])&&(i="\n"+_+"/** "+L.get_section_name(n.sectionSlug)+" >> "+L.get_selector_name([n.sectionSlug,n.selectorSlug])+" **/\n"+_+L.scss_div,e.fullstring+=i,e.parts.push({isJunk:!0}),"all-devices"!==n.mq_key&&(n.code=n.code.replace(/\n/g,"\n\t")),e.fullstring+=n.code+L.scss_div,e.parts.push({trail:n.trail,mq_key:n.mq_key}),e.sectionNodes[n.mq_key+"."+n.sectionSlug]=1));d&&(e.fullstring+="\n}\n"+L.scss_div,e.parts.push({isJunk:!0}))}},add_full_code_scss_part:function(e){if(!L.uiData.non_section.hand_coded_css)return!1;var t=E.get_trail_from_name("tvr_mcth[non_section][hand_coded_css_compiled]"),s=D.extend([],t),r="/*= Full Code Editor CSS ============ */\n\n"+L.scss_div;e.fullstring=L.uiData.non_section.hand_coded_css+L.scss_div+e.fullstring,e.parts.unshift({compiled_css_trail:t,node_trail:s}),e.fullstring=r+e.fullstring,e.parts.unshift({isJunk:!0})},scss_error:!1,scss_compile_everything:function(e){L.add_full_code_scss_part(e),e.deps=w.run_global_scans({},["get_all_scss"]).deps,L.scss_deps_to_string_parts(e,e.deps,Object.keys(TvrMQsCombined))},get_section_name:function(e){return I.checkObject(L.uiData,[e,"this","label"])},get_selector_name:function(e){return I.checkObject(L.uiData,e.concat(["label"])).split("|")[0]},get_section_index:function(e){return I.checkObject(L.uiData,[e,"this","index"])},get_selector_index:function(e){return I.checkObject(L.uiData,e.concat(["index"]))},check_update_scss_changes:function(e,t){var s=this.get_scss_types(t);if("parseFail"===s)return!1;var r=I.checkObject(L.uiData,t.scss_types_trail),a=L.compare_scss_types(r,s);if(a){if(0<I.obj_length(a.extend)&&(L.search_scss_extendable_selectors(e,t,a.extend,s),s=e.active_scss_types),s.extend)for(var o=Object.keys(s.extend),n=0;n<o.length;n++){var i=o[n];I.checkObject(a,["extend",i])||(s.extend[i]=r.extend[i])}w.updateObjectAndSavePackage(e.savePackage,{action:"replace",trail:t.scss_types_trail,data:s})}return a},search_scss_extendable_selectors:function(e,t,s,r){e.extend=s,e.active_scss_types=r,t.mq_key&&(e.mq_key=t.mq_key);t=w.run_global_scans(e,["tag_extended"]);e.active_scss_types=t.active_scss_types},extract_compiled_parts:function(e){return e.split(L.scss_div).filter(Boolean)},check_file_exists:function(e,t){var s=TvrMT.data.dyn.micro_files,r=e.split("/"),a=r.length-1,e=r[a],o=[r];if(t)for(var t=(t=I.file_extension(e))&&t[1],e=I.strip_extension(e).replace("_",""),n=t?[t]:["scss","sass","css"],i=[e,"_"+e],o=[],l=0;l<n.length;l++)for(var c=0;c<i.length;c++){var d=i[c],_=n[l],u=D.extend([],r);u[a]=d+"."+_,o.push(u)}for(var p=0;p<o.length;p++){var g=o[p];if(I.checkObject(s,g))return g.join("/")}return!1},toggle_enabled_buttons:function(){I.startT(arguments),L.totalSels<1&&(L.reset_global_vars(),D("#starter-message").removeClass("hidden"),D("#quick-nav").addClass("hidden"),L.stat.tvr.removeClass("tvr-sels-exist").addClass("tvr-no-sels")),0<L.totalSels&&(D("#starter-message").addClass("hidden"),D("#quick-nav").removeClass("hidden"),L.stat.tvr.addClass("tvr-sels-exist").removeClass("tvr-no-sels")),I.endT(arguments)},remember_page_viewed:function(e){if(I.startT(arguments),!y)return!1;if(!(t=e||y.get_current_url()))return!1;var t=I.strip_page_builder_and_other_params(t),s=I.extract_url_path(t,L.blog_details);if(I.hasValue(t)&&!L.placeholderFrame){var r=y.get_current_page_title(s,!0);"Untitled"===r&&(r=s),P.simple_ajax_request({type:"GET",url:L.ajaxUrl+"&mt_preview_url="+encodeURIComponent(t)+"&mt_preview_path="+encodeURIComponent(s)+"&mt_path_label="+r+"&mt_item_id="+L.pageOrPostID}),L.stat.changeUrlInputWrap.find("input").val(""),D("#back-to-frontend").attr("href",t),L.pref.preview_url=t,D("#pref-preview-url-input").val(t);var a=TvrMT.data.prog.combo.custom_paths,t=I.in_array(s,a,!1,"value");t&&a.splice(t,1);for(var o=a.length-1;0<=o;o--)a[o].label===r&&a.splice(o,1);a.unshift({value:s,label:r,item_id:L.pageOrPostID}),TvrMT.data.prog.combo.custom_paths=a.slice(0,8)}I.endT(arguments)},remember_css_import_file:function(){I.startT(arguments);var e=D("#stylesheet_to_import").val();if(!I.hasValue(e))return!1;P.simple_ajax_request({type:"GET",url:L.ajaxUrl+"&import_css_url="+encodeURI(e)});var t=I.in_array(e,TvrMT.data.prog.combo.viewed_import_stylesheets);!1!==t&&TvrMT.data.prog.combo.viewed_import_stylesheets.splice(t,1),TvrMT.data.prog.combo.viewed_import_stylesheets.unshift(e),I.endT(arguments)},exclStylesheetSubStrings:{always:[{str:"wp-includes/css",unless:null},{str:"wp-includes/js"},{str:"admin-bar"},{str:"dashicons"},{str:"font-awesome"},{str:"genericons"},{str:"microthemer/css/frontend"},{str:"animate.min.css"},{str:"fonts.googleapis.com"},{str:"elementor/assets",unless:"frontend.min.css"}],FLBuilder:[{str:"bb-plugin/css"},{str:"foundation-icons"}],oxygen:[{str:"component-framework/vendor"},{str:"component-framework/toolbar"},{str:"wp-includes/js/tinymce"},{str:"jquery-ui.css"},{str:"buttons.min.css"},{str:"mediaelementplayer-legacy.min.css"},{str:"wp-mediaelement.min.css"},{str:"imgareaselect.css"},{str:"wp-includes/css/editor.min.css"}]},ignore_stylesheet:function(e,t){if(!e)return!(!t.ownerNode||"ct_svg_sets"!==t.ownerNode.className);var s,r=L.exclStylesheetSubStrings;for(s in r)if(r.hasOwnProperty(s)&&("always"===s||TvrMT.integrate[s]))for(var a in r[s])if(r[s].hasOwnProperty(a)){a=r[s][a];if(-1<e.indexOf(a.str)&&(!a.unless||e.indexOf(a.unless)<0))return!0}return!1},filter_excluded_stylesheets:function(e){for(var t=e.length-1;0<=t;t--)L.ignore_stylesheet(e[t].href,e[t])&&e.splice(t,1);return e},refresh_stylesheet_list:function(e){var t,e=e.siblings("input"),s=y.stat.doc.styleSheets,r=["admin-bar","dashicons","genericons","microthemer/css/frontend"],a=[];for(t in s)if(s.hasOwnProperty(t)){var o=s[t].href,n=!1;if(o){for(var i in r)if(r.hasOwnProperty(i)&&-1<o.indexOf(r[i])){n=!0;break}n||a.push(o)}}TvrMT.data.prog.combo.viewed_import_stylesheets=D.extend(!0,[],a),e.focus().MTautocomplete().MTautocomplete("search","")},update_prev_next_sel_buttons:function(e){if(I.startT(arguments),!e)return D("#vb-focus-prev, #vb-focus-next").addClass("disabled"),!1;var t=L.slugs_from_id(e),s=D("#vb-focus-prev"),r=D("#vb-focus-next"),a=L.itemScan("selector","prev","getID",t.sectionSlug,t.selectorSlug,{incCurrentSection:!0}),t=L.itemScan("selector","next","getID",t.sectionSlug,t.selectorSlug,{incCurrentSection:!0});a?s.removeClass("disabled"):s.addClass("disabled"),t?r.removeClass("disabled"):r.addClass("disabled"),I.endT(arguments)},itemScan:function(e,t,s,r,a,o){var n=(o=o||{}).incCurrentSection?"IncCurrent":"",i=I.editArray(Object.keys(L.uiData),"non_section","remove"),i=I.editArray(i,r,t+"Items"+n);"prev"===t&&i.reverse();for(var l=0;l<i.length;l++){var c=i[l];if("section"===e)switch(s){case"getPreviousNode":var d=w.format_css_node_id([o.mq_key,c]),d=y.frontend_jquery_select("#"+d);if(I.isDomEl(d))return d;break;case"getSlugIfHasLogic":if(I.checkObject(L.uiData,[c,"this","logic","expr"]))return c;break;case"getID":return"strk-"+c}if("selector"===e){var _=I.editArray(Object.keys(L.uiData[c]),"this","remove"),_=r===c?I.editArray(_,a,t+"Items"):_;"prev"===t&&_.reverse();for(var u=0;u<_.length;u++){var p=_[u];switch(s){case"getPreviousNode":var g=w.format_css_node_id([o.mq_key,c,p]),g=y.frontend_jquery_select("#"+g);if(I.isDomEl(g))return g;break;case"getID":return"strk-"+c+"-"+p}}}}switch(s){case"getPreviousNode":return y.frontend_jquery_select("#"+w.format_css_node_id([o.mq_key]));case"getID":return!1}return!1},itemScanOld:function(e,t,s,r,a){var o=(a=a||{}).incCurrentSection?"IncCurrent":"",n=I.editArray(Object.keys(L.uiData),"non_section","remove"),n=I.editArray(n,s,e+"Items"+o);"prev"===e&&n.reverse();for(var i=0;i<n.length;i++){var l=n[i],c=I.editArray(Object.keys(L.uiData[l]),"this","remove"),c=s===l?I.editArray(c,r,e+"Items"):c;"prev"===e&&c.reverse();for(var d=0;d<c.length;d++){var _=c[d];switch(t){case"getPreviousNode":var u=w.format_css_node_id([a.mq_key,l,_]),u=y.frontend_jquery_select("#"+u);if(I.isDomEl(u))return u;break;case"getID":return"strk-"+l+"-"+_}}}switch(t){case"getPreviousNode":return y.frontend_jquery_select("#"+w.format_css_node_id([a.mq_key]));case"getID":return!1}return!1},tvr_iterate_selectors_v:function(e,t,s){if(I.startT(arguments),"add_draft_selector"===(s=s||{}).action||s.draftSelectorFolderCreated||L.cancel_draft_selector_edit(),t=t||e.attr("id"),e=e||D("#"+t),!I.isDomEl(e,!0))for(var r=L.slugs_from_id(t),a="strk-"+r.sectionSlug+"-"+r.selectorSlug,o=D("#strk-"+r.sectionSlug),r={sectionSlug:r.sectionSlug,sectionM:o},n=L.load_folder_menu_selectors(r),i=0;i<n.length;i++){var l=D(n[i]);l.attr("id")===a&&(e=l)}L.stat.opts.add(L.stat.mainMenu).find("li.in-focus").removeClass("in-focus");o=L.get_meta(e,"selector");o.sectionM.hasClass("is-open")||L.open_folder(o,!0);r=L.load_selector(o,{items:["selector"]});(o=L.get_meta(r,"selector")).selector.add(o.selectorM).add(o.section).add(o.sectionM).addClass("in-focus"),L.update_global_vars(o,s),L.unload_all_option_selectors(),L.update_prev_next_sel_buttons(o.selectorID),s.addPseudoBaseStyles||(L.maybe_default_to_pg(s),L.js_check_values({},o),L.selector_check_disabled(o),F.toolbar_adjusted(),L.iframeEditing()&&!s.elementAlreadySelected&&(s.existingSelCSS=I.custom_escape_quotes(L.curSelCSS),s.selMID=o.selectorMID,y.select_current_selector_elements(s)),I.endT(arguments))},iframeEditing:function(e){return y&&(!e||y.getMTDynFrontData()&&y.getMTDynFrontData().interactions)},maybe_default_to_pg:function(e){var t=L.pref.pg_focus;L.pg_icon_pressed(L.stat.css_icons.find(t?".pg-icon-"+t:".pg-icon-font"),!0,e)},quick_nav:function(e){if(I.startT(arguments),e.hasClass("disabled")||!L.selInFocusID)return!1;var t=L.get_meta(D("#"+L.selInFocusID),"selector"),s="vb-focus-prev"===e.attr("id")?"prev":"next";L.tvr_iterate_selectors_v(!1,L.itemScan("selector",s,"getID",t.sectionSlug,t.selectorSlug,{incCurrentSection:!0}),{doNotBringStylesTop:1})},set_vars:function(){y=TvrMT.MTF,p=window.TvrMT.MTdetached,s=window.TvrMT.detachedWin}};var L=TvrMT.TvrUi;MTlocal.set_vars(),I.set_vars(),O.set_vars(),g.set_vars(),w.set_vars(),E.set_vars(),P.set_vars(),e.set_vars(),_.set_vars(),u.set_vars(),m.set_vars(),F.set_vars(),L.init()});