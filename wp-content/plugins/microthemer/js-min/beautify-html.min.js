!function(){function U(t){return t.replace(/\s+$/g,"")}function s(t,e,n,i){function s(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=h,this.indent_body_inner_html=a,this.indent_head_inner_html=o,this.Utils={whitespace:"\n\r\t ".split(""),single_token:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","?php","basefont","isindex"],extra_liners:g,in_array:function(t,e){for(var n=0;n<e.length;n++)if(t===e[n])return!0;return!1}},this.is_whitespace=function(t){for(var e=0;e<t.length;e++)if(!this.Utils.in_array(t.charAt(e),this.Utils.whitespace))return!1;return!0},this.traverse_whitespace=function(){var t="",t=this.input.charAt(this.pos);if(this.Utils.in_array(t,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(t,this.Utils.whitespace);)l&&"\n"===t&&this.newlines<=c&&(this.newlines+=1),this.pos++,t=this.input.charAt(this.pos);return!0}return!1},this.space_or_wrap=function(t){return this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,t),this.print_indentation(t),!0):(this.line_char_count++,t.push(" "),!1)},this.get_content=function(){for(var t,e=[],n=0;"<"!==this.input.charAt(this.pos)||2===n;){if(this.pos>=this.input.length)return e.length?e.join(""):["","TK_EOF"];if(n<2&&this.traverse_whitespace())this.space_or_wrap(e);else{if(t=this.input.charAt(this.pos),v){if("{"===t?n+=1:n<2&&(n=0),"}"===t&&0<n&&0==n--)break;var i=this.input.substr(this.pos,3);if("{{#"===i||"{{/"===i)break;if("{{!"===i)return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"];if("{{"===this.input.substr(this.pos,2)&&"{{else}}"===this.get_tag(!0))break}this.pos++,this.line_char_count++,e.push(t)}}return e.length?e.join(""):""},this.get_contents_to=function(t){if(this.pos===this.input.length)return["","TK_EOF"];var e="",t=new RegExp("</"+t+"\\s*>","igm");t.lastIndex=this.pos;t=t.exec(this.input),t=t?t.index:this.input.length;return this.pos<t&&(e=this.input.substring(this.pos,t),this.pos=t),e},this.record_tag=function(t){this.tags[t+"count"]?this.tags[t+"count"]++:this.tags[t+"count"]=1,this.tags[t+this.tags[t+"count"]]=this.indent_level,this.tags[t+this.tags[t+"count"]+"parent"]=this.tags.parent,this.tags.parent=t+this.tags[t+"count"]},this.retrieve_tag=function(t){if(this.tags[t+"count"]){for(var e=this.tags.parent;e&&t+this.tags[t+"count"]!==e;)e=this.tags[e+"parent"];e&&(this.indent_level=this.tags[t+this.tags[t+"count"]],this.tags.parent=this.tags[e+"parent"]),delete this.tags[t+this.tags[t+"count"]+"parent"],delete this.tags[t+this.tags[t+"count"]],1===this.tags[t+"count"]?delete this.tags[t+"count"]:this.tags[t+"count"]--}},this.indent_to_tag=function(t){if(this.tags[t+"count"]){for(var e=this.tags.parent;e&&t+this.tags[t+"count"]!==e;)e=this.tags[e+"parent"];e&&(this.indent_level=this.tags[t+this.tags[t+"count"]])}},this.get_tag=function(t){var e,n,i,s,r="",h=[],a=!1,o=!0,_=!1,u=this.pos,p=this.line_char_count,l=!1;t=void 0!==t&&t;do{if(this.pos>=this.input.length)return t&&(this.pos=u,this.line_char_count=p),h.length?h.join(""):["","TK_EOF"];if(r=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(r,this.Utils.whitespace))a=!0;else{if("'"!==r&&'"'!==r||(r+=this.get_unformatted(r),a=!0),"="===r&&(a=!1),i=this.input.substr(this.pos-1),!N||!_||l||">"!==r&&"/"!==r||i.match(/^\/?\s*>/)&&(this.print_newline(!(l=!(a=!1)),h),this.print_indentation(h)),h.length&&"="!==h[h.length-1]&&">"!==r&&a){var c,d=this.space_or_wrap(h)&&"/"!==r&&!A,a=!1;if(A&&"/"!==r&&(c=!1,N&&o&&(c=!(null!==i.match(/^\S*(="([^"]|\\")*")?\s*\/?\s*>/))),o&&!c||(this.print_newline(!1,h),this.print_indentation(h),d=!0)),d){var _=!0,g=x;E&&(g=h.indexOf(" ")+1);for(var f=0;f<g;f++)h.push(" ")}if(o)for(var b=0;b<h.length;b++)if(" "===h[b]){o=!1;break}}if(v&&"<"===n&&r+this.input.charAt(this.pos)==="{{"&&(r+=this.get_unformatted("}}"),h.length&&" "!==h[h.length-1]&&"<"!==h[h.length-1]&&(r=" "+r),a=!0),"<"!==r||n||(e=this.pos-1,n="<"),v&&!n&&2<=h.length&&"{"===h[h.length-1]&&"{"===h[h.length-2]&&(e="#"===r||"/"===r||"!"===r?this.pos-3:this.pos-2,n="{"),this.line_char_count++,h.push(r),h[1]&&("!"===h[1]||"?"===h[1]||"%"===h[1])){h=[this.get_comment(e)];break}if(v&&h[1]&&"{"===h[1]&&h[2]&&"!"===h[2]){h=[this.get_comment(e)];break}if(v&&"{"===n&&2<h.length&&"}"===h[h.length-2]&&"}"===h[h.length-1])break}}while(">"!==r);var m=h.join(""),w=-1!==m.indexOf(" ")?m.indexOf(" "):-1!==m.indexOf("\n")?m.indexOf("\n"):"{"===m.charAt(0)?m.indexOf("}"):m.indexOf(">"),y="<"!==m.charAt(0)&&v?"#"===m.charAt(2)?3:2:1,w=m.substring(y,w).toLowerCase();return"/"===m.charAt(m.length-2)||this.Utils.in_array(w,this.Utils.single_token)?t||(this.tag_type="SINGLE"):v&&"{"===m.charAt(0)&&"else"===w?t||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(w,T)||this.is_unformatted(w,k)?(s=this.get_unformatted("</"+w+">",m),h.push(s),this.pos,this.tag_type="SINGLE"):"script"===w&&(-1===m.search("type")||-1<m.search("type")&&-1<m.search(/\b(text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect)/))?t||(this.record_tag(w),this.tag_type="SCRIPT"):"style"===w&&(-1===m.search("type")||-1<m.search("type")&&-1<m.search("text/css"))?t||(this.record_tag(w),this.tag_type="STYLE"):"!"===w.charAt(0)?t||(this.tag_type="SINGLE",this.traverse_whitespace()):t||("/"===w.charAt(0)?(this.retrieve_tag(w.substring(1)),this.tag_type="END"):(this.record_tag(w),"html"!==w.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(h),this.Utils.in_array(w,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!==this.output[this.output.length-2]&&this.print_newline(!0,this.output))),t&&(this.pos=u,this.line_char_count=p),h.join("")},this.get_comment=function(t){var e="",n=">",i=!1;this.pos=t;var s=this.input.charAt(this.pos);for(this.pos++;this.pos<=this.input.length&&((e+=s).charAt(e.length-1)!==n.charAt(n.length-1)||-1===e.indexOf(n));)!i&&e.length<10&&(0===e.indexOf("<![if")?(n="<![endif]>",i=!0):0===e.indexOf("<![cdata[")?(n="]]>",i=!0):0===e.indexOf("<![")?(n="]>",i=!0):0===e.indexOf("\x3c!--")?(n="--\x3e",i=!0):0===e.indexOf("{{!--")?(n="--}}",i=!0):0===e.indexOf("{{!")?5===e.length&&-1===e.indexOf("{{!--")&&(n="}}",i=!0):0===e.indexOf("<?")?(n="?>",i=!0):0===e.indexOf("<%")&&(n="%>",i=!0)),s=this.input.charAt(this.pos),this.pos++;return e},this.get_unformatted=function(t,e){if(e&&-1!==e.toLowerCase().indexOf(t))return"";var n,i,s,r="",h=!0,a=(i=t,s="",{add:function(t){t=s+t.toLowerCase();s=t.length<=i.length?t:t.substr(t.length-i.length,i.length)},doesNotMatch:function(){return-1===s.indexOf(i)}});do{if(this.pos>=this.input.length)return r;if(n=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(n,this.Utils.whitespace)){if(!h){this.line_char_count--;continue}if("\n"===n||"\r"===n){r+="\n",this.line_char_count=0;continue}}r+=n,a.add(n),this.line_char_count++,h=!0,v&&"{"===n&&r.length&&"{"===r.charAt(r.length-2)&&(r+=this.get_unformatted("}}"))}while(a.doesNotMatch());return r},this.get_token=function(){if("TK_TAG_SCRIPT"!==this.last_token&&"TK_TAG_STYLE"!==this.last_token)return"CONTENT"===this.current_mode?"string"!=typeof(t=this.get_content())?t:[t,"TK_CONTENT"]:"TAG"===this.current_mode?"string"!=typeof(t=this.get_tag())?t:[t,"TK_TAG_"+this.tag_type]:void 0;var t,e=this.last_token.substr(7);return"string"!=typeof(t=this.get_contents_to(e))?t:[t,"TK_"+e]},this.get_full_indent=function(t){return(t=this.indent_level+t||0)<1?"":Array(t+1).join(this.indent_string)},this.is_unformatted=function(t,e){if(!this.Utils.in_array(t,e))return!1;if("a"!==t.toLowerCase()||!this.Utils.in_array("a",e))return!0;t=(this.get_tag(!0)||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!(t&&!this.Utils.in_array(t,e))},this.printer=function(t,e,n,i,s){this.input=t||"",this.input=this.input.replace(/\r\n|[\r\u2028\u2029]/g,"\n"),this.output=[],this.indent_character=e,this.indent_string="",this.indent_size=n,this.brace_style=s,this.indent_level=0,this.wrap_line_length=i;for(var r=this.line_char_count=0;r<this.indent_size;r++)this.indent_string+=this.indent_character;this.print_newline=function(t,e){this.line_char_count=0,e&&e.length&&(t||"\n"!==e[e.length-1])&&("\n"!==e[e.length-1]&&(e[e.length-1]=U(e[e.length-1])),e.push("\n"))},this.print_indentation=function(t){for(var e=0;e<this.indent_level;e++)t.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(t){this.is_whitespace(t)&&!this.output.length||((t||""!==t)&&this.output.length&&"\n"===this.output[this.output.length-1]&&(this.print_indentation(this.output),t=t.replace(/^\s+/g,"")),this.print_token_raw(t))},this.print_token_raw=function(t){(t=0<this.newlines?U(t):t)&&""!==t&&(1<t.length&&"\n"===t.charAt(t.length-1)?(this.output.push(t.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(t));for(var e=0;e<this.newlines;e++)this.print_newline(0<e,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){0<this.indent_level&&this.indent_level--}},this}var r,h,a,o,_,u,p,T,k,l,c,v,x,A,N,E,d,g,f;for(void 0!==(e=function(t,e){var n,i={};for(n in t)n!==e&&(i[n]=t[n]);if(e in t)for(n in t[e])i[n]=t[e][n];return i}(e=e||{},"html")).wrap_line_length&&0!==parseInt(e.wrap_line_length,10)||void 0===e.max_char||0===parseInt(e.max_char,10)||(e.wrap_line_length=e.max_char),h=void 0!==e.indent_inner_html&&e.indent_inner_html,a=void 0===e.indent_body_inner_html||e.indent_body_inner_html,o=void 0===e.indent_head_inner_html||e.indent_head_inner_html,_=void 0===e.indent_size?4:parseInt(e.indent_size,10),u=void 0===e.indent_char?" ":e.indent_char,L=void 0===e.brace_style?"collapse":e.brace_style,p=0===parseInt(e.wrap_line_length,10)?32786:parseInt(e.wrap_line_length||250,10),T=e.unformatted||["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","address","big","dt","ins","strike","tt"],k=e.content_unformatted||["pre"],l=void 0===e.preserve_newlines||e.preserve_newlines,c=l?isNaN(parseInt(e.max_preserve_newlines,10))?32786:parseInt(e.max_preserve_newlines,10):0,v=void 0!==e.indent_handlebars&&e.indent_handlebars,f=void 0===e.wrap_attributes?"auto":e.wrap_attributes,x=isNaN(parseInt(e.wrap_attributes_indent_size,10))?_:parseInt(e.wrap_attributes_indent_size,10),A="force"===f.substr(0,"force".length),N="force-expand-multiline"===f,E="force-aligned"===f,d=void 0!==e.end_with_newline&&e.end_with_newline,g="object"==typeof e.extra_liners&&e.extra_liners?e.extra_liners.concat():("string"==typeof e.extra_liners?e.extra_liners:"head,body,/html").split(","),f=e.eol||"auto",e.indent_with_tabs&&(u="\t",_=1),"auto"===f&&(f="\n",t&&j.test(t||"")&&(f=t.match(j)[0])),f=f.replace(/\\r/,"\r").replace(/\\n/,"\n"),t=t.replace(I,"\n"),(r=new s).printer(t,u,_,p,L);;){var b,m,w,y,O=r.get_token();if(r.token_text=O[0],r.token_type=O[1],"TK_EOF"===r.token_type)break;switch(r.token_type){case"TK_TAG_START":r.print_newline(!1,r.output),r.print_token(r.token_text),r.indent_content&&(!r.indent_body_inner_html&&r.token_text.match(/<body(?:.*)>/)||!r.indent_head_inner_html&&r.token_text.match(/<head(?:.*)>/)||r.indent(),r.indent_content=!1),r.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":r.print_newline(!1,r.output),r.print_token(r.token_text),r.current_mode="CONTENT";break;case"TK_TAG_END":"TK_CONTENT"===r.last_token&&""===r.last_text&&(w=(r.token_text.match(/\w+/)||[])[0],(m=null)!==(m=r.output.length?r.output[r.output.length-1].match(/(?:<|{{#)\s*(\w+)/):m)&&(m[1]===w||r.Utils.in_array(m[1],T))||r.print_newline(!1,r.output)),r.print_token(r.token_text),r.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var K=r.token_text.match(/^\s*<([a-z-]+)/i);K&&r.Utils.in_array(K[1],T)||r.print_newline(!1,r.output),r.print_token(r.token_text),r.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":for(var S=!1,C=r.output.length-1;0<=C&&"\n"!==r.output[C];C--)if(r.output[C].match(/{{#if/)){S=!0;break}S||r.print_newline(!1,r.output),r.print_token(r.token_text),r.indent_content&&(r.indent(),r.indent_content=!1),r.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":case"TK_CONTENT":r.print_token(r.token_text),r.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":""!==r.token_text&&(r.print_newline(!1,r.output),w=r.token_text,m=1,"TK_SCRIPT"===r.token_type?b="function"==typeof n&&n:"TK_STYLE"===r.token_type&&(b="function"==typeof i&&i),"keep"===e.indent_scripts?m=0:"separate"===e.indent_scripts&&(m=-r.indent_level),K=r.get_full_indent(m),(w=b?((y=function(){this.eol="\n"}).prototype=e,y=new y,b(w.replace(/^\s*/,K),y)):(y=w.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(r.indent_string).length-1,y=r.get_full_indent(m-y),w.replace(/^\s*/,K).replace(/\r\n|\r|\n/g,"\n"+y).replace(/\s+$/,"")))&&(r.print_token_raw(w),r.print_newline(!0,r.output))),r.current_mode="TAG";break;default:""!==r.token_text&&r.print_token(r.token_text)}r.last_token=r.token_type,r.last_text=r.token_text}var L=r.output.join("").replace(/[\r\n\t ]+$/,"");return d&&(L+="\n"),L="\n"!==f?L.replace(/[\n]/g,f):L}var n,i,j=/\r\n|[\n\r\u2028\u2029]/,I=new RegExp(j.source,"g");"function"==typeof define&&define.amd?define(["require","./beautify","./beautify-css"],function(t){var n=t("./beautify"),i=t("./beautify-css");return{html_beautify:function(t,e){return s(t,e,n.js_beautify,i.css_beautify)}}}):"undefined"!=typeof exports?(n=require("./beautify.js"),i=require("./beautify-css.js"),exports.html_beautify=function(t,e){return s(t,e,n.js_beautify,i.css_beautify)}):"undefined"!=typeof window?window.html_beautify=function(t,e){return s(t,e,window.js_beautify,window.css_beautify)}:"undefined"!=typeof global&&(global.html_beautify=function(t,e){return s(t,e,global.js_beautify,global.css_beautify)}),"undefined"!=typeof self&&(self.html_beautify=function(t,e){return s(t,e)})}();